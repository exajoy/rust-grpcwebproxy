<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>:root {
  --color: black;
  --bg: white;
  --head-bg: white;
  --link: #338;

  --blue: #ccf;
  --red: #fcc;
  --yellow: #ffc;
  --green: #cfc;
}

[data-theme='dark'] {
  --color: white;
  --bg: black;
  --head-bg: #333;
  --link: #aaf;

  --blue: #225;
  --red: #522;
  --yellow: #552;
  --green: #252;
}

html,
body {
  margin: 0;
  padding: 0;
  color: var(--color);
  background: var(--bg);
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: var(--head-bg);
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: var(--blue);
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: var(--red);
}
.files-list__file_medium {
  background: var(--yellow);
}
.files-list__file_high {
  background: var(--green);
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: var(--bg);
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: var(--link);
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
  counter-reset: line;
  display: flex;
  flex-direction: column;
}

.code-line::before {
  content: counter(line);
  margin-right: 10px;
}
.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
  counter-increment: line;
}
.code-line_covered {
  background: var(--green);
}
.code-line_uncovered {
  background: var(--red);
}

#theme-toggle-label {
  margin-left: 1ch;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","grpcweb","args.rs"],"content":"use clap::Parser;\n\n#[derive(Parser, Debug)]\n#[command(name = \"server\", about = \"Run the server with options\")]\npub struct Args {\n    #[arg(long, default_value = \"127.0.0.1\")]\n    pub proxy_host: String,\n    #[arg(long, default_value_t = 8080)]\n    pub proxy_port: u16,\n\n    #[arg(long, default_value = \"127.0.0.1\")]\n    pub forward_host: String,\n\n    #[arg(long, default_value_t = 3000)]\n    pub forward_port: u16,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","grpcweb","call.rs"],"content":"#![allow(dead_code)]\n\nuse std::fmt;\nuse std::pin::Pin;\nuse std::task::{Context, Poll, ready};\n\nuse crate::status::Status;\nuse base64::Engine as _;\nuse bytes::{Buf, BufMut, Bytes, BytesMut};\nuse http::{HeaderMap, HeaderName, HeaderValue, header};\nuse http_body::{Frame, SizeHint};\nuse hyper::body::Body;\nuse pin_project::pin_project;\n\nuse self::content_types::*;\n\n// A grpc header is u8 (flag) + u32 (msg len)\nconst GRPC_HEADER_SIZE: usize = 1 + 4;\n\npub(crate) mod content_types {\n    use http::{HeaderMap, header::CONTENT_TYPE};\n\n    pub(crate) const GRPC_WEB: \u0026str = \"application/grpc-web\";\n    pub(crate) const GRPC_WEB_PROTO: \u0026str = \"application/grpc-web+proto\";\n    pub(crate) const GRPC_WEB_TEXT: \u0026str = \"application/grpc-web-text\";\n    pub(crate) const GRPC_WEB_TEXT_PROTO: \u0026str = \"application/grpc-web-text+proto\";\n\n    pub(crate) fn is_grpc_web(headers: \u0026HeaderMap) -\u003e bool {\n        matches!(\n            content_type(headers),\n            Some(GRPC_WEB) | Some(GRPC_WEB_PROTO) | Some(GRPC_WEB_TEXT) | Some(GRPC_WEB_TEXT_PROTO)\n        )\n    }\n\n    fn content_type(headers: \u0026HeaderMap) -\u003e Option\u003c\u0026str\u003e {\n        headers.get(CONTENT_TYPE).and_then(|val| val.to_str().ok())\n    }\n}\n\nconst BUFFER_SIZE: usize = 8 * 1024;\n\nconst FRAME_HEADER_SIZE: usize = 5;\n\n// 8th (MSB) bit of the 1st gRPC frame byte\n// denotes an uncompressed trailer (as part of the body)\nconst GRPC_WEB_TRAILERS_BIT: u8 = 0b10000000;\n\n#[derive(Copy, Clone, PartialEq, Debug)]\npub enum Direction {\n    Decode,\n    Encode,\n    Empty,\n}\n\n#[derive(Copy, Clone, PartialEq, Debug)]\npub enum Encoding {\n    Base64,\n    None,\n}\n\n/// HttpBody adapter for the grpc web based services.\n#[derive(Debug)]\n#[pin_project]\npub struct GrpcWebCall\u003cB\u003e {\n    #[pin]\n    inner: B,\n    buf: BytesMut,\n    decoded: BytesMut,\n    direction: Direction,\n    encoding: Encoding,\n    client: bool,\n    trailers: Option\u003cHeaderMap\u003e,\n}\n\nimpl\u003cB: Default\u003e Default for GrpcWebCall\u003cB\u003e {\n    fn default() -\u003e Self {\n        Self {\n            inner: Default::default(),\n            buf: Default::default(),\n            decoded: Default::default(),\n            direction: Direction::Empty,\n            encoding: Encoding::None,\n            client: Default::default(),\n            trailers: Default::default(),\n        }\n    }\n}\n\nimpl\u003cB\u003e GrpcWebCall\u003cB\u003e {\n    pub(crate) fn request(inner: B, encoding: Encoding) -\u003e Self {\n        Self::new(inner, Direction::Decode, encoding)\n    }\n\n    pub(crate) fn response(inner: B, encoding: Encoding) -\u003e Self {\n        Self::new(inner, Direction::Encode, encoding)\n    }\n\n    pub fn client_request(inner: B) -\u003e Self {\n        Self::new_client(inner, Direction::Encode, Encoding::None)\n    }\n\n    pub fn client_response(inner: B) -\u003e Self {\n        Self::new_client(inner, Direction::Decode, Encoding::None)\n    }\n\n    fn new_client(inner: B, direction: Direction, encoding: Encoding) -\u003e Self {\n        GrpcWebCall {\n            inner,\n            buf: BytesMut::with_capacity(match (direction, encoding) {\n                (Direction::Encode, Encoding::Base64) =\u003e BUFFER_SIZE,\n                _ =\u003e 0,\n            }),\n            decoded: BytesMut::with_capacity(match direction {\n                Direction::Decode =\u003e BUFFER_SIZE,\n                _ =\u003e 0,\n            }),\n            direction,\n            encoding,\n            client: true,\n            trailers: None,\n        }\n    }\n\n    pub fn new(inner: B, direction: Direction, encoding: Encoding) -\u003e Self {\n        GrpcWebCall {\n            inner,\n            buf: BytesMut::with_capacity(match (direction, encoding) {\n                (Direction::Encode, Encoding::Base64) =\u003e BUFFER_SIZE,\n                _ =\u003e 0,\n            }),\n            decoded: BytesMut::with_capacity(0),\n            direction,\n            encoding,\n            client: false,\n            trailers: None,\n        }\n    }\n\n    // This is to avoid passing a slice of bytes with a length that the base64\n    // decoder would consider invalid.\n    #[inline]\n    fn max_decodable(\u0026self) -\u003e usize {\n        (self.buf.len() / 4) * 4\n    }\n\n    fn decode_chunk(mut self: Pin\u003c\u0026mut Self\u003e) -\u003e Result\u003cOption\u003cBytes\u003e, Status\u003e {\n        // not enough bytes to decode\n        if self.buf.is_empty() || self.buf.len() \u003c 4 {\n            return Ok(None);\n        }\n\n        // Split `buf` at the largest index that is multiple of 4. Decode the\n        // returned `Bytes`, keeping the rest for the next attempt to decode.\n        let index = self.max_decodable();\n\n        crate::util::base64::STANDARD\n            .decode(self.as_mut().project().buf.split_to(index))\n            .map(|decoded| Some(Bytes::from(decoded)))\n            .map_err(internal_error)\n    }\n}\n\nimpl\u003cB\u003e GrpcWebCall\u003cB\u003e\nwhere\n    B: Body,\n    B::Data: Buf,\n    B::Error: fmt::Display,\n{\n    // Poll body for data, decoding (e.g. via Base64 if necessary) and returning frames\n    // to the caller. If the caller is a client, it should look for trailers before\n    // returning these frames.\n    fn poll_decode(\n        mut self: Pin\u003c\u0026mut Self\u003e,\n        cx: \u0026mut Context\u003c'_\u003e,\n    ) -\u003e Poll\u003cOption\u003cResult\u003cFrame\u003cBytes\u003e, Status\u003e\u003e\u003e {\n        match self.encoding {\n            Encoding::Base64 =\u003e loop {\n                //[ME] check if can decode a chunk from the existing buffer\n                // then return\n                if let Some(bytes) = self.as_mut().decode_chunk()? {\n                    return Poll::Ready(Some(Ok(Frame::data(bytes))));\n                }\n\n                let this = self.as_mut().project();\n\n                //[ME] this is where next frame come frome\n                match ready!(this.inner.poll_frame(cx)) {\n                    Some(Ok(frame)) if frame.is_data() =\u003e this\n                        .buf\n                        .put(frame.into_data().unwrap_or_else(|_| unreachable!())),\n                    Some(Ok(frame)) if frame.is_trailers() =\u003e {\n                        return Poll::Ready(Some(Err(internal_error(\n                            \"malformed base64 request has unencoded trailers\",\n                        ))));\n                    }\n                    Some(Ok(_)) =\u003e {\n                        return Poll::Ready(Some(Err(internal_error(\"unexpected frame type\"))));\n                    }\n                    Some(Err(e)) =\u003e return Poll::Ready(Some(Err(internal_error(e)))),\n                    None =\u003e {\n                        return if this.buf.has_remaining() {\n                            Poll::Ready(Some(Err(internal_error(\"malformed base64 request\"))))\n                        } else if let Some(trailers) = this.trailers.take() {\n                            //[ME] this one return trailer\n                            Poll::Ready(Some(Ok(Frame::trailers(trailers))))\n                        } else {\n                            Poll::Ready(None)\n                        };\n                    }\n                }\n            },\n\n            Encoding::None =\u003e self\n                .project()\n                .inner\n                .poll_frame(cx)\n                .map_ok(|f| f.map_data(|mut d| d.copy_to_bytes(d.remaining())))\n                .map_err(internal_error),\n        }\n    }\n\n    fn poll_encode(\n        mut self: Pin\u003c\u0026mut Self\u003e,\n        cx: \u0026mut Context\u003c'_\u003e,\n    ) -\u003e Poll\u003cOption\u003cResult\u003cFrame\u003cBytes\u003e, Status\u003e\u003e\u003e {\n        let this = self.as_mut().project();\n\n        match ready!(this.inner.poll_frame(cx)) {\n            Some(Ok(frame)) if frame.is_data() =\u003e {\n                let mut data = frame.into_data().unwrap_or_else(|_| unreachable!());\n                let mut res = data.copy_to_bytes(data.remaining());\n\n                if *this.encoding == Encoding::Base64 {\n                    res = crate::util::base64::STANDARD.encode(res).into();\n                }\n\n                Poll::Ready(Some(Ok(Frame::data(res))))\n            }\n            Some(Ok(frame)) if frame.is_trailers() =\u003e {\n                let trailers = frame.into_trailers().unwrap_or_else(|_| unreachable!());\n                let mut res = make_trailers_frame(trailers);\n\n                if *this.encoding == Encoding::Base64 {\n                    res = crate::util::base64::STANDARD.encode(res).into();\n                }\n\n                Poll::Ready(Some(Ok(Frame::data(res))))\n            }\n            Some(Ok(_)) =\u003e Poll::Ready(Some(Err(internal_error(\"unexpected frame type\")))),\n            Some(Err(e)) =\u003e Poll::Ready(Some(Err(internal_error(e)))),\n            None =\u003e Poll::Ready(None),\n        }\n    }\n}\n\nimpl\u003cB\u003e Body for GrpcWebCall\u003cB\u003e\nwhere\n    B: Body,\n    B::Error: fmt::Display,\n{\n    type Data = Bytes;\n    type Error = Status;\n\n    fn poll_frame(\n        mut self: Pin\u003c\u0026mut Self\u003e,\n        cx: \u0026mut Context\u003c'_\u003e,\n    ) -\u003e Poll\u003cOption\u003cResult\u003cFrame\u003cSelf::Data\u003e, Self::Error\u003e\u003e\u003e {\n        if self.client \u0026\u0026 self.direction == Direction::Decode {\n            let mut me = self.as_mut();\n\n            loop {\n                match ready!(me.as_mut().poll_decode(cx)) {\n                    Some(Ok(incoming_buf)) if incoming_buf.is_data() =\u003e {\n                        me.as_mut()\n                            .project()\n                            .decoded\n                            .put(incoming_buf.into_data().unwrap());\n                    }\n                    Some(Ok(incoming_buf)) if incoming_buf.is_trailers() =\u003e {\n                        let trailers = incoming_buf.into_trailers().unwrap();\n                        match me.as_mut().project().trailers {\n                            Some(current_trailers) =\u003e {\n                                current_trailers.extend(trailers);\n                            }\n                            None =\u003e {\n                                me.as_mut().project().trailers.replace(trailers);\n                            }\n                        }\n                        continue;\n                    }\n                    Some(Ok(_)) =\u003e unreachable!(\"unexpected frame type\"),\n                    None =\u003e {} // No more data to decode, time to look for trailers\n                    Some(Err(e)) =\u003e return Poll::Ready(Some(Err(e))),\n                };\n\n                // Hold the incoming, decoded data until we have a full message\n                // or trailers to return.\n                // [ME] this is the place we set the value for buf\n                // the decoded is use to find trailer\n                let buf = me.as_mut().project().decoded;\n\n                return match find_trailers(\u0026buf[..])? {\n                    FindTrailers::Trailer(len) =\u003e {\n                        // Extract up to len of where the trailers are at\n                        // [ME] we get len after recognize trailer\n                        let msg_buf = buf.copy_to_bytes(len);\n                        match decode_trailers_frame(buf.split().freeze()) {\n                            Ok(Some(trailers)) =\u003e {\n                                me.as_mut().project().trailers.replace(trailers);\n                            }\n                            Err(e) =\u003e return Poll::Ready(Some(Err(e))),\n                            _ =\u003e {}\n                        }\n\n                        if msg_buf.has_remaining() {\n                            Poll::Ready(Some(Ok(Frame::data(msg_buf))))\n                        } else if let Some(trailers) = me.as_mut().project().trailers.take() {\n                            Poll::Ready(Some(Ok(Frame::trailers(trailers))))\n                        } else {\n                            Poll::Ready(None)\n                        }\n                    }\n                    FindTrailers::IncompleteBuf =\u003e continue,\n                    FindTrailers::Done(len) =\u003e Poll::Ready(match len {\n                        0 =\u003e None,\n                        _ =\u003e Some(Ok(Frame::data(buf.split_to(len).freeze()))),\n                    }),\n                };\n            }\n        }\n\n        match self.direction {\n            Direction::Decode =\u003e self.poll_decode(cx),\n            Direction::Encode =\u003e self.poll_encode(cx),\n            Direction::Empty =\u003e Poll::Ready(None),\n        }\n    }\n\n    fn is_end_stream(\u0026self) -\u003e bool {\n        self.inner.is_end_stream()\n    }\n\n    fn size_hint(\u0026self) -\u003e SizeHint {\n        self.inner.size_hint()\n    }\n}\n\nimpl Encoding {\n    pub(crate) fn from_content_type(headers: \u0026HeaderMap) -\u003e Encoding {\n        Self::from_header(headers.get(header::CONTENT_TYPE))\n    }\n\n    pub(crate) fn from_accept(headers: \u0026HeaderMap) -\u003e Encoding {\n        Self::from_header(headers.get(header::ACCEPT))\n    }\n\n    pub(crate) fn to_content_type(self) -\u003e \u0026'static str {\n        match self {\n            Encoding::Base64 =\u003e GRPC_WEB_TEXT_PROTO,\n            Encoding::None =\u003e GRPC_WEB_PROTO,\n        }\n    }\n\n    fn from_header(value: Option\u003c\u0026HeaderValue\u003e) -\u003e Encoding {\n        match value.and_then(|val| val.to_str().ok()) {\n            Some(GRPC_WEB_TEXT_PROTO) | Some(GRPC_WEB_TEXT) =\u003e Encoding::Base64,\n            _ =\u003e Encoding::None,\n        }\n    }\n}\n\nfn internal_error(e: impl std::fmt::Display) -\u003e Status {\n    Status::internal(format!(\"tonic-web: {e}\"))\n}\n\n// Key-value pairs encoded as a HTTP/1 headers block (without the terminating newline)\nfn encode_trailers(trailers: HeaderMap) -\u003e Vec\u003cu8\u003e {\n    trailers.iter().fold(Vec::new(), |mut acc, (key, value)| {\n        acc.put_slice(key.as_ref());\n        acc.push(b':');\n        acc.put_slice(value.as_bytes());\n        acc.put_slice(b\"\\r\\n\");\n        acc\n    })\n}\n\nfn decode_trailers_frame(mut buf: Bytes) -\u003e Result\u003cOption\u003cHeaderMap\u003e, Status\u003e {\n    if buf.remaining() \u003c GRPC_HEADER_SIZE {\n        return Ok(None);\n    }\n\n    buf.get_u8();\n    buf.get_u32();\n\n    let mut map = HeaderMap::new();\n    let mut temp_buf = buf.clone();\n\n    let mut trailers = Vec::new();\n    let mut cursor_pos = 0;\n\n    for (i, b) in buf.iter().enumerate() {\n        // if we are at a trailer delimiter (\\r\\n)\n        if b == \u0026b'\\r' \u0026\u0026 buf.get(i + 1) == Some(\u0026b'\\n') {\n            // read the bytes of the trailer passed so far\n            let trailer = temp_buf.copy_to_bytes(i - cursor_pos);\n            // increment cursor beyond the delimiter\n            cursor_pos = i + 2;\n            trailers.push(trailer);\n            if temp_buf.has_remaining() {\n                // advance buf beyond the delimiters\n                temp_buf.get_u8();\n                temp_buf.get_u8();\n            }\n        }\n    }\n\n    for trailer in trailers {\n        let mut s = trailer.split(|b| b == \u0026b':');\n        let key = s\n            .next()\n            .ok_or_else(|| Status::internal(\"trailers couldn't parse key\"))?;\n        let value = s\n            .next()\n            .ok_or_else(|| Status::internal(\"trailers couldn't parse value\"))?;\n\n        let value = value\n            .split(|b| b == \u0026b'\\r')\n            .next()\n            .ok_or_else(|| Status::internal(\"trailers was not escaped\"))?\n            .strip_prefix(b\" \")\n            .unwrap_or(value);\n\n        let header_key = HeaderName::try_from(key)\n            .map_err(|e| Status::internal(format!(\"Unable to parse HeaderName: {e}\")))?;\n        let header_value = HeaderValue::try_from(value)\n            .map_err(|e| Status::internal(format!(\"Unable to parse HeaderValue: {e}\")))?;\n        map.insert(header_key, header_value);\n    }\n\n    Ok(Some(map))\n}\n\nfn make_trailers_frame(trailers: HeaderMap) -\u003e Bytes {\n    let trailers = encode_trailers(trailers);\n    let len = trailers.len();\n    assert!(len \u003c= u32::MAX as usize);\n\n    let mut frame = BytesMut::with_capacity(len + FRAME_HEADER_SIZE);\n    frame.put_u8(GRPC_WEB_TRAILERS_BIT);\n    frame.put_u32(len as u32);\n    frame.put_slice(\u0026trailers);\n\n    frame.freeze()\n}\n\n/// Search some buffer for grpc-web trailers headers and return\n/// its location in the original buf. If `None` is returned we did\n/// not find a trailers in this buffer either because its incomplete\n/// or the buffer just contained grpc message frames.\nfn find_trailers(buf: \u0026[u8]) -\u003e Result\u003cFindTrailers, Status\u003e {\n    let mut len = 0;\n    let mut temp_buf = buf;\n\n    loop {\n        // To check each frame, there must be at least GRPC_HEADER_SIZE\n        // amount of bytes available otherwise the buffer is incomplete.\n        if temp_buf.is_empty() || temp_buf.len() \u003c GRPC_HEADER_SIZE {\n            return Ok(FindTrailers::Done(len));\n        }\n\n        let header = temp_buf.get_u8();\n\n        if header == GRPC_WEB_TRAILERS_BIT {\n            return Ok(FindTrailers::Trailer(len));\n        }\n\n        if !(header == 0 || header == 1) {\n            return Err(Status::internal(format!(\n                \"Invalid header bit {header} expected 0 or 1\"\n            )));\n        }\n\n        let msg_len = temp_buf.get_u32();\n\n        len += msg_len as usize + 4 + 1;\n\n        // If the msg len of a non-grpc-web trailer frame is larger than\n        // the overall buffer we know within that buffer there are no trailers.\n        if len \u003e buf.len() {\n            return Ok(FindTrailers::IncompleteBuf);\n        }\n\n        temp_buf = \u0026buf[len..];\n    }\n}\n\n#[derive(Debug, PartialEq, Eq)]\nenum FindTrailers {\n    Trailer(usize),\n    IncompleteBuf,\n    Done(usize),\n}\n\n#[cfg(test)]\nmod tests {\n    use crate::status::Code;\n\n    use super::*;\n\n    #[test]\n    fn encoding_constructors() {\n        let cases = \u0026[\n            (GRPC_WEB, Encoding::None),\n            (GRPC_WEB_PROTO, Encoding::None),\n            (GRPC_WEB_TEXT, Encoding::Base64),\n            (GRPC_WEB_TEXT_PROTO, Encoding::Base64),\n            (\"foo\", Encoding::None),\n        ];\n\n        let mut headers = HeaderMap::new();\n\n        for case in cases {\n            headers.insert(header::CONTENT_TYPE, case.0.parse().unwrap());\n            headers.insert(header::ACCEPT, case.0.parse().unwrap());\n\n            assert_eq!(Encoding::from_content_type(\u0026headers), case.1, \"{}\", case.0);\n            assert_eq!(Encoding::from_accept(\u0026headers), case.1, \"{}\", case.0);\n        }\n    }\n\n    #[test]\n    fn decode_trailers() {\n        let mut headers = HeaderMap::new();\n        headers.insert(Status::GRPC_STATUS, 0.into());\n        headers.insert(\n            Status::GRPC_MESSAGE,\n            \"this is a message\".try_into().unwrap(),\n        );\n\n        let trailers = make_trailers_frame(headers.clone());\n\n        let map = decode_trailers_frame(trailers).unwrap().unwrap();\n\n        assert_eq!(headers, map);\n    }\n\n    #[test]\n    fn find_trailers_non_buffered() {\n        // Byte version of this:\n        // b\"\\x80\\0\\0\\0\\x0fgrpc-status:0\\r\\n\"\n        let buf = [\n            128, 0, 0, 0, 15, 103, 114, 112, 99, 45, 115, 116, 97, 116, 117, 115, 58, 48, 13, 10,\n        ];\n\n        let out = find_trailers(\u0026buf[..]).unwrap();\n\n        assert_eq!(out, FindTrailers::Trailer(0));\n    }\n\n    #[test]\n    fn find_trailers_buffered() {\n        // Byte version of this:\n        // b\"\\0\\0\\0\\0L\\n$975738af-1a17-4aea-b887-ed0bbced6093\\x1a$da609e9b-f470-4cc0-a691-3fd6a005a436\\x80\\0\\0\\0\\x0fgrpc-status:0\\r\\n\"\n        let buf = [\n            0, 0, 0, 0, 76, 10, 36, 57, 55, 53, 55, 51, 56, 97, 102, 45, 49, 97, 49, 55, 45, 52,\n            97, 101, 97, 45, 98, 56, 56, 55, 45, 101, 100, 48, 98, 98, 99, 101, 100, 54, 48, 57,\n            51, 26, 36, 100, 97, 54, 48, 57, 101, 57, 98, 45, 102, 52, 55, 48, 45, 52, 99, 99, 48,\n            45, 97, 54, 57, 49, 45, 51, 102, 100, 54, 97, 48, 48, 53, 97, 52, 51, 54, 128, 0, 0, 0,\n            15, 103, 114, 112, 99, 45, 115, 116, 97, 116, 117, 115, 58, 48, 13, 10,\n        ];\n\n        let out = find_trailers(\u0026buf[..]).unwrap();\n\n        assert_eq!(out, FindTrailers::Trailer(81));\n\n        let trailers = decode_trailers_frame(Bytes::copy_from_slice(\u0026buf[81..]))\n            .unwrap()\n            .unwrap();\n        let status = trailers.get(Status::GRPC_STATUS).unwrap();\n        assert_eq!(status.to_str().unwrap(), \"0\")\n    }\n\n    #[test]\n    fn find_trailers_buffered_incomplete_message() {\n        let buf = vec![\n            0, 0, 0, 9, 238, 10, 233, 19, 18, 230, 19, 10, 9, 10, 1, 120, 26, 4, 84, 69, 88, 84,\n            18, 60, 10, 58, 10, 56, 3, 0, 0, 0, 44, 0, 0, 0, 0, 0, 0, 0, 116, 104, 105, 115, 32,\n            118, 97, 108, 117, 101, 32, 119, 97, 115, 32, 119, 114, 105, 116, 116, 101, 110, 32,\n            118, 105, 97, 32, 119, 114, 105, 116, 101, 32, 100, 101, 108, 101, 103, 97, 116, 105,\n            111, 110, 33, 18, 62, 10, 60, 10, 58, 3, 0, 0, 0, 46, 0, 0, 0, 0, 0, 0, 0, 116, 104,\n            105, 115, 32, 118, 97, 108, 117, 101, 32, 119, 97, 115, 32, 119, 114, 105, 116, 116,\n            101, 110, 32, 98, 121, 32, 97, 110, 32, 101, 109, 98, 101, 100, 100, 101, 100, 32, 114,\n            101, 112, 108, 105, 99, 97, 33, 18, 62, 10, 60, 10, 58, 3, 0, 0, 0, 46, 0, 0, 0, 0, 0,\n            0, 0, 116, 104, 105, 115, 32, 118, 97, 108, 117, 101, 32, 119, 97, 115, 32, 119, 114,\n            105, 116, 116, 101, 110, 32, 98, 121, 32, 97, 110, 32, 101, 109, 98, 101, 100, 100,\n            101, 100, 32, 114, 101, 112, 108, 105, 99, 97, 33, 18, 62, 10, 60, 10, 58, 3, 0, 0, 0,\n            46, 0, 0, 0, 0, 0, 0, 0, 116, 104, 105, 115, 32, 118, 97, 108, 117, 101, 32, 119, 97,\n            115, 32, 119, 114, 105, 116, 116, 101, 110, 32, 98, 121, 32, 97, 110, 32, 101, 109, 98,\n            101, 100, 100, 101, 100, 32, 114, 101, 112, 108, 105, 99, 97, 33, 18, 62, 10, 60, 10,\n            58, 3, 0, 0, 0, 46, 0, 0, 0, 0, 0, 0, 0, 116, 104, 105, 115, 32, 118, 97, 108, 117,\n            101, 32, 119, 97, 115, 32, 119, 114, 105, 116, 116, 101, 110, 32, 98, 121, 32, 97, 110,\n            32, 101, 109, 98, 101, 100, 100, 101, 100, 32, 114, 101, 112, 108, 105, 99, 97, 33, 18,\n            62, 10, 60, 10, 58, 3, 0, 0, 0, 46, 0, 0, 0, 0, 0, 0, 0, 116, 104, 105, 115, 32, 118,\n            97, 108, 117, 101, 32, 119, 97, 115, 32, 119, 114, 105, 116, 116, 101, 110, 32, 98,\n            121, 32, 97, 110, 32, 101, 109, 98, 101, 100, 100, 101, 100, 32, 114, 101, 112, 108,\n            105, 99, 97, 33, 18, 62, 10, 60, 10, 58, 3, 0, 0, 0, 46, 0, 0, 0, 0, 0, 0, 0, 116, 104,\n            105, 115, 32, 118, 97, 108, 117, 101, 32, 119, 97, 115, 32, 119, 114, 105, 116, 116,\n            101, 110, 32, 98, 121, 32, 97, 110, 32, 101, 109, 98, 101, 100, 100, 101, 100, 32, 114,\n            101, 112, 108, 105, 99, 97, 33, 18, 62, 10, 60, 10, 58, 3, 0, 0, 0, 46, 0, 0, 0, 0, 0,\n            0, 0, 116, 104, 105, 115, 32, 118, 97, 108, 117, 101, 32, 119, 97, 115, 32, 119, 114,\n            105, 116, 116, 101, 110, 32, 98, 121, 32,\n        ];\n\n        let out = find_trailers(\u0026buf[..]).unwrap();\n\n        assert_eq!(out, FindTrailers::IncompleteBuf);\n    }\n\n    #[test]\n    #[ignore]\n    fn find_trailers_buffered_incomplete_buf_bug() {\n        let buf = std::fs::read(\"tests/incomplete-buf-bug.bin\").unwrap();\n        let out = find_trailers(\u0026buf[..]).unwrap_err();\n\n        assert_eq!(out.code(), Code::Internal);\n    }\n\n    #[test]\n    fn decode_multiple_trailers() {\n        let buf = b\"\\x80\\0\\0\\0\\x0fgrpc-status:0\\r\\ngrpc-message:\\r\\na:1\\r\\nb:2\\r\\n\";\n\n        let trailers = decode_trailers_frame(Bytes::copy_from_slice(\u0026buf[..]))\n            .unwrap()\n            .unwrap();\n\n        let mut expected = HeaderMap::new();\n        expected.insert(Status::GRPC_STATUS, \"0\".parse().unwrap());\n        expected.insert(Status::GRPC_MESSAGE, \"\".parse().unwrap());\n        expected.insert(\"a\", \"1\".parse().unwrap());\n        expected.insert(\"b\", \"2\".parse().unwrap());\n\n        assert_eq!(trailers, expected);\n    }\n\n    #[test]\n    fn decode_trailers_with_space_after_colon() {\n        let buf = b\"\\x80\\0\\0\\0\\x0fgrpc-status: 0\\r\\ngrpc-message: \\r\\n\";\n\n        let trailers = decode_trailers_frame(Bytes::copy_from_slice(\u0026buf[..]))\n            .unwrap()\n            .unwrap();\n\n        let mut expected = HeaderMap::new();\n        expected.insert(Status::GRPC_STATUS, \"0\".parse().unwrap());\n        expected.insert(Status::GRPC_MESSAGE, \"\".parse().unwrap());\n\n        assert_eq!(trailers, expected);\n    }\n}\n","traces":[{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":190,"address":[],"length":0,"stats":{"Line":0}},{"line":191,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":205,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":215,"address":[],"length":0,"stats":{"Line":0}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":226,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":239,"address":[],"length":0,"stats":{"Line":0}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":241,"address":[],"length":0,"stats":{"Line":0}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":275,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[],"length":0,"stats":{"Line":0}},{"line":279,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":289,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":303,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":311,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":334,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":339,"address":[],"length":0,"stats":{"Line":0}},{"line":340,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":5}},{"line":350,"address":[],"length":0,"stats":{"Line":20}},{"line":353,"address":[],"length":0,"stats":{"Line":5}},{"line":354,"address":[],"length":0,"stats":{"Line":20}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":358,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":360,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":10}},{"line":365,"address":[],"length":0,"stats":{"Line":50}},{"line":366,"address":[],"length":0,"stats":{"Line":22}},{"line":367,"address":[],"length":0,"stats":{"Line":6}},{"line":372,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":1}},{"line":378,"address":[],"length":0,"stats":{"Line":6}},{"line":379,"address":[],"length":0,"stats":{"Line":6}},{"line":380,"address":[],"length":0,"stats":{"Line":4}},{"line":381,"address":[],"length":0,"stats":{"Line":6}},{"line":382,"address":[],"length":0,"stats":{"Line":6}},{"line":383,"address":[],"length":0,"stats":{"Line":2}},{"line":387,"address":[],"length":0,"stats":{"Line":4}},{"line":388,"address":[],"length":0,"stats":{"Line":4}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":8}},{"line":393,"address":[],"length":0,"stats":{"Line":8}},{"line":395,"address":[],"length":0,"stats":{"Line":8}},{"line":396,"address":[],"length":0,"stats":{"Line":12}},{"line":398,"address":[],"length":0,"stats":{"Line":8}},{"line":399,"address":[],"length":0,"stats":{"Line":8}},{"line":401,"address":[],"length":0,"stats":{"Line":276}},{"line":403,"address":[],"length":0,"stats":{"Line":152}},{"line":405,"address":[],"length":0,"stats":{"Line":36}},{"line":407,"address":[],"length":0,"stats":{"Line":9}},{"line":408,"address":[],"length":0,"stats":{"Line":27}},{"line":409,"address":[],"length":0,"stats":{"Line":27}},{"line":411,"address":[],"length":0,"stats":{"Line":27}},{"line":412,"address":[],"length":0,"stats":{"Line":9}},{"line":417,"address":[],"length":0,"stats":{"Line":22}},{"line":418,"address":[],"length":0,"stats":{"Line":259}},{"line":419,"address":[],"length":0,"stats":{"Line":18}},{"line":421,"address":[],"length":0,"stats":{"Line":9}},{"line":422,"address":[],"length":0,"stats":{"Line":18}},{"line":424,"address":[],"length":0,"stats":{"Line":9}},{"line":426,"address":[],"length":0,"stats":{"Line":18}},{"line":427,"address":[],"length":0,"stats":{"Line":59}},{"line":429,"address":[],"length":0,"stats":{"Line":9}},{"line":431,"address":[],"length":0,"stats":{"Line":18}},{"line":433,"address":[],"length":0,"stats":{"Line":27}},{"line":434,"address":[],"length":0,"stats":{"Line":9}},{"line":435,"address":[],"length":0,"stats":{"Line":27}},{"line":436,"address":[],"length":0,"stats":{"Line":9}},{"line":437,"address":[],"length":0,"stats":{"Line":36}},{"line":440,"address":[],"length":0,"stats":{"Line":4}},{"line":443,"address":[],"length":0,"stats":{"Line":1}},{"line":444,"address":[],"length":0,"stats":{"Line":3}},{"line":445,"address":[],"length":0,"stats":{"Line":3}},{"line":446,"address":[],"length":0,"stats":{"Line":2}},{"line":448,"address":[],"length":0,"stats":{"Line":3}},{"line":449,"address":[],"length":0,"stats":{"Line":2}},{"line":450,"address":[],"length":0,"stats":{"Line":3}},{"line":451,"address":[],"length":0,"stats":{"Line":3}},{"line":453,"address":[],"length":0,"stats":{"Line":2}},{"line":460,"address":[],"length":0,"stats":{"Line":3}},{"line":461,"address":[],"length":0,"stats":{"Line":6}},{"line":462,"address":[],"length":0,"stats":{"Line":6}},{"line":467,"address":[],"length":0,"stats":{"Line":12}},{"line":468,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":12}},{"line":473,"address":[],"length":0,"stats":{"Line":4}},{"line":474,"address":[],"length":0,"stats":{"Line":2}},{"line":477,"address":[],"length":0,"stats":{"Line":2}},{"line":478,"address":[],"length":0,"stats":{"Line":0}},{"line":479,"address":[],"length":0,"stats":{"Line":0}},{"line":483,"address":[],"length":0,"stats":{"Line":6}},{"line":485,"address":[],"length":0,"stats":{"Line":2}},{"line":489,"address":[],"length":0,"stats":{"Line":4}},{"line":490,"address":[],"length":0,"stats":{"Line":1}},{"line":493,"address":[],"length":0,"stats":{"Line":1}}],"covered":69,"coverable":207},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","grpcweb","grpc_header.rs"],"content":"// use clap::Parser;\n// use http::HeaderValue;\n// use http::Uri;\n// use http::uri::Authority;\n// use http_body_util::BodyExt;\n// use http_body_util::Full;\n// use hyper::body::Bytes;\n// use hyper::body::Incoming;\n// use hyper::{Request, Response};\n// use tower::BoxError;\n// use tower::Service;\n//\n// use crate::grpcweb::args::Args;\n// use crate::grpcweb::call::GrpcWebCall;\n//\n// #[derive(Debug, Clone)]\n// pub struct GrpcHeader\u003cS\u003e {\n//     inner: S,\n// }\n// impl\u003cS\u003e GrpcHeader\u003cS\u003e {\n//     pub fn new(inner: S) -\u003e Self {\n//         GrpcHeader { inner }\n//     }\n// }\n//\n// impl\u003cS\u003e Service\u003cRequest\u003cIncoming\u003e\u003e for GrpcHeader\u003cS\u003e\n// where\n//     S: Service\u003c\n//             Request\u003cGrpcWebCall\u003cFull\u003cBytes\u003e\u003e\u003e,\n//             // Response = Response\u003cGrpcWebCall\u003cFull\u003cBytes\u003e\u003e\u003e,\n//             // Response = Response\u003cIncoming\u003e,\n//             Response = Response\u003cGrpcWebCall\u003cFull\u003cBytes\u003e\u003e\u003e,\n//             Error = BoxError,\n//         \u003e + Clone,\n//     // S: Service\u003cRequest\u003cBody\u003e, Response = Response\u003cBody\u003e, Error = BoxError\u003e + Clone,\n// {\n//     type Response = S::Response;\n//     type Error = S::Error;\n//     type Future = impl Future\u003cOutput = Result\u003cSelf::Response, Self::Error\u003e\u003e;\n//\n//     fn poll_ready(\n//         \u0026mut self,\n//         cx: \u0026mut std::task::Context\u003c'_\u003e,\n//     ) -\u003e std::task::Poll\u003cResult\u003c(), Self::Error\u003e\u003e {\n//         self.inner.poll_ready(cx)\n//     }\n//\n//     fn call(\u0026mut self, req: Request\u003cIncoming\u003e) -\u003e Self::Future {\n//         // if (is_upgrade_request(\u0026req)) {\n//         //     let (res, ws) = upgrade(req, None).unwrap();\n//         //     return Ok(res);\n//         // }\n//         let mut inner = self.inner.clone();\n//         let (mut parts, res_body) = req.into_parts();\n//         let args = Args::parse();\n//         // let authority = format!(\"\", args.forward_host, args.forward_port);\n//         let authority = format!(\"{}:{}\", args.forward_host, args.forward_port);\n//         let authority = Authority::from_maybe_shared(authority).unwrap();\n//         // this will resplace\n//\n//         let path = parts.uri.path();\n//         let url = format!(\"http://{}{}\", authority.as_ref(), path);\n//\n//         parts.uri = Uri::from(url.parse::\u003cUri\u003e().unwrap());\n//         println!(\"Forward URL: {}\", parts.uri);\n//         println!(\"Authority: {}\", authority);\n//\n//         async move {\n//             let res_body = res_body.collect().await?;\n//             let mut req = Request::from_parts(\n//                 parts,\n//                 GrpcWebCall::client_request(Full::\u003cBytes\u003e::new(res_body.to_bytes())),\n//             );\n//\n//             req.headers_mut().insert(\n//                 hyper::header::CONTENT_TYPE,\n//                 HeaderValue::from_static(\"application/grpc\"),\n//             );\n//\n//             req.headers_mut().remove(hyper::header::CONTENT_LENGTH);\n//\n//             req.headers_mut()\n//                 .insert(hyper::header::HOST, authority.as_str().parse()?);\n//             // let body = GrpcWebCall::client_request(req.body());\n//             // let req = Request::from_parts(parts, body);\n//             let res = inner.call(req).await;\n//             res\n//         }\n//     }\n// }\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","grpcweb","mod.rs"],"content":"pub mod args;\npub mod call;\npub mod grpc_header;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","main.rs"],"content":"use bytes::Bytes;\nuse clap::Parser;\nuse http::uri::Authority;\nuse http::{HeaderValue, Uri};\nuse http_body_util::{BodyExt, Full};\nuse hyper::body::Incoming;\nuse hyper::client::conn::http2;\nuse hyper::server::conn::http1;\nuse hyper::{Request, Response};\nuse hyper_util::rt::{TokioExecutor, TokioIo};\nuse hyper_util::service::TowerToHyperService;\nuse tokio::net::{TcpListener, TcpStream};\nuse tower::BoxError;\n\nuse crate::grpcweb::args::Args;\nuse crate::grpcweb::call::GrpcWebCall;\n\npub mod grpcweb;\npub mod metadata;\npub mod status;\npub mod util;\n\nasync fn forward(req: Request\u003cIncoming\u003e) -\u003e Result\u003cResponse\u003cGrpcWebCall\u003cFull\u003cBytes\u003e\u003e\u003e, BoxError\u003e {\n    //[START] switch endpoint\n    let (mut parts, res_body) = req.into_parts();\n    let args = Args::parse();\n    // let authority = format!(\"\", args.forward_host, args.forward_port);\n    let authority = format!(\"{}:{}\", args.forward_host, args.forward_port);\n    let authority = Authority::from_maybe_shared(authority).unwrap();\n    // this will resplace\n\n    let path = parts.uri.path();\n    let url = format!(\"http://{}{}\", authority.as_ref(), path);\n\n    parts.uri = Uri::from(url.parse::\u003cUri\u003e().unwrap());\n    println!(\"Forward URL: {}\", parts.uri);\n    println!(\"Authority: {}\", authority);\n\n    //[END] switch endpoint\n\n    //[START] Convert to new request\n    let res_body = res_body.collect().await?;\n    let mut req = Request::from_parts(\n        parts,\n        GrpcWebCall::client_request(Full::\u003cBytes\u003e::new(res_body.to_bytes())),\n    );\n\n    req.headers_mut().insert(\n        hyper::header::CONTENT_TYPE,\n        HeaderValue::from_static(\"application/grpc\"),\n    );\n\n    req.headers_mut().remove(hyper::header::CONTENT_LENGTH);\n\n    req.headers_mut()\n        .insert(hyper::header::HOST, authority.as_str().parse()?);\n    //[END]Convert to new request\n\n    let authority = authority.to_string();\n\n    let stream = TcpStream::connect(authority).await?;\n    let io = TokioIo::new(stream);\n\n    let exec = TokioExecutor::new();\n    let (mut sender, conn) = http2::Builder::new(exec).handshake(io).await?;\n\n    // Spawn a task to poll the connection, driving the HTTP state\n    tokio::task::spawn(async move {\n        if let Err(err) = conn.await {\n            println!(\"Connection failed: {:?}\", err);\n        }\n    });\n    let res = sender.send_request(req).await?;\n    let (parts, body) = res.into_parts();\n    let body = body.collect().await?;\n\n    let res = Response::from_parts(\n        parts,\n        GrpcWebCall::client_response(Full::\u003cBytes\u003e::from(body.to_bytes())),\n    );\n    Ok(res)\n}\n#[tokio::main]\nasync fn main() -\u003e Result\u003c(), BoxError\u003e {\n    let args = Args::parse();\n    let address = format!(\"{}:{}\", args.proxy_host, args.proxy_port);\n    let listener = TcpListener::bind(address).await?;\n\n    loop {\n        let (stream, _) = listener.accept().await?;\n        let io = TokioIo::new(stream);\n        tokio::task::spawn(async move {\n            let svc = tower::service_fn(forward);\n            // let svc = ServiceBuilder::new().layer_fn(GrpcHeader::new).service(svc);\n            let svc = TowerToHyperService::new(svc);\n            if let Err(err) = http1::Builder::new().serve_connection(io, svc).await {\n                eprintln!(\"Error serving connection: {:?}\", err);\n            }\n        });\n    }\n}\n","traces":[{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":45},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","metadata","encoding.rs"],"content":"use base64::Engine as _;\nuse bytes::Bytes;\nuse http::header::HeaderValue;\nuse std::error::Error;\nuse std::fmt;\nuse std::hash::Hash;\n\n/// A possible error when converting a `MetadataValue` from a string or byte\n/// slice.\n#[derive(Debug, Hash)]\npub struct InvalidMetadataValue {\n    _priv: (),\n}\n\nmod value_encoding {\n    use super::InvalidMetadataValueBytes;\n    use bytes::Bytes;\n    use http::header::HeaderValue;\n    use std::fmt;\n\n    pub trait Sealed {\n        #[doc(hidden)]\n        fn is_empty(value: \u0026[u8]) -\u003e bool;\n\n        #[doc(hidden)]\n        fn from_bytes(value: \u0026[u8]) -\u003e Result\u003cHeaderValue, InvalidMetadataValueBytes\u003e;\n\n        #[doc(hidden)]\n        fn from_shared(value: Bytes) -\u003e Result\u003cHeaderValue, InvalidMetadataValueBytes\u003e;\n\n        #[doc(hidden)]\n        fn from_static(value: \u0026'static str) -\u003e HeaderValue;\n\n        #[doc(hidden)]\n        fn decode(value: \u0026[u8]) -\u003e Result\u003cBytes, InvalidMetadataValueBytes\u003e;\n\n        #[doc(hidden)]\n        fn equals(a: \u0026HeaderValue, b: \u0026[u8]) -\u003e bool;\n\n        #[doc(hidden)]\n        fn values_equal(a: \u0026HeaderValue, b: \u0026HeaderValue) -\u003e bool;\n\n        #[doc(hidden)]\n        fn fmt(value: \u0026HeaderValue, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result;\n    }\n}\n\npub trait ValueEncoding: Clone + Eq + PartialEq + Hash + self::value_encoding::Sealed {\n    /// Returns true if the provided key is valid for this ValueEncoding type.\n    /// For example, `Ascii::is_valid_key(\"a\") == true`,\n    /// `Ascii::is_valid_key(\"a-bin\") == false`.\n    fn is_valid_key(key: \u0026str) -\u003e bool;\n}\n\n/// gRPC metadata values can be either ASCII strings or binary. Note that only\n/// visible ASCII characters (32-127) are permitted.\n/// This type should never be instantiated -- in fact, it's impossible\n/// to, because there's no variants to instantiate. Instead, it's just used as\n/// a type parameter for [`MetadataKey`] and [`MetadataValue`].\n///\n/// [`MetadataKey`]: struct.MetadataKey.html\n/// [`MetadataValue`]: struct.MetadataValue.html\n#[derive(Clone, Debug, Eq, PartialEq, Hash)]\n#[non_exhaustive]\npub enum Ascii {}\n\n/// gRPC metadata values can be either ASCII strings or binary.\n/// This type should never be instantiated -- in fact, it's impossible\n/// to, because there's no variants to instantiate. Instead, it's just used as\n/// a type parameter for [`MetadataKey`] and [`MetadataValue`].\n///\n/// [`MetadataKey`]: struct.MetadataKey.html\n/// [`MetadataValue`]: struct.MetadataValue.html\n#[derive(Clone, Debug, Eq, PartialEq, Hash)]\n#[non_exhaustive]\npub enum Binary {}\n\n// ===== impl ValueEncoding =====\n\nimpl self::value_encoding::Sealed for Ascii {\n    fn is_empty(value: \u0026[u8]) -\u003e bool {\n        value.is_empty()\n    }\n\n    fn from_bytes(value: \u0026[u8]) -\u003e Result\u003cHeaderValue, InvalidMetadataValueBytes\u003e {\n        HeaderValue::from_bytes(value).map_err(|_| InvalidMetadataValueBytes::new())\n    }\n\n    fn from_shared(value: Bytes) -\u003e Result\u003cHeaderValue, InvalidMetadataValueBytes\u003e {\n        HeaderValue::from_maybe_shared(value).map_err(|_| InvalidMetadataValueBytes::new())\n    }\n\n    fn from_static(value: \u0026'static str) -\u003e HeaderValue {\n        HeaderValue::from_static(value)\n    }\n\n    fn decode(value: \u0026[u8]) -\u003e Result\u003cBytes, InvalidMetadataValueBytes\u003e {\n        Ok(Bytes::copy_from_slice(value))\n    }\n\n    fn equals(a: \u0026HeaderValue, b: \u0026[u8]) -\u003e bool {\n        a.as_bytes() == b\n    }\n\n    fn values_equal(a: \u0026HeaderValue, b: \u0026HeaderValue) -\u003e bool {\n        a == b\n    }\n\n    fn fmt(value: \u0026HeaderValue, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        fmt::Debug::fmt(value, f)\n    }\n}\n\nimpl ValueEncoding for Ascii {\n    fn is_valid_key(key: \u0026str) -\u003e bool {\n        !Binary::is_valid_key(key)\n    }\n}\n\nimpl self::value_encoding::Sealed for Binary {\n    fn is_empty(value: \u0026[u8]) -\u003e bool {\n        for c in value {\n            if *c != b'=' {\n                return false;\n            }\n        }\n        true\n    }\n\n    fn from_bytes(value: \u0026[u8]) -\u003e Result\u003cHeaderValue, InvalidMetadataValueBytes\u003e {\n        let encoded_value: String = crate::util::base64::STANDARD_NO_PAD.encode(value);\n        HeaderValue::from_maybe_shared(Bytes::from(encoded_value))\n            .map_err(|_| InvalidMetadataValueBytes::new())\n    }\n\n    fn from_shared(value: Bytes) -\u003e Result\u003cHeaderValue, InvalidMetadataValueBytes\u003e {\n        Self::from_bytes(value.as_ref())\n    }\n\n    fn from_static(value: \u0026'static str) -\u003e HeaderValue {\n        if crate::util::base64::STANDARD.decode(value).is_err() {\n            panic!(\"Invalid base64 passed to from_static: {value}\");\n        }\n        unsafe {\n            // Because this is valid base64 this must be a valid HTTP header value,\n            // no need to check again by calling from_shared.\n            HeaderValue::from_maybe_shared_unchecked(Bytes::from_static(value.as_ref()))\n        }\n    }\n\n    fn decode(value: \u0026[u8]) -\u003e Result\u003cBytes, InvalidMetadataValueBytes\u003e {\n        crate::util::base64::STANDARD\n            .decode(value)\n            .map(|bytes_vec| bytes_vec.into())\n            .map_err(|_| InvalidMetadataValueBytes::new())\n    }\n\n    fn equals(a: \u0026HeaderValue, b: \u0026[u8]) -\u003e bool {\n        if let Ok(decoded) = crate::util::base64::STANDARD.decode(a.as_bytes()) {\n            decoded == b\n        } else {\n            a.as_bytes() == b\n        }\n    }\n\n    fn values_equal(a: \u0026HeaderValue, b: \u0026HeaderValue) -\u003e bool {\n        match (Self::decode(a.as_bytes()), Self::decode(b.as_bytes())) {\n            (Ok(a), Ok(b)) =\u003e a == b,\n            (Err(_), Err(_)) =\u003e true,\n            _ =\u003e false,\n        }\n    }\n\n    fn fmt(value: \u0026HeaderValue, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        if let Ok(decoded) = Self::decode(value.as_bytes()) {\n            write!(f, \"{decoded:?}\")\n        } else {\n            write!(f, \"b[invalid]{value:?}\")\n        }\n    }\n}\n\nimpl ValueEncoding for Binary {\n    fn is_valid_key(key: \u0026str) -\u003e bool {\n        key.ends_with(\"-bin\")\n    }\n}\n\n// ===== impl InvalidMetadataValue =====\n\nimpl InvalidMetadataValue {\n    pub(crate) fn new() -\u003e Self {\n        InvalidMetadataValue { _priv: () }\n    }\n}\n\nimpl fmt::Display for InvalidMetadataValue {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        f.write_str(\"failed to parse metadata value\")\n    }\n}\n\nimpl Error for InvalidMetadataValue {}\n\n/// A possible error when converting a `MetadataValue` from a string or byte\n/// slice.\n#[derive(Debug, Hash)]\npub struct InvalidMetadataValueBytes(InvalidMetadataValue);\n\n// ===== impl InvalidMetadataValueBytes =====\n\nimpl InvalidMetadataValueBytes {\n    pub(crate) fn new() -\u003e Self {\n        InvalidMetadataValueBytes(InvalidMetadataValue::new())\n    }\n}\n\nimpl fmt::Display for InvalidMetadataValueBytes {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        self.0.fmt(f)\n    }\n}\n\nimpl Error for InvalidMetadataValueBytes {}\n","traces":[{"line":81,"address":[],"length":0,"stats":{"Line":5}},{"line":82,"address":[],"length":0,"stats":{"Line":10}},{"line":85,"address":[],"length":0,"stats":{"Line":4}},{"line":86,"address":[],"length":0,"stats":{"Line":12}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":17}},{"line":94,"address":[],"length":0,"stats":{"Line":34}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":27}},{"line":102,"address":[],"length":0,"stats":{"Line":27}},{"line":105,"address":[],"length":0,"stats":{"Line":5}},{"line":106,"address":[],"length":0,"stats":{"Line":5}},{"line":109,"address":[],"length":0,"stats":{"Line":4}},{"line":110,"address":[],"length":0,"stats":{"Line":12}},{"line":115,"address":[],"length":0,"stats":{"Line":41}},{"line":116,"address":[],"length":0,"stats":{"Line":41}},{"line":121,"address":[],"length":0,"stats":{"Line":5}},{"line":122,"address":[],"length":0,"stats":{"Line":24}},{"line":123,"address":[],"length":0,"stats":{"Line":10}},{"line":124,"address":[],"length":0,"stats":{"Line":1}},{"line":127,"address":[],"length":0,"stats":{"Line":4}},{"line":130,"address":[],"length":0,"stats":{"Line":31}},{"line":131,"address":[],"length":0,"stats":{"Line":155}},{"line":132,"address":[],"length":0,"stats":{"Line":93}},{"line":133,"address":[],"length":0,"stats":{"Line":31}},{"line":136,"address":[],"length":0,"stats":{"Line":1}},{"line":137,"address":[],"length":0,"stats":{"Line":2}},{"line":140,"address":[],"length":0,"stats":{"Line":6}},{"line":141,"address":[],"length":0,"stats":{"Line":18}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":18}},{"line":151,"address":[],"length":0,"stats":{"Line":24}},{"line":152,"address":[],"length":0,"stats":{"Line":24}},{"line":153,"address":[],"length":0,"stats":{"Line":48}},{"line":154,"address":[],"length":0,"stats":{"Line":56}},{"line":155,"address":[],"length":0,"stats":{"Line":32}},{"line":158,"address":[],"length":0,"stats":{"Line":12}},{"line":159,"address":[],"length":0,"stats":{"Line":48}},{"line":160,"address":[],"length":0,"stats":{"Line":12}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":8}},{"line":167,"address":[],"length":0,"stats":{"Line":32}},{"line":168,"address":[],"length":0,"stats":{"Line":15}},{"line":169,"address":[],"length":0,"stats":{"Line":2}},{"line":170,"address":[],"length":0,"stats":{"Line":1}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":58}},{"line":185,"address":[],"length":0,"stats":{"Line":116}},{"line":192,"address":[],"length":0,"stats":{"Line":8}},{"line":193,"address":[],"length":0,"stats":{"Line":8}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":8}},{"line":214,"address":[],"length":0,"stats":{"Line":8}},{"line":219,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}}],"covered":47,"coverable":61},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","metadata","key.rs"],"content":"use bytes::Bytes;\nuse http::header::HeaderName;\nuse std::borrow::Borrow;\nuse std::error::Error;\nuse std::fmt;\nuse std::marker::PhantomData;\nuse std::str::FromStr;\n\nuse super::encoding::{Ascii, Binary, ValueEncoding};\n\n/// Represents a custom metadata field name.\n///\n/// `MetadataKey` is used as the [`MetadataMap`] key.\n///\n/// [`HeaderMap`]: struct.HeaderMap.html\n/// [`MetadataMap`]: struct.MetadataMap.html\n#[derive(Clone, Eq, PartialEq, Hash)]\n#[repr(transparent)]\npub struct MetadataKey\u003cVE: ValueEncoding\u003e {\n    // Note: There are unsafe transmutes that assume that the memory layout\n    // of MetadataValue is identical to HeaderName\n    pub(crate) inner: http::header::HeaderName,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n/// A possible error when converting a `MetadataKey` from another type.\n#[derive(Debug, Default)]\npub struct InvalidMetadataKey {\n    _priv: (),\n}\n\n/// An ascii metadata key.\npub type AsciiMetadataKey = MetadataKey\u003cAscii\u003e;\n/// A binary metadata key.\npub type BinaryMetadataKey = MetadataKey\u003cBinary\u003e;\n\nimpl\u003cVE: ValueEncoding\u003e MetadataKey\u003cVE\u003e {\n    /// Converts a slice of bytes to a `MetadataKey`.\n    ///\n    /// This function normalizes the input.\n    pub fn from_bytes(src: \u0026[u8]) -\u003e Result\u003cSelf, InvalidMetadataKey\u003e {\n        match HeaderName::from_bytes(src) {\n            Ok(name) =\u003e {\n                if !VE::is_valid_key(name.as_str()) {\n                    return Err(InvalidMetadataKey::new());\n                }\n\n                Ok(MetadataKey {\n                    inner: name,\n                    phantom: PhantomData,\n                })\n            }\n            Err(_) =\u003e Err(InvalidMetadataKey::new()),\n        }\n    }\n\n    /// Converts a static string to a `MetadataKey`.\n    ///\n    /// This function panics when the static string is a invalid metadata key.\n    ///\n    /// This function requires the static string to only contain lowercase\n    /// characters, numerals and symbols, as per the HTTP/2.0 specification\n    /// and header names internal representation within this library.\n    ///\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// // Parsing a metadata key\n    /// let CUSTOM_KEY: \u0026'static str = \"custom-key\";\n    ///\n    /// let a = AsciiMetadataKey::from_bytes(b\"custom-key\").unwrap();\n    /// let b = AsciiMetadataKey::from_static(CUSTOM_KEY);\n    /// assert_eq!(a, b);\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// // Parsing a metadata key that contains invalid symbols(s):\n    /// AsciiMetadataKey::from_static(\"content{}{}length\"); // This line panics!\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// // Parsing a metadata key that contains invalid uppercase characters.\n    /// let a = AsciiMetadataKey::from_static(\"foobar\");\n    /// let b = AsciiMetadataKey::from_static(\"FOOBAR\"); // This line panics!\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// // Parsing a -bin metadata key as an Ascii key.\n    /// let b = AsciiMetadataKey::from_static(\"hello-bin\"); // This line panics!\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// // Parsing a non-bin metadata key as an Binary key.\n    /// let b = BinaryMetadataKey::from_static(\"hello\"); // This line panics!\n    /// ```\n    pub fn from_static(src: \u0026'static str) -\u003e Self {\n        let name = HeaderName::from_static(src);\n        if !VE::is_valid_key(name.as_str()) {\n            panic!(\"invalid metadata key\")\n        }\n\n        MetadataKey {\n            inner: name,\n            phantom: PhantomData,\n        }\n    }\n\n    /// Returns a `str` representation of the metadata key.\n    ///\n    /// The returned string will always be lower case.\n    #[inline]\n    pub fn as_str(\u0026self) -\u003e \u0026str {\n        self.inner.as_str()\n    }\n\n    /// Converts a HeaderName reference to a MetadataKey. This method assumes\n    /// that the caller has made sure that the header name has the correct\n    /// \"-bin\" or non-\"-bin\" suffix, it does not validate its input.\n    #[inline]\n    pub(crate) fn unchecked_from_header_name_ref(header_name: \u0026HeaderName) -\u003e \u0026Self {\n        unsafe { \u0026*(header_name as *const HeaderName as *const Self) }\n    }\n\n    /// Converts a HeaderName reference to a MetadataKey. This method assumes\n    /// that the caller has made sure that the header name has the correct\n    /// \"-bin\" or non-\"-bin\" suffix, it does not validate its input.\n    #[inline]\n    pub(crate) fn unchecked_from_header_name(name: HeaderName) -\u003e Self {\n        MetadataKey {\n            inner: name,\n            phantom: PhantomData,\n        }\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e FromStr for MetadataKey\u003cVE\u003e {\n    type Err = InvalidMetadataKey;\n\n    fn from_str(s: \u0026str) -\u003e Result\u003cSelf, InvalidMetadataKey\u003e {\n        MetadataKey::from_bytes(s.as_bytes()).map_err(|_| InvalidMetadataKey::new())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e AsRef\u003cstr\u003e for MetadataKey\u003cVE\u003e {\n    fn as_ref(\u0026self) -\u003e \u0026str {\n        self.as_str()\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e AsRef\u003c[u8]\u003e for MetadataKey\u003cVE\u003e {\n    fn as_ref(\u0026self) -\u003e \u0026[u8] {\n        self.as_str().as_bytes()\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e Borrow\u003cstr\u003e for MetadataKey\u003cVE\u003e {\n    fn borrow(\u0026self) -\u003e \u0026str {\n        self.as_str()\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e fmt::Debug for MetadataKey\u003cVE\u003e {\n    fn fmt(\u0026self, fmt: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        fmt::Debug::fmt(self.as_str(), fmt)\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e fmt::Display for MetadataKey\u003cVE\u003e {\n    fn fmt(\u0026self, fmt: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        fmt::Display::fmt(self.as_str(), fmt)\n    }\n}\n\nimpl InvalidMetadataKey {\n    #[doc(hidden)]\n    pub fn new() -\u003e InvalidMetadataKey {\n        Self::default()\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e From\u003c\u0026'a MetadataKey\u003cVE\u003e\u003e for MetadataKey\u003cVE\u003e {\n    fn from(src: \u0026'a MetadataKey\u003cVE\u003e) -\u003e MetadataKey\u003cVE\u003e {\n        src.clone()\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e From\u003cMetadataKey\u003cVE\u003e\u003e for Bytes {\n    #[inline]\n    fn from(name: MetadataKey\u003cVE\u003e) -\u003e Bytes {\n        Bytes::copy_from_slice(name.inner.as_ref())\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e PartialEq\u003c\u0026'a MetadataKey\u003cVE\u003e\u003e for MetadataKey\u003cVE\u003e {\n    #[inline]\n    fn eq(\u0026self, other: \u0026\u0026'a MetadataKey\u003cVE\u003e) -\u003e bool {\n        *self == **other\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataKey\u003cVE\u003e\u003e for \u0026MetadataKey\u003cVE\u003e {\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataKey\u003cVE\u003e) -\u003e bool {\n        *other == *self\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cstr\u003e for MetadataKey\u003cVE\u003e {\n    /// Performs a case-insensitive comparison of the string against the header\n    /// name\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let content_length = AsciiMetadataKey::from_static(\"content-length\");\n    ///\n    /// assert_eq!(content_length, \"content-length\");\n    /// assert_eq!(content_length, \"Content-Length\");\n    /// assert_ne!(content_length, \"content length\");\n    /// ```\n    #[inline]\n    fn eq(\u0026self, other: \u0026str) -\u003e bool {\n        self.inner.eq(other)\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataKey\u003cVE\u003e\u003e for str {\n    /// Performs a case-insensitive comparison of the string against the header\n    /// name\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let content_length = AsciiMetadataKey::from_static(\"content-length\");\n    ///\n    /// assert_eq!(content_length, \"content-length\");\n    /// assert_eq!(content_length, \"Content-Length\");\n    /// assert_ne!(content_length, \"content length\");\n    /// ```\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataKey\u003cVE\u003e) -\u003e bool {\n        other.inner == *self\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e PartialEq\u003c\u0026'a str\u003e for MetadataKey\u003cVE\u003e {\n    /// Performs a case-insensitive comparison of the string against the header\n    /// name\n    #[inline]\n    fn eq(\u0026self, other: \u0026\u0026'a str) -\u003e bool {\n        *self == **other\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataKey\u003cVE\u003e\u003e for \u0026str {\n    /// Performs a case-insensitive comparison of the string against the header\n    /// name\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataKey\u003cVE\u003e) -\u003e bool {\n        *other == *self\n    }\n}\n\nimpl fmt::Display for InvalidMetadataKey {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        f.write_str(\"invalid gRPC metadata key name\")\n    }\n}\n\nimpl Error for InvalidMetadataKey {}\n\n#[cfg(test)]\nmod tests {\n    use super::{AsciiMetadataKey, BinaryMetadataKey};\n\n    #[test]\n    fn test_from_bytes_binary() {\n        assert!(BinaryMetadataKey::from_bytes(b\"\").is_err());\n        assert!(BinaryMetadataKey::from_bytes(b\"\\xFF\").is_err());\n        assert!(BinaryMetadataKey::from_bytes(b\"abc\").is_err());\n        assert_eq!(\n            BinaryMetadataKey::from_bytes(b\"abc-bin\").unwrap().as_str(),\n            \"abc-bin\"\n        );\n    }\n\n    #[test]\n    fn test_from_bytes_ascii() {\n        assert!(AsciiMetadataKey::from_bytes(b\"\").is_err());\n        assert!(AsciiMetadataKey::from_bytes(b\"\\xFF\").is_err());\n        assert_eq!(\n            AsciiMetadataKey::from_bytes(b\"abc\").unwrap().as_str(),\n            \"abc\"\n        );\n        assert!(AsciiMetadataKey::from_bytes(b\"abc-bin\").is_err());\n    }\n}\n","traces":[{"line":41,"address":[],"length":0,"stats":{"Line":9}},{"line":42,"address":[],"length":0,"stats":{"Line":9}},{"line":43,"address":[],"length":0,"stats":{"Line":5}},{"line":44,"address":[],"length":0,"stats":{"Line":10}},{"line":45,"address":[],"length":0,"stats":{"Line":2}},{"line":48,"address":[],"length":0,"stats":{"Line":3}},{"line":49,"address":[],"length":0,"stats":{"Line":3}},{"line":50,"address":[],"length":0,"stats":{"Line":3}},{"line":53,"address":[],"length":0,"stats":{"Line":4}},{"line":102,"address":[],"length":0,"stats":{"Line":26}},{"line":103,"address":[],"length":0,"stats":{"Line":78}},{"line":104,"address":[],"length":0,"stats":{"Line":52}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":8}},{"line":119,"address":[],"length":0,"stats":{"Line":8}},{"line":126,"address":[],"length":0,"stats":{"Line":15}},{"line":127,"address":[],"length":0,"stats":{"Line":15}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":6}},{"line":183,"address":[],"length":0,"stats":{"Line":6}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":267,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}}],"covered":18,"coverable":50},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","metadata","map.rs"],"content":"use http::HeaderName;\n\npub(crate) use self::as_encoding_agnostic_metadata_key::AsEncodingAgnosticMetadataKey;\npub(crate) use self::as_metadata_key::AsMetadataKey;\npub(crate) use self::into_metadata_key::IntoMetadataKey;\n\nuse super::encoding::{Ascii, Binary, ValueEncoding};\nuse super::key::{InvalidMetadataKey, MetadataKey};\nuse super::value::MetadataValue;\n\nuse std::marker::PhantomData;\n\n/// A set of gRPC custom metadata entries.\n///\n/// # Examples\n///\n/// Basic usage\n///\n/// ```\n/// # use tonic::metadata::*;\n/// let mut map = MetadataMap::new();\n///\n/// map.insert(\"x-host\", \"example.com\".parse().unwrap());\n/// map.insert(\"x-number\", \"123\".parse().unwrap());\n/// map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"[binary data]\"));\n///\n/// assert!(map.contains_key(\"x-host\"));\n/// assert!(!map.contains_key(\"x-location\"));\n///\n/// assert_eq!(map.get(\"x-host\").unwrap(), \"example.com\");\n///\n/// map.remove(\"x-host\");\n///\n/// assert!(!map.contains_key(\"x-host\"));\n/// ```\n#[derive(Clone, Debug, Default)]\npub struct MetadataMap {\n    headers: http::HeaderMap,\n}\n\nimpl AsRef\u003chttp::HeaderMap\u003e for MetadataMap {\n    fn as_ref(\u0026self) -\u003e \u0026http::HeaderMap {\n        \u0026self.headers\n    }\n}\n\nimpl AsMut\u003chttp::HeaderMap\u003e for MetadataMap {\n    fn as_mut(\u0026mut self) -\u003e \u0026mut http::HeaderMap {\n        \u0026mut self.headers\n    }\n}\n\n/// `MetadataMap` entry iterator.\n///\n/// Yields `KeyAndValueRef` values. The same header name may be yielded\n/// more than once if it has more than one associated value.\n#[derive(Debug)]\npub struct Iter\u003c'a\u003e {\n    inner: http::header::Iter\u003c'a, http::header::HeaderValue\u003e,\n}\n\n/// Reference to a key and an associated value in a `MetadataMap`. It can point\n/// to either an ascii or a binary (\"*-bin\") key.\n#[derive(Debug)]\npub enum KeyAndValueRef\u003c'a\u003e {\n    /// An ascii metadata key and value.\n    Ascii(\u0026'a MetadataKey\u003cAscii\u003e, \u0026'a MetadataValue\u003cAscii\u003e),\n    /// A binary metadata key and value.\n    Binary(\u0026'a MetadataKey\u003cBinary\u003e, \u0026'a MetadataValue\u003cBinary\u003e),\n}\n\n/// Reference to a key and an associated value in a `MetadataMap`. It can point\n/// to either an ascii or a binary (\"*-bin\") key.\n#[derive(Debug)]\npub enum KeyAndMutValueRef\u003c'a\u003e {\n    /// An ascii metadata key and value.\n    Ascii(\u0026'a MetadataKey\u003cAscii\u003e, \u0026'a mut MetadataValue\u003cAscii\u003e),\n    /// A binary metadata key and value.\n    Binary(\u0026'a MetadataKey\u003cBinary\u003e, \u0026'a mut MetadataValue\u003cBinary\u003e),\n}\n\n/// `MetadataMap` entry iterator.\n///\n/// Yields `(\u0026MetadataKey, \u0026mut value)` tuples. The same header name may be yielded\n/// more than once if it has more than one associated value.\n#[derive(Debug)]\npub struct IterMut\u003c'a\u003e {\n    inner: http::header::IterMut\u003c'a, http::header::HeaderValue\u003e,\n}\n\n/// A drain iterator of all values associated with a single metadata key.\n#[derive(Debug)]\npub struct ValueDrain\u003c'a, VE: ValueEncoding\u003e {\n    inner: http::header::ValueDrain\u003c'a, http::header::HeaderValue\u003e,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n/// An iterator over `MetadataMap` keys.\n///\n/// Yields `KeyRef` values. Each header name is yielded only once, even if it\n/// has more than one associated value.\n#[derive(Debug)]\npub struct Keys\u003c'a\u003e {\n    inner: http::header::Keys\u003c'a, http::header::HeaderValue\u003e,\n}\n\n/// Reference to a key in a `MetadataMap`. It can point\n/// to either an ascii or a binary (\"*-bin\") key.\n#[derive(Debug)]\npub enum KeyRef\u003c'a\u003e {\n    /// An ascii metadata key and value.\n    Ascii(\u0026'a MetadataKey\u003cAscii\u003e),\n    /// A binary metadata key and value.\n    Binary(\u0026'a MetadataKey\u003cBinary\u003e),\n}\n\n/// `MetadataMap` value iterator.\n///\n/// Yields `ValueRef` values. Each value contained in the `MetadataMap` will be\n/// yielded.\n#[derive(Debug)]\npub struct Values\u003c'a\u003e {\n    // Need to use http::header::Iter and not http::header::Values to be able\n    // to know if a value is binary or not.\n    inner: http::header::Iter\u003c'a, http::header::HeaderValue\u003e,\n}\n\n/// Reference to a value in a `MetadataMap`. It can point\n/// to either an ascii or a binary (\"*-bin\" key) value.\n#[derive(Debug)]\npub enum ValueRef\u003c'a\u003e {\n    /// An ascii metadata key and value.\n    Ascii(\u0026'a MetadataValue\u003cAscii\u003e),\n    /// A binary metadata key and value.\n    Binary(\u0026'a MetadataValue\u003cBinary\u003e),\n}\n\n/// `MetadataMap` value iterator.\n///\n/// Each value contained in the `MetadataMap` will be yielded.\n#[derive(Debug)]\npub struct ValuesMut\u003c'a\u003e {\n    // Need to use http::header::IterMut and not http::header::ValuesMut to be\n    // able to know if a value is binary or not.\n    inner: http::header::IterMut\u003c'a, http::header::HeaderValue\u003e,\n}\n\n/// Reference to a value in a `MetadataMap`. It can point\n/// to either an ascii or a binary (\"*-bin\" key) value.\n#[derive(Debug)]\npub enum ValueRefMut\u003c'a\u003e {\n    /// An ascii metadata key and value.\n    Ascii(\u0026'a mut MetadataValue\u003cAscii\u003e),\n    /// A binary metadata key and value.\n    Binary(\u0026'a mut MetadataValue\u003cBinary\u003e),\n}\n\n/// An iterator of all values associated with a single metadata key.\n#[derive(Debug)]\npub struct ValueIter\u003c'a, VE: ValueEncoding\u003e {\n    inner: Option\u003chttp::header::ValueIter\u003c'a, http::header::HeaderValue\u003e\u003e,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n/// An iterator of all values associated with a single metadata key.\n#[derive(Debug)]\npub struct ValueIterMut\u003c'a, VE: ValueEncoding\u003e {\n    inner: http::header::ValueIterMut\u003c'a, http::header::HeaderValue\u003e,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n/// A view to all values stored in a single entry.\n///\n/// This struct is returned by `MetadataMap::get_all` and\n/// `MetadataMap::get_all_bin`.\n#[derive(Debug)]\npub struct GetAll\u003c'a, VE: ValueEncoding\u003e {\n    inner: Option\u003chttp::header::GetAll\u003c'a, http::header::HeaderValue\u003e\u003e,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n/// A view into a single location in a `MetadataMap`, which may be vacant or\n/// occupied.\n#[derive(Debug)]\npub enum Entry\u003c'a, VE: ValueEncoding\u003e {\n    /// An occupied entry\n    Occupied(OccupiedEntry\u003c'a, VE\u003e),\n\n    /// A vacant entry\n    Vacant(VacantEntry\u003c'a, VE\u003e),\n}\n\n/// A view into a single empty location in a `MetadataMap`.\n///\n/// This struct is returned as part of the `Entry` enum.\n#[derive(Debug)]\npub struct VacantEntry\u003c'a, VE: ValueEncoding\u003e {\n    inner: http::header::VacantEntry\u003c'a, http::header::HeaderValue\u003e,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n/// A view into a single occupied location in a `MetadataMap`.\n///\n/// This struct is returned as part of the `Entry` enum.\n#[derive(Debug)]\npub struct OccupiedEntry\u003c'a, VE: ValueEncoding\u003e {\n    inner: http::header::OccupiedEntry\u003c'a, http::header::HeaderValue\u003e,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n// pub(crate) const GRPC_TIMEOUT_HEADER: \u0026str = \"grpc-timeout\";\n\n// ===== impl MetadataMap =====\n\nimpl MetadataMap {\n    // Headers reserved by the gRPC protocol.\n    pub(crate) const GRPC_RESERVED_HEADERS: [HeaderName; 5] = [\n        HeaderName::from_static(\"te\"),\n        HeaderName::from_static(\"content-type\"),\n        HeaderName::from_static(\"grpc-message\"),\n        HeaderName::from_static(\"grpc-message-type\"),\n        HeaderName::from_static(\"grpc-status\"),\n    ];\n\n    /// Create an empty `MetadataMap`.\n    ///\n    /// The map will be created without any capacity. This function will not\n    /// allocate.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let map = MetadataMap::new();\n    ///\n    /// assert!(map.is_empty());\n    /// assert_eq!(0, map.capacity());\n    /// ```\n    pub fn new() -\u003e Self {\n        MetadataMap::with_capacity(0)\n    }\n\n    /// Convert an HTTP HeaderMap to a MetadataMap\n    pub fn from_headers(headers: http::HeaderMap) -\u003e Self {\n        MetadataMap { headers }\n    }\n\n    /// Convert a MetadataMap into a HTTP HeaderMap\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"x-host\", \"example.com\".parse().unwrap());\n    ///\n    /// let http_map = map.into_headers();\n    ///\n    /// assert_eq!(http_map.get(\"x-host\").unwrap(), \"example.com\");\n    /// ```\n    pub fn into_headers(self) -\u003e http::HeaderMap {\n        self.headers\n    }\n\n    pub(crate) fn into_sanitized_headers(mut self) -\u003e http::HeaderMap {\n        for r in \u0026Self::GRPC_RESERVED_HEADERS {\n            self.headers.remove(r);\n        }\n        self.headers\n    }\n\n    /// Create an empty `MetadataMap` with the specified capacity.\n    ///\n    /// The returned map will allocate internal storage in order to hold about\n    /// `capacity` elements without reallocating. However, this is a \"best\n    /// effort\" as there are usage patterns that could cause additional\n    /// allocations before `capacity` metadata entries are stored in the map.\n    ///\n    /// More capacity than requested may be allocated.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let map: MetadataMap = MetadataMap::with_capacity(10);\n    ///\n    /// assert!(map.is_empty());\n    /// assert!(map.capacity() \u003e= 10);\n    /// ```\n    pub fn with_capacity(capacity: usize) -\u003e MetadataMap {\n        MetadataMap {\n            headers: http::HeaderMap::with_capacity(capacity),\n        }\n    }\n\n    /// Returns the number of metadata entries (ascii and binary) stored in the\n    /// map.\n    ///\n    /// This number represents the total number of **values** stored in the map.\n    /// This number can be greater than or equal to the number of **keys**\n    /// stored given that a single key may have more than one associated value.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// assert_eq!(0, map.len());\n    ///\n    /// map.insert(\"x-host-ip\", \"127.0.0.1\".parse().unwrap());\n    /// map.insert_bin(\"x-host-name-bin\", MetadataValue::from_bytes(b\"localhost\"));\n    ///\n    /// assert_eq!(2, map.len());\n    ///\n    /// map.append(\"x-host-ip\", \"text/html\".parse().unwrap());\n    ///\n    /// assert_eq!(3, map.len());\n    /// ```\n    pub fn len(\u0026self) -\u003e usize {\n        self.headers.len()\n    }\n\n    /// Returns the number of keys (ascii and binary) stored in the map.\n    ///\n    /// This number will be less than or equal to `len()` as each key may have\n    /// more than one associated value.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// assert_eq!(0, map.keys_len());\n    ///\n    /// map.insert(\"x-host-ip\", \"127.0.0.1\".parse().unwrap());\n    /// map.insert_bin(\"x-host-name-bin\", MetadataValue::from_bytes(b\"localhost\"));\n    ///\n    /// assert_eq!(2, map.keys_len());\n    ///\n    /// map.append(\"x-host-ip\", \"text/html\".parse().unwrap());\n    ///\n    /// assert_eq!(2, map.keys_len());\n    /// ```\n    pub fn keys_len(\u0026self) -\u003e usize {\n        self.headers.keys_len()\n    }\n\n    /// Returns true if the map contains no elements.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// assert!(map.is_empty());\n    ///\n    /// map.insert(\"x-host\", \"hello.world\".parse().unwrap());\n    ///\n    /// assert!(!map.is_empty());\n    /// ```\n    pub fn is_empty(\u0026self) -\u003e bool {\n        self.headers.is_empty()\n    }\n\n    /// Clears the map, removing all key-value pairs. Keeps the allocated memory\n    /// for reuse.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"x-host\", \"hello.world\".parse().unwrap());\n    ///\n    /// map.clear();\n    /// assert!(map.is_empty());\n    /// assert!(map.capacity() \u003e 0);\n    /// ```\n    pub fn clear(\u0026mut self) {\n        self.headers.clear();\n    }\n\n    /// Returns the number of custom metadata entries the map can hold without\n    /// reallocating.\n    ///\n    /// This number is an approximation as certain usage patterns could cause\n    /// additional allocations before the returned capacity is filled.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// assert_eq!(0, map.capacity());\n    ///\n    /// map.insert(\"x-host\", \"hello.world\".parse().unwrap());\n    /// assert_eq!(6, map.capacity());\n    /// ```\n    pub fn capacity(\u0026self) -\u003e usize {\n        self.headers.capacity()\n    }\n\n    /// Reserves capacity for at least `additional` more custom metadata to be\n    /// inserted into the `MetadataMap`.\n    ///\n    /// The metadata map may reserve more space to avoid frequent reallocations.\n    /// Like with `with_capacity`, this will be a \"best effort\" to avoid\n    /// allocations until `additional` more custom metadata is inserted. Certain\n    /// usage patterns could cause additional allocations before the number is\n    /// reached.\n    ///\n    /// # Panics\n    ///\n    /// Panics if the new allocation size overflows `usize`.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.reserve(10);\n    /// # map.insert(\"x-host\", \"bar\".parse().unwrap());\n    /// ```\n    pub fn reserve(\u0026mut self, additional: usize) {\n        self.headers.reserve(additional);\n    }\n\n    /// Returns a reference to the value associated with the key. This method\n    /// is for ascii metadata entries (those whose names don't end with\n    /// \"-bin\"). For binary entries, use get_bin.\n    ///\n    /// If there are multiple values associated with the key, then the first one\n    /// is returned. Use `get_all` to get all values associated with a given\n    /// key. Returns `None` if there are no values associated with the key.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// assert!(map.get(\"x-host\").is_none());\n    ///\n    /// map.insert(\"x-host\", \"hello\".parse().unwrap());\n    /// assert_eq!(map.get(\"x-host\").unwrap(), \u0026\"hello\");\n    /// assert_eq!(map.get(\"x-host\").unwrap(), \u0026\"hello\");\n    ///\n    /// map.append(\"x-host\", \"world\".parse().unwrap());\n    /// assert_eq!(map.get(\"x-host\").unwrap(), \u0026\"hello\");\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append_bin(\"host-bin\", MetadataValue::from_bytes(b\"world\"));\n    /// assert!(map.get(\"host-bin\").is_none());\n    /// assert!(map.get(\"host-bin\".to_string()).is_none());\n    /// assert!(map.get(\u0026(\"host-bin\".to_string())).is_none());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.get(\"host{}bin\").is_none());\n    /// assert!(map.get(\"host{}bin\".to_string()).is_none());\n    /// assert!(map.get(\u0026(\"host{}bin\".to_string())).is_none());\n    /// ```\n    pub fn get\u003cK\u003e(\u0026self, key: K) -\u003e Option\u003c\u0026MetadataValue\u003cAscii\u003e\u003e\n    where\n        K: AsMetadataKey\u003cAscii\u003e,\n    {\n        key.get(self)\n    }\n\n    /// Like get, but for Binary keys (for example \"trace-proto-bin\").\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// assert!(map.get_bin(\"trace-proto-bin\").is_none());\n    ///\n    /// map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"hello\"));\n    /// assert_eq!(map.get_bin(\"trace-proto-bin\").unwrap(), \u0026\"hello\");\n    /// assert_eq!(map.get_bin(\"trace-proto-bin\").unwrap(), \u0026\"hello\");\n    ///\n    /// map.append_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"world\"));\n    /// assert_eq!(map.get_bin(\"trace-proto-bin\").unwrap(), \u0026\"hello\");\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append(\"host\", \"world\".parse().unwrap());\n    /// assert!(map.get_bin(\"host\").is_none());\n    /// assert!(map.get_bin(\"host\".to_string()).is_none());\n    /// assert!(map.get_bin(\u0026(\"host\".to_string())).is_none());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.get_bin(\"host{}-bin\").is_none());\n    /// assert!(map.get_bin(\"host{}-bin\".to_string()).is_none());\n    /// assert!(map.get_bin(\u0026(\"host{}-bin\".to_string())).is_none());\n    /// ```\n    pub fn get_bin\u003cK\u003e(\u0026self, key: K) -\u003e Option\u003c\u0026MetadataValue\u003cBinary\u003e\u003e\n    where\n        K: AsMetadataKey\u003cBinary\u003e,\n    {\n        key.get(self)\n    }\n\n    /// Returns a mutable reference to the value associated with the key. This\n    /// method is for ascii metadata entries (those whose names don't end with\n    /// \"-bin\"). For binary entries, use get_mut_bin.\n    ///\n    /// If there are multiple values associated with the key, then the first one\n    /// is returned. Use `entry` to get all values associated with a given\n    /// key. Returns `None` if there are no values associated with the key.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    /// map.insert(\"x-host\", \"hello\".parse().unwrap());\n    /// map.get_mut(\"x-host\").unwrap().set_sensitive(true);\n    ///\n    /// assert!(map.get(\"x-host\").unwrap().is_sensitive());\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append_bin(\"host-bin\", MetadataValue::from_bytes(b\"world\"));\n    /// assert!(map.get_mut(\"host-bin\").is_none());\n    /// assert!(map.get_mut(\"host-bin\".to_string()).is_none());\n    /// assert!(map.get_mut(\u0026(\"host-bin\".to_string())).is_none());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.get_mut(\"host{}\").is_none());\n    /// assert!(map.get_mut(\"host{}\".to_string()).is_none());\n    /// assert!(map.get_mut(\u0026(\"host{}\".to_string())).is_none());\n    /// ```\n    pub fn get_mut\u003cK\u003e(\u0026mut self, key: K) -\u003e Option\u003c\u0026mut MetadataValue\u003cAscii\u003e\u003e\n    where\n        K: AsMetadataKey\u003cAscii\u003e,\n    {\n        key.get_mut(self)\n    }\n\n    /// Like get_mut, but for Binary keys (for example \"trace-proto-bin\").\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    /// map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"hello\"));\n    /// map.get_bin_mut(\"trace-proto-bin\").unwrap().set_sensitive(true);\n    ///\n    /// assert!(map.get_bin(\"trace-proto-bin\").unwrap().is_sensitive());\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append(\"host\", \"world\".parse().unwrap());\n    /// assert!(map.get_bin_mut(\"host\").is_none());\n    /// assert!(map.get_bin_mut(\"host\".to_string()).is_none());\n    /// assert!(map.get_bin_mut(\u0026(\"host\".to_string())).is_none());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.get_bin_mut(\"host{}-bin\").is_none());\n    /// assert!(map.get_bin_mut(\"host{}-bin\".to_string()).is_none());\n    /// assert!(map.get_bin_mut(\u0026(\"host{}-bin\".to_string())).is_none());\n    /// ```\n    pub fn get_bin_mut\u003cK\u003e(\u0026mut self, key: K) -\u003e Option\u003c\u0026mut MetadataValue\u003cBinary\u003e\u003e\n    where\n        K: AsMetadataKey\u003cBinary\u003e,\n    {\n        key.get_mut(self)\n    }\n\n    /// Returns a view of all values associated with a key. This method is for\n    /// ascii metadata entries (those whose names don't end with \"-bin\"). For\n    /// binary entries, use get_all_bin.\n    ///\n    /// The returned view does not incur any allocations and allows iterating\n    /// the values associated with the key.  See [`GetAll`] for more details.\n    /// Returns `None` if there are no values associated with the key.\n    ///\n    /// [`GetAll`]: struct.GetAll.html\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// map.insert(\"x-host\", \"hello\".parse().unwrap());\n    /// map.append(\"x-host\", \"goodbye\".parse().unwrap());\n    ///\n    /// {\n    ///     let view = map.get_all(\"x-host\");\n    ///\n    ///     let mut iter = view.iter();\n    ///     assert_eq!(\u0026\"hello\", iter.next().unwrap());\n    ///     assert_eq!(\u0026\"goodbye\", iter.next().unwrap());\n    ///     assert!(iter.next().is_none());\n    /// }\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append_bin(\"host-bin\", MetadataValue::from_bytes(b\"world\"));\n    /// assert!(map.get_all(\"host-bin\").iter().next().is_none());\n    /// assert!(map.get_all(\"host-bin\".to_string()).iter().next().is_none());\n    /// assert!(map.get_all(\u0026(\"host-bin\".to_string())).iter().next().is_none());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.get_all(\"host{}\").iter().next().is_none());\n    /// assert!(map.get_all(\"host{}\".to_string()).iter().next().is_none());\n    /// assert!(map.get_all(\u0026(\"host{}\".to_string())).iter().next().is_none());\n    /// ```\n    pub fn get_all\u003cK\u003e(\u0026self, key: K) -\u003e GetAll\u003c'_, Ascii\u003e\n    where\n        K: AsMetadataKey\u003cAscii\u003e,\n    {\n        GetAll {\n            inner: key.get_all(self),\n            phantom: PhantomData,\n        }\n    }\n\n    /// Like get_all, but for Binary keys (for example \"trace-proto-bin\").\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"hello\"));\n    /// map.append_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n    ///\n    /// {\n    ///     let view = map.get_all_bin(\"trace-proto-bin\");\n    ///\n    ///     let mut iter = view.iter();\n    ///     assert_eq!(\u0026\"hello\", iter.next().unwrap());\n    ///     assert_eq!(\u0026\"goodbye\", iter.next().unwrap());\n    ///     assert!(iter.next().is_none());\n    /// }\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append(\"host\", \"world\".parse().unwrap());\n    /// assert!(map.get_all_bin(\"host\").iter().next().is_none());\n    /// assert!(map.get_all_bin(\"host\".to_string()).iter().next().is_none());\n    /// assert!(map.get_all_bin(\u0026(\"host\".to_string())).iter().next().is_none());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.get_all_bin(\"host{}-bin\").iter().next().is_none());\n    /// assert!(map.get_all_bin(\"host{}-bin\".to_string()).iter().next().is_none());\n    /// assert!(map.get_all_bin(\u0026(\"host{}-bin\".to_string())).iter().next().is_none());\n    /// ```\n    pub fn get_all_bin\u003cK\u003e(\u0026self, key: K) -\u003e GetAll\u003c'_, Binary\u003e\n    where\n        K: AsMetadataKey\u003cBinary\u003e,\n    {\n        GetAll {\n            inner: key.get_all(self),\n            phantom: PhantomData,\n        }\n    }\n\n    /// Returns true if the map contains a value for the specified key. This\n    /// method works for both ascii and binary entries.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// assert!(!map.contains_key(\"x-host\"));\n    ///\n    /// map.append_bin(\"host-bin\", MetadataValue::from_bytes(b\"world\"));\n    /// map.insert(\"x-host\", \"world\".parse().unwrap());\n    ///\n    /// // contains_key works for both Binary and Ascii keys:\n    /// assert!(map.contains_key(\"x-host\"));\n    /// assert!(map.contains_key(\"host-bin\"));\n    ///\n    /// // contains_key returns false for invalid keys:\n    /// assert!(!map.contains_key(\"x{}host\"));\n    /// ```\n    pub fn contains_key\u003cK\u003e(\u0026self, key: K) -\u003e bool\n    where\n        K: AsEncodingAgnosticMetadataKey,\n    {\n        key.contains_key(self)\n    }\n\n    /// An iterator visiting all key-value pairs (both ascii and binary).\n    ///\n    /// The iteration order is arbitrary, but consistent across platforms for\n    /// the same crate version. Each key will be yielded once per associated\n    /// value. So, if a key has 3 associated values, it will be yielded 3 times.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// map.insert(\"x-word\", \"hello\".parse().unwrap());\n    /// map.append(\"x-word\", \"goodbye\".parse().unwrap());\n    /// map.insert(\"x-number\", \"123\".parse().unwrap());\n    ///\n    /// for key_and_value in map.iter() {\n    ///     match key_and_value {\n    ///         KeyAndValueRef::Ascii(ref key, ref value) =\u003e\n    ///             println!(\"Ascii: {:?}: {:?}\", key, value),\n    ///         KeyAndValueRef::Binary(ref key, ref value) =\u003e\n    ///             println!(\"Binary: {:?}: {:?}\", key, value),\n    ///     }\n    /// }\n    /// ```\n    pub fn iter(\u0026self) -\u003e Iter\u003c'_\u003e {\n        Iter {\n            inner: self.headers.iter(),\n        }\n    }\n\n    /// An iterator visiting all key-value pairs, with mutable value references.\n    ///\n    /// The iterator order is arbitrary, but consistent across platforms for the\n    /// same crate version. Each key will be yielded once per associated value,\n    /// so if a key has 3 associated values, it will be yielded 3 times.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// map.insert(\"x-word\", \"hello\".parse().unwrap());\n    /// map.append(\"x-word\", \"goodbye\".parse().unwrap());\n    /// map.insert(\"x-number\", \"123\".parse().unwrap());\n    ///\n    /// for key_and_value in map.iter_mut() {\n    ///     match key_and_value {\n    ///         KeyAndMutValueRef::Ascii(key, mut value) =\u003e\n    ///             value.set_sensitive(true),\n    ///         KeyAndMutValueRef::Binary(key, mut value) =\u003e\n    ///             value.set_sensitive(false),\n    ///     }\n    /// }\n    /// ```\n    pub fn iter_mut(\u0026mut self) -\u003e IterMut\u003c'_\u003e {\n        IterMut {\n            inner: self.headers.iter_mut(),\n        }\n    }\n\n    /// An iterator visiting all keys.\n    ///\n    /// The iteration order is arbitrary, but consistent across platforms for\n    /// the same crate version. Each key will be yielded only once even if it\n    /// has multiple associated values.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// map.insert(\"x-word\", \"hello\".parse().unwrap());\n    /// map.append(\"x-word\", \"goodbye\".parse().unwrap());\n    /// map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n    ///\n    /// for key in map.keys() {\n    ///     match key {\n    ///         KeyRef::Ascii(ref key) =\u003e\n    ///             println!(\"Ascii key: {:?}\", key),\n    ///         KeyRef::Binary(ref key) =\u003e\n    ///             println!(\"Binary key: {:?}\", key),\n    ///     }\n    ///     println!(\"{:?}\", key);\n    /// }\n    /// ```\n    pub fn keys(\u0026self) -\u003e Keys\u003c'_\u003e {\n        Keys {\n            inner: self.headers.keys(),\n        }\n    }\n\n    /// An iterator visiting all values (both ascii and binary).\n    ///\n    /// The iteration order is arbitrary, but consistent across platforms for\n    /// the same crate version.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// map.insert(\"x-word\", \"hello\".parse().unwrap());\n    /// map.append(\"x-word\", \"goodbye\".parse().unwrap());\n    /// map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n    ///\n    /// for value in map.values() {\n    ///     match value {\n    ///         ValueRef::Ascii(ref value) =\u003e\n    ///             println!(\"Ascii value: {:?}\", value),\n    ///         ValueRef::Binary(ref value) =\u003e\n    ///             println!(\"Binary value: {:?}\", value),\n    ///     }\n    ///     println!(\"{:?}\", value);\n    /// }\n    /// ```\n    pub fn values(\u0026self) -\u003e Values\u003c'_\u003e {\n        Values {\n            inner: self.headers.iter(),\n        }\n    }\n\n    /// An iterator visiting all values mutably.\n    ///\n    /// The iteration order is arbitrary, but consistent across platforms for\n    /// the same crate version.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    ///\n    /// map.insert(\"x-word\", \"hello\".parse().unwrap());\n    /// map.append(\"x-word\", \"goodbye\".parse().unwrap());\n    /// map.insert(\"x-number\", \"123\".parse().unwrap());\n    ///\n    /// for value in map.values_mut() {\n    ///     match value {\n    ///         ValueRefMut::Ascii(mut value) =\u003e\n    ///             value.set_sensitive(true),\n    ///         ValueRefMut::Binary(mut value) =\u003e\n    ///             value.set_sensitive(false),\n    ///     }\n    /// }\n    /// ```\n    pub fn values_mut(\u0026mut self) -\u003e ValuesMut\u003c'_\u003e {\n        ValuesMut {\n            inner: self.headers.iter_mut(),\n        }\n    }\n\n    /// Gets the given ascii key's corresponding entry in the map for in-place\n    /// manipulation. For binary keys, use `entry_bin`.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    ///\n    /// let headers = \u0026[\n    ///     \"content-length\",\n    ///     \"x-hello\",\n    ///     \"Content-Length\",\n    ///     \"x-world\",\n    /// ];\n    ///\n    /// for \u0026header in headers {\n    ///     let counter = map.entry(header).unwrap().or_insert(\"\".parse().unwrap());\n    ///     *counter = format!(\"{}{}\", counter.to_str().unwrap(), \"1\").parse().unwrap();\n    /// }\n    ///\n    /// assert_eq!(map.get(\"content-length\").unwrap(), \"11\");\n    /// assert_eq!(map.get(\"x-hello\").unwrap(), \"1\");\n    ///\n    /// // Gracefully handles parting invalid key strings\n    /// assert!(!map.entry(\"a{}b\").is_ok());\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append_bin(\"host-bin\", MetadataValue::from_bytes(b\"world\"));\n    /// assert!(!map.entry(\"host-bin\").is_ok());\n    /// assert!(!map.entry(\"host-bin\".to_string()).is_ok());\n    /// assert!(!map.entry(\u0026(\"host-bin\".to_string())).is_ok());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(!map.entry(\"host{}\").is_ok());\n    /// assert!(!map.entry(\"host{}\".to_string()).is_ok());\n    /// assert!(!map.entry(\u0026(\"host{}\".to_string())).is_ok());\n    /// ```\n    pub fn entry\u003cK\u003e(\u0026mut self, key: K) -\u003e Result\u003cEntry\u003c'_, Ascii\u003e, InvalidMetadataKey\u003e\n    where\n        K: AsMetadataKey\u003cAscii\u003e,\n    {\n        self.generic_entry::\u003cAscii, K\u003e(key)\n    }\n\n    /// Gets the given Binary key's corresponding entry in the map for in-place\n    /// manipulation.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// # use std::str;\n    /// let mut map = MetadataMap::default();\n    ///\n    /// let headers = \u0026[\n    ///     \"content-length-bin\",\n    ///     \"x-hello-bin\",\n    ///     \"Content-Length-bin\",\n    ///     \"x-world-bin\",\n    /// ];\n    ///\n    /// for \u0026header in headers {\n    ///     let counter = map.entry_bin(header).unwrap().or_insert(MetadataValue::from_bytes(b\"\"));\n    ///     *counter = MetadataValue::from_bytes(format!(\"{}{}\", str::from_utf8(counter.to_bytes().unwrap().as_ref()).unwrap(), \"1\").as_bytes());\n    /// }\n    ///\n    /// assert_eq!(map.get_bin(\"content-length-bin\").unwrap(), \"11\");\n    /// assert_eq!(map.get_bin(\"x-hello-bin\").unwrap(), \"1\");\n    ///\n    /// // Attempting to read a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append(\"host\", \"world\".parse().unwrap());\n    /// assert!(!map.entry_bin(\"host\").is_ok());\n    /// assert!(!map.entry_bin(\"host\".to_string()).is_ok());\n    /// assert!(!map.entry_bin(\u0026(\"host\".to_string())).is_ok());\n    ///\n    /// // Attempting to read an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(!map.entry_bin(\"host{}-bin\").is_ok());\n    /// assert!(!map.entry_bin(\"host{}-bin\".to_string()).is_ok());\n    /// assert!(!map.entry_bin(\u0026(\"host{}-bin\".to_string())).is_ok());\n    /// ```\n    pub fn entry_bin\u003cK\u003e(\u0026mut self, key: K) -\u003e Result\u003cEntry\u003c'_, Binary\u003e, InvalidMetadataKey\u003e\n    where\n        K: AsMetadataKey\u003cBinary\u003e,\n    {\n        self.generic_entry::\u003cBinary, K\u003e(key)\n    }\n\n    fn generic_entry\u003cVE: ValueEncoding, K\u003e(\n        \u0026mut self,\n        key: K,\n    ) -\u003e Result\u003cEntry\u003c'_, VE\u003e, InvalidMetadataKey\u003e\n    where\n        K: AsMetadataKey\u003cVE\u003e,\n    {\n        match key.entry(self) {\n            Ok(entry) =\u003e Ok(match entry {\n                http::header::Entry::Occupied(e) =\u003e Entry::Occupied(OccupiedEntry {\n                    inner: e,\n                    phantom: PhantomData,\n                }),\n                http::header::Entry::Vacant(e) =\u003e Entry::Vacant(VacantEntry {\n                    inner: e,\n                    phantom: PhantomData,\n                }),\n            }),\n            Err(err) =\u003e Err(err),\n        }\n    }\n\n    /// Inserts an ascii key-value pair into the map. To insert a binary entry,\n    /// use `insert_bin`.\n    ///\n    /// This method panics when the given key is a string and it cannot be\n    /// converted to a `MetadataKey\u003cAscii\u003e`.\n    ///\n    /// If the map did not previously have this key present, then `None` is\n    /// returned.\n    ///\n    /// If the map did have this key present, the new value is associated with\n    /// the key and all previous values are removed. **Note** that only a single\n    /// one of the previous values is returned. If there are multiple values\n    /// that have been previously associated with the key, then the first one is\n    /// returned. See `insert_mult` on `OccupiedEntry` for an API that returns\n    /// all values.\n    ///\n    /// The key is not updated, though; this matters for types that can be `==`\n    /// without being identical.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// assert!(map.insert(\"x-host\", \"world\".parse().unwrap()).is_none());\n    /// assert!(!map.is_empty());\n    ///\n    /// let mut prev = map.insert(\"x-host\", \"earth\".parse().unwrap()).unwrap();\n    /// assert_eq!(\"world\", prev);\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// // Trying to insert a key that is not valid panics.\n    /// map.insert(\"x{}host\", \"world\".parse().unwrap());\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// // Trying to insert a key that is binary panics (use insert_bin).\n    /// map.insert(\"x-host-bin\", \"world\".parse().unwrap());\n    /// ```\n    pub fn insert\u003cK\u003e(\u0026mut self, key: K, val: MetadataValue\u003cAscii\u003e) -\u003e Option\u003cMetadataValue\u003cAscii\u003e\u003e\n    where\n        K: IntoMetadataKey\u003cAscii\u003e,\n    {\n        key.insert(self, val)\n    }\n\n    /// Like insert, but for Binary keys (for example \"trace-proto-bin\").\n    ///\n    /// This method panics when the given key is a string and it cannot be\n    /// converted to a `MetadataKey\u003cBinary\u003e`.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// assert!(map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"world\")).is_none());\n    /// assert!(!map.is_empty());\n    ///\n    /// let mut prev = map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"earth\")).unwrap();\n    /// assert_eq!(\"world\", prev);\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    /// // Attempting to add a binary metadata entry with an invalid name\n    /// map.insert_bin(\"trace-proto\", MetadataValue::from_bytes(b\"hello\")); // This line panics!\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// // Trying to insert a key that is not valid panics.\n    /// map.insert_bin(\"x{}host-bin\", MetadataValue::from_bytes(b\"world\")); // This line panics!\n    /// ```\n    pub fn insert_bin\u003cK\u003e(\n        \u0026mut self,\n        key: K,\n        val: MetadataValue\u003cBinary\u003e,\n    ) -\u003e Option\u003cMetadataValue\u003cBinary\u003e\u003e\n    where\n        K: IntoMetadataKey\u003cBinary\u003e,\n    {\n        key.insert(self, val)\n    }\n\n    /// Inserts an ascii key-value pair into the map. To insert a binary entry,\n    /// use `append_bin`.\n    ///\n    /// This method panics when the given key is a string and it cannot be\n    /// converted to a `MetadataKey\u003cAscii\u003e`.\n    ///\n    /// If the map did not previously have this key present, then `false` is\n    /// returned.\n    ///\n    /// If the map did have this key present, the new value is pushed to the end\n    /// of the list of values currently associated with the key. The key is not\n    /// updated, though; this matters for types that can be `==` without being\n    /// identical.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// assert!(map.insert(\"x-host\", \"world\".parse().unwrap()).is_none());\n    /// assert!(!map.is_empty());\n    ///\n    /// map.append(\"x-host\", \"earth\".parse().unwrap());\n    ///\n    /// let values = map.get_all(\"x-host\");\n    /// let mut i = values.iter();\n    /// assert_eq!(\"world\", *i.next().unwrap());\n    /// assert_eq!(\"earth\", *i.next().unwrap());\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// // Trying to append a key that is not valid panics.\n    /// map.append(\"x{}host\", \"world\".parse().unwrap()); // This line panics!\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// // Trying to append a key that is binary panics (use append_bin).\n    /// map.append(\"x-host-bin\", \"world\".parse().unwrap()); // This line panics!\n    /// ```\n    pub fn append\u003cK\u003e(\u0026mut self, key: K, value: MetadataValue\u003cAscii\u003e) -\u003e bool\n    where\n        K: IntoMetadataKey\u003cAscii\u003e,\n    {\n        key.append(self, value)\n    }\n\n    /// Like append, but for binary keys (for example \"trace-proto-bin\").\n    ///\n    /// This method panics when the given key is a string and it cannot be\n    /// converted to a `MetadataKey\u003cBinary\u003e`.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// assert!(map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"world\")).is_none());\n    /// assert!(!map.is_empty());\n    ///\n    /// map.append_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"earth\"));\n    ///\n    /// let values = map.get_all_bin(\"trace-proto-bin\");\n    /// let mut i = values.iter();\n    /// assert_eq!(\"world\", *i.next().unwrap());\n    /// assert_eq!(\"earth\", *i.next().unwrap());\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// // Trying to append a key that is not valid panics.\n    /// map.append_bin(\"x{}host-bin\", MetadataValue::from_bytes(b\"world\")); // This line panics!\n    /// ```\n    ///\n    /// ```should_panic\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// // Trying to append a key that is ascii panics (use append).\n    /// map.append_bin(\"x-host\", MetadataValue::from_bytes(b\"world\")); // This line panics!\n    /// ```\n    pub fn append_bin\u003cK\u003e(\u0026mut self, key: K, value: MetadataValue\u003cBinary\u003e) -\u003e bool\n    where\n        K: IntoMetadataKey\u003cBinary\u003e,\n    {\n        key.append(self, value)\n    }\n\n    /// Removes an ascii key from the map, returning the value associated with\n    /// the key. To remove a binary key, use `remove_bin`.\n    ///\n    /// Returns `None` if the map does not contain the key. If there are\n    /// multiple values associated with the key, then the first one is returned.\n    /// See `remove_entry_mult` on `OccupiedEntry` for an API that yields all\n    /// values.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"x-host\", \"hello.world\".parse().unwrap());\n    ///\n    /// let prev = map.remove(\"x-host\").unwrap();\n    /// assert_eq!(\"hello.world\", prev);\n    ///\n    /// assert!(map.remove(\"x-host\").is_none());\n    ///\n    /// // Attempting to remove a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append_bin(\"host-bin\", MetadataValue::from_bytes(b\"world\"));\n    /// assert!(map.remove(\"host-bin\").is_none());\n    /// assert!(map.remove(\"host-bin\".to_string()).is_none());\n    /// assert!(map.remove(\u0026(\"host-bin\".to_string())).is_none());\n    ///\n    /// // Attempting to remove an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.remove(\"host{}\").is_none());\n    /// assert!(map.remove(\"host{}\".to_string()).is_none());\n    /// assert!(map.remove(\u0026(\"host{}\".to_string())).is_none());\n    /// ```\n    pub fn remove\u003cK\u003e(\u0026mut self, key: K) -\u003e Option\u003cMetadataValue\u003cAscii\u003e\u003e\n    where\n        K: AsMetadataKey\u003cAscii\u003e,\n    {\n        key.remove(self)\n    }\n\n    /// Like remove, but for Binary keys (for example \"trace-proto-bin\").\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert_bin(\"trace-proto-bin\", MetadataValue::from_bytes(b\"hello.world\"));\n    ///\n    /// let prev = map.remove_bin(\"trace-proto-bin\").unwrap();\n    /// assert_eq!(\"hello.world\", prev);\n    ///\n    /// assert!(map.remove_bin(\"trace-proto-bin\").is_none());\n    ///\n    /// // Attempting to remove a key of the wrong type fails by not\n    /// // finding anything.\n    /// map.append(\"host\", \"world\".parse().unwrap());\n    /// assert!(map.remove_bin(\"host\").is_none());\n    /// assert!(map.remove_bin(\"host\".to_string()).is_none());\n    /// assert!(map.remove_bin(\u0026(\"host\".to_string())).is_none());\n    ///\n    /// // Attempting to remove an invalid key string fails by not\n    /// // finding anything.\n    /// assert!(map.remove_bin(\"host{}-bin\").is_none());\n    /// assert!(map.remove_bin(\"host{}-bin\".to_string()).is_none());\n    /// assert!(map.remove_bin(\u0026(\"host{}-bin\".to_string())).is_none());\n    /// ```\n    pub fn remove_bin\u003cK\u003e(\u0026mut self, key: K) -\u003e Option\u003cMetadataValue\u003cBinary\u003e\u003e\n    where\n        K: AsMetadataKey\u003cBinary\u003e,\n    {\n        key.remove(self)\n    }\n\n    // pub(crate) fn merge(\u0026mut self, other: MetadataMap) {\n    //     self.headers.extend(other.headers);\n    // }\n}\n\n// ===== impl Iter =====\n\nimpl\u003c'a\u003e Iterator for Iter\u003c'a\u003e {\n    type Item = KeyAndValueRef\u003c'a\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner.next().map(|item| {\n            let (name, value) = item;\n            if Ascii::is_valid_key(name.as_str()) {\n                KeyAndValueRef::Ascii(\n                    MetadataKey::unchecked_from_header_name_ref(name),\n                    MetadataValue::unchecked_from_header_value_ref(value),\n                )\n            } else {\n                KeyAndValueRef::Binary(\n                    MetadataKey::unchecked_from_header_name_ref(name),\n                    MetadataValue::unchecked_from_header_value_ref(value),\n                )\n            }\n        })\n    }\n\n    fn size_hint(\u0026self) -\u003e (usize, Option\u003cusize\u003e) {\n        self.inner.size_hint()\n    }\n}\n\n// ===== impl IterMut =====\n\nimpl\u003c'a\u003e Iterator for IterMut\u003c'a\u003e {\n    type Item = KeyAndMutValueRef\u003c'a\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner.next().map(|item| {\n            let (name, value) = item;\n            if Ascii::is_valid_key(name.as_str()) {\n                KeyAndMutValueRef::Ascii(\n                    MetadataKey::unchecked_from_header_name_ref(name),\n                    MetadataValue::unchecked_from_mut_header_value_ref(value),\n                )\n            } else {\n                KeyAndMutValueRef::Binary(\n                    MetadataKey::unchecked_from_header_name_ref(name),\n                    MetadataValue::unchecked_from_mut_header_value_ref(value),\n                )\n            }\n        })\n    }\n\n    fn size_hint(\u0026self) -\u003e (usize, Option\u003cusize\u003e) {\n        self.inner.size_hint()\n    }\n}\n\n// ===== impl ValueDrain =====\n\nimpl\u003cVE: ValueEncoding\u003e Iterator for ValueDrain\u003c'_, VE\u003e {\n    type Item = MetadataValue\u003cVE\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner\n            .next()\n            .map(MetadataValue::unchecked_from_header_value)\n    }\n\n    fn size_hint(\u0026self) -\u003e (usize, Option\u003cusize\u003e) {\n        self.inner.size_hint()\n    }\n}\n\n// ===== impl Keys =====\n\nimpl\u003c'a\u003e Iterator for Keys\u003c'a\u003e {\n    type Item = KeyRef\u003c'a\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner.next().map(|key| {\n            if Ascii::is_valid_key(key.as_str()) {\n                KeyRef::Ascii(MetadataKey::unchecked_from_header_name_ref(key))\n            } else {\n                KeyRef::Binary(MetadataKey::unchecked_from_header_name_ref(key))\n            }\n        })\n    }\n\n    fn size_hint(\u0026self) -\u003e (usize, Option\u003cusize\u003e) {\n        self.inner.size_hint()\n    }\n}\n\nimpl ExactSizeIterator for Keys\u003c'_\u003e {}\n\n// ===== impl Values ====\n\nimpl\u003c'a\u003e Iterator for Values\u003c'a\u003e {\n    type Item = ValueRef\u003c'a\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner.next().map(|item| {\n            let (name, value) = item;\n            if Ascii::is_valid_key(name.as_str()) {\n                ValueRef::Ascii(MetadataValue::unchecked_from_header_value_ref(value))\n            } else {\n                ValueRef::Binary(MetadataValue::unchecked_from_header_value_ref(value))\n            }\n        })\n    }\n\n    fn size_hint(\u0026self) -\u003e (usize, Option\u003cusize\u003e) {\n        self.inner.size_hint()\n    }\n}\n\n// ===== impl Values ====\n\nimpl\u003c'a\u003e Iterator for ValuesMut\u003c'a\u003e {\n    type Item = ValueRefMut\u003c'a\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner.next().map(|item| {\n            let (name, value) = item;\n            if Ascii::is_valid_key(name.as_str()) {\n                ValueRefMut::Ascii(MetadataValue::unchecked_from_mut_header_value_ref(value))\n            } else {\n                ValueRefMut::Binary(MetadataValue::unchecked_from_mut_header_value_ref(value))\n            }\n        })\n    }\n\n    fn size_hint(\u0026self) -\u003e (usize, Option\u003cusize\u003e) {\n        self.inner.size_hint()\n    }\n}\n\n// ===== impl ValueIter =====\n\nimpl\u003c'a, VE: ValueEncoding\u003e Iterator for ValueIter\u003c'a, VE\u003e\nwhere\n    VE: 'a,\n{\n    type Item = \u0026'a MetadataValue\u003cVE\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        match self.inner {\n            Some(ref mut inner) =\u003e inner\n                .next()\n                .map(MetadataValue::unchecked_from_header_value_ref),\n            None =\u003e None,\n        }\n    }\n\n    fn size_hint(\u0026self) -\u003e (usize, Option\u003cusize\u003e) {\n        match self.inner {\n            Some(ref inner) =\u003e inner.size_hint(),\n            None =\u003e (0, Some(0)),\n        }\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e DoubleEndedIterator for ValueIter\u003c'a, VE\u003e\nwhere\n    VE: 'a,\n{\n    fn next_back(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        match self.inner {\n            Some(ref mut inner) =\u003e inner\n                .next_back()\n                .map(MetadataValue::unchecked_from_header_value_ref),\n            None =\u003e None,\n        }\n    }\n}\n\n// ===== impl ValueIterMut =====\n\nimpl\u003c'a, VE: ValueEncoding\u003e Iterator for ValueIterMut\u003c'a, VE\u003e\nwhere\n    VE: 'a,\n{\n    type Item = \u0026'a mut MetadataValue\u003cVE\u003e;\n\n    fn next(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner\n            .next()\n            .map(MetadataValue::unchecked_from_mut_header_value_ref)\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e DoubleEndedIterator for ValueIterMut\u003c'a, VE\u003e\nwhere\n    VE: 'a,\n{\n    fn next_back(\u0026mut self) -\u003e Option\u003cSelf::Item\u003e {\n        self.inner\n            .next_back()\n            .map(MetadataValue::unchecked_from_mut_header_value_ref)\n    }\n}\n\n// ===== impl Entry =====\n\nimpl\u003c'a, VE: ValueEncoding\u003e Entry\u003c'a, VE\u003e {\n    /// Ensures a value is in the entry by inserting the default if empty.\n    ///\n    /// Returns a mutable reference to the **first** value in the entry.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map: MetadataMap = MetadataMap::default();\n    ///\n    /// let keys = \u0026[\n    ///     \"content-length\",\n    ///     \"x-hello\",\n    ///     \"Content-Length\",\n    ///     \"x-world\",\n    /// ];\n    ///\n    /// for \u0026key in keys {\n    ///     let counter = map.entry(key)\n    ///         .expect(\"valid key names\")\n    ///         .or_insert(\"\".parse().unwrap());\n    ///     *counter = format!(\"{}{}\", counter.to_str().unwrap(), \"1\").parse().unwrap();\n    /// }\n    ///\n    /// assert_eq!(map.get(\"content-length\").unwrap(), \"11\");\n    /// assert_eq!(map.get(\"x-hello\").unwrap(), \"1\");\n    /// ```\n    pub fn or_insert(self, default: MetadataValue\u003cVE\u003e) -\u003e \u0026'a mut MetadataValue\u003cVE\u003e {\n        use self::Entry::*;\n\n        match self {\n            Occupied(e) =\u003e e.into_mut(),\n            Vacant(e) =\u003e e.insert(default),\n        }\n    }\n\n    /// Ensures a value is in the entry by inserting the result of the default\n    /// function if empty.\n    ///\n    /// The default function is not called if the entry exists in the map.\n    /// Returns a mutable reference to the **first** value in the entry.\n    ///\n    /// # Examples\n    ///\n    /// Basic usage.\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// let res = map.entry(\"x-hello\").unwrap()\n    ///     .or_insert_with(|| \"world\".parse().unwrap());\n    ///\n    /// assert_eq!(res, \"world\");\n    /// ```\n    ///\n    /// The default function is not called if the entry exists in the map.\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    ///\n    /// let res = map.entry(\"host\")\n    ///     .expect(\"host is a valid string\")\n    ///     .or_insert_with(|| unreachable!());\n    ///\n    ///\n    /// assert_eq!(res, \"world\");\n    /// ```\n    pub fn or_insert_with\u003cF: FnOnce() -\u003e MetadataValue\u003cVE\u003e\u003e(\n        self,\n        default: F,\n    ) -\u003e \u0026'a mut MetadataValue\u003cVE\u003e {\n        use self::Entry::*;\n\n        match self {\n            Occupied(e) =\u003e e.into_mut(),\n            Vacant(e) =\u003e e.insert(default()),\n        }\n    }\n\n    /// Returns a reference to the entry's key\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// assert_eq!(map.entry(\"x-hello\").unwrap().key(), \"x-hello\");\n    /// ```\n    pub fn key(\u0026self) -\u003e \u0026MetadataKey\u003cVE\u003e {\n        use self::Entry::*;\n\n        MetadataKey::unchecked_from_header_name_ref(match *self {\n            Vacant(ref e) =\u003e e.inner.key(),\n            Occupied(ref e) =\u003e e.inner.key(),\n        })\n    }\n}\n\n// ===== impl VacantEntry =====\n\nimpl\u003c'a, VE: ValueEncoding\u003e VacantEntry\u003c'a, VE\u003e {\n    /// Returns a reference to the entry's key\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// assert_eq!(map.entry(\"x-hello\").unwrap().key(), \"x-hello\");\n    /// ```\n    pub fn key(\u0026self) -\u003e \u0026MetadataKey\u003cVE\u003e {\n        MetadataKey::unchecked_from_header_name_ref(self.inner.key())\n    }\n\n    /// Take ownership of the key\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// if let Entry::Vacant(v) = map.entry(\"x-hello\").unwrap() {\n    ///     assert_eq!(v.into_key().as_str(), \"x-hello\");\n    /// }\n    /// ```\n    pub fn into_key(self) -\u003e MetadataKey\u003cVE\u003e {\n        MetadataKey::unchecked_from_header_name(self.inner.into_key())\n    }\n\n    /// Insert the value into the entry.\n    ///\n    /// The value will be associated with this entry's key. A mutable reference\n    /// to the inserted value will be returned.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// if let Entry::Vacant(v) = map.entry(\"x-hello\").unwrap() {\n    ///     v.insert(\"world\".parse().unwrap());\n    /// }\n    ///\n    /// assert_eq!(map.get(\"x-hello\").unwrap(), \"world\");\n    /// ```\n    pub fn insert(self, value: MetadataValue\u003cVE\u003e) -\u003e \u0026'a mut MetadataValue\u003cVE\u003e {\n        MetadataValue::unchecked_from_mut_header_value_ref(self.inner.insert(value.inner))\n    }\n\n    /// Insert the value into the entry.\n    ///\n    /// The value will be associated with this entry's key. The new\n    /// `OccupiedEntry` is returned, allowing for further manipulation.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    ///\n    /// if let Entry::Vacant(v) = map.entry(\"x-hello\").unwrap() {\n    ///     let mut e = v.insert_entry(\"world\".parse().unwrap());\n    ///     e.insert(\"world2\".parse().unwrap());\n    /// }\n    ///\n    /// assert_eq!(map.get(\"x-hello\").unwrap(), \"world2\");\n    /// ```\n    pub fn insert_entry(self, value: MetadataValue\u003cVE\u003e) -\u003e OccupiedEntry\u003c'a, Ascii\u003e {\n        OccupiedEntry {\n            inner: self.inner.insert_entry(value.inner),\n            phantom: PhantomData,\n        }\n    }\n}\n\n// ===== impl OccupiedEntry =====\n\nimpl\u003c'a, VE: ValueEncoding\u003e OccupiedEntry\u003c'a, VE\u003e {\n    /// Returns a reference to the entry's key.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(e) = map.entry(\"host\").unwrap() {\n    ///     assert_eq!(\"host\", e.key());\n    /// }\n    /// ```\n    pub fn key(\u0026self) -\u003e \u0026MetadataKey\u003cVE\u003e {\n        MetadataKey::unchecked_from_header_name_ref(self.inner.key())\n    }\n\n    /// Get a reference to the first value in the entry.\n    ///\n    /// Values are stored in insertion order.\n    ///\n    /// # Panics\n    ///\n    /// `get` panics if there are no values associated with the entry.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"hello.world\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(mut e) = map.entry(\"host\").unwrap() {\n    ///     assert_eq!(e.get(), \u0026\"hello.world\");\n    ///\n    ///     e.append(\"hello.earth\".parse().unwrap());\n    ///\n    ///     assert_eq!(e.get(), \u0026\"hello.world\");\n    /// }\n    /// ```\n    pub fn get(\u0026self) -\u003e \u0026MetadataValue\u003cVE\u003e {\n        MetadataValue::unchecked_from_header_value_ref(self.inner.get())\n    }\n\n    /// Get a mutable reference to the first value in the entry.\n    ///\n    /// Values are stored in insertion order.\n    ///\n    /// # Panics\n    ///\n    /// `get_mut` panics if there are no values associated with the entry.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    /// map.insert(\"host\", \"hello.world\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(mut e) = map.entry(\"host\").unwrap() {\n    ///     e.get_mut().set_sensitive(true);\n    ///     assert_eq!(e.get(), \u0026\"hello.world\");\n    ///     assert!(e.get().is_sensitive());\n    /// }\n    /// ```\n    pub fn get_mut(\u0026mut self) -\u003e \u0026mut MetadataValue\u003cVE\u003e {\n        MetadataValue::unchecked_from_mut_header_value_ref(self.inner.get_mut())\n    }\n\n    /// Converts the `OccupiedEntry` into a mutable reference to the **first**\n    /// value.\n    ///\n    /// The lifetime of the returned reference is bound to the original map.\n    ///\n    /// # Panics\n    ///\n    /// `into_mut` panics if there are no values associated with the entry.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    /// map.insert(\"host\", \"hello.world\".parse().unwrap());\n    /// map.append(\"host\", \"hello.earth\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(e) = map.entry(\"host\").unwrap() {\n    ///     e.into_mut().set_sensitive(true);\n    /// }\n    ///\n    /// assert!(map.get(\"host\").unwrap().is_sensitive());\n    /// ```\n    pub fn into_mut(self) -\u003e \u0026'a mut MetadataValue\u003cVE\u003e {\n        MetadataValue::unchecked_from_mut_header_value_ref(self.inner.into_mut())\n    }\n\n    /// Sets the value of the entry.\n    ///\n    /// All previous values associated with the entry are removed and the first\n    /// one is returned. See `insert_mult` for an API that returns all values.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"hello.world\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(mut e) = map.entry(\"host\").unwrap() {\n    ///     let mut prev = e.insert(\"earth\".parse().unwrap());\n    ///     assert_eq!(\"hello.world\", prev);\n    /// }\n    ///\n    /// assert_eq!(\"earth\", map.get(\"host\").unwrap());\n    /// ```\n    pub fn insert(\u0026mut self, value: MetadataValue\u003cVE\u003e) -\u003e MetadataValue\u003cVE\u003e {\n        let header_value = self.inner.insert(value.inner);\n        MetadataValue::unchecked_from_header_value(header_value)\n    }\n\n    /// Sets the value of the entry.\n    ///\n    /// This function does the same as `insert` except it returns an iterator\n    /// that yields all values previously associated with the key.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    /// map.append(\"host\", \"world2\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(mut e) = map.entry(\"host\").unwrap() {\n    ///     let mut prev = e.insert_mult(\"earth\".parse().unwrap());\n    ///     assert_eq!(\"world\", prev.next().unwrap());\n    ///     assert_eq!(\"world2\", prev.next().unwrap());\n    ///     assert!(prev.next().is_none());\n    /// }\n    ///\n    /// assert_eq!(\"earth\", map.get(\"host\").unwrap());\n    /// ```\n    pub fn insert_mult(\u0026mut self, value: MetadataValue\u003cVE\u003e) -\u003e ValueDrain\u003c'_, VE\u003e {\n        ValueDrain {\n            inner: self.inner.insert_mult(value.inner),\n            phantom: PhantomData,\n        }\n    }\n\n    /// Insert the value into the entry.\n    ///\n    /// The new value is appended to the end of the entry's value list. All\n    /// previous values associated with the entry are retained.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(mut e) = map.entry(\"host\").unwrap() {\n    ///     e.append(\"earth\".parse().unwrap());\n    /// }\n    ///\n    /// let values = map.get_all(\"host\");\n    /// let mut i = values.iter();\n    /// assert_eq!(\"world\", *i.next().unwrap());\n    /// assert_eq!(\"earth\", *i.next().unwrap());\n    /// ```\n    pub fn append(\u0026mut self, value: MetadataValue\u003cVE\u003e) {\n        self.inner.append(value.inner)\n    }\n\n    /// Remove the entry from the map.\n    ///\n    /// All values associated with the entry are removed and the first one is\n    /// returned. See `remove_entry_mult` for an API that returns all values.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(e) = map.entry(\"host\").unwrap() {\n    ///     let mut prev = e.remove();\n    ///     assert_eq!(\"world\", prev);\n    /// }\n    ///\n    /// assert!(!map.contains_key(\"host\"));\n    /// ```\n    pub fn remove(self) -\u003e MetadataValue\u003cVE\u003e {\n        let value = self.inner.remove();\n        MetadataValue::unchecked_from_header_value(value)\n    }\n\n    /// Remove the entry from the map.\n    ///\n    /// The key and all values associated with the entry are removed and the\n    /// first one is returned. See `remove_entry_mult` for an API that returns\n    /// all values.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(e) = map.entry(\"host\").unwrap() {\n    ///     let (key, mut prev) = e.remove_entry();\n    ///     assert_eq!(\"host\", key.as_str());\n    ///     assert_eq!(\"world\", prev);\n    /// }\n    ///\n    /// assert!(!map.contains_key(\"host\"));\n    /// ```\n    pub fn remove_entry(self) -\u003e (MetadataKey\u003cVE\u003e, MetadataValue\u003cVE\u003e) {\n        let (name, value) = self.inner.remove_entry();\n        (\n            MetadataKey::unchecked_from_header_name(name),\n            MetadataValue::unchecked_from_header_value(value),\n        )\n    }\n\n    /// Remove the entry from the map.\n    ///\n    /// The key and all values associated with the entry are removed and\n    /// returned.\n    pub fn remove_entry_mult(self) -\u003e (MetadataKey\u003cVE\u003e, ValueDrain\u003c'a, VE\u003e) {\n        let (name, value_drain) = self.inner.remove_entry_mult();\n        (\n            MetadataKey::unchecked_from_header_name(name),\n            ValueDrain {\n                inner: value_drain,\n                phantom: PhantomData,\n            },\n        )\n    }\n\n    /// Returns an iterator visiting all values associated with the entry.\n    ///\n    /// Values are iterated in insertion order.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    /// map.append(\"host\", \"earth\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(e) = map.entry(\"host\").unwrap() {\n    ///     let mut iter = e.iter();\n    ///     assert_eq!(\u0026\"world\", iter.next().unwrap());\n    ///     assert_eq!(\u0026\"earth\", iter.next().unwrap());\n    ///     assert!(iter.next().is_none());\n    /// }\n    /// ```\n    pub fn iter(\u0026self) -\u003e ValueIter\u003c'_, VE\u003e {\n        ValueIter {\n            inner: Some(self.inner.iter()),\n            phantom: PhantomData,\n        }\n    }\n\n    /// Returns an iterator mutably visiting all values associated with the\n    /// entry.\n    ///\n    /// Values are iterated in insertion order.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::default();\n    /// map.insert(\"host\", \"world\".parse().unwrap());\n    /// map.append(\"host\", \"earth\".parse().unwrap());\n    ///\n    /// if let Entry::Occupied(mut e) = map.entry(\"host\").unwrap() {\n    ///     for e in e.iter_mut() {\n    ///         e.set_sensitive(true);\n    ///     }\n    /// }\n    ///\n    /// let mut values = map.get_all(\"host\");\n    /// let mut i = values.iter();\n    /// assert!(i.next().unwrap().is_sensitive());\n    /// assert!(i.next().unwrap().is_sensitive());\n    /// ```\n    pub fn iter_mut(\u0026mut self) -\u003e ValueIterMut\u003c'_, VE\u003e {\n        ValueIterMut {\n            inner: self.inner.iter_mut(),\n            phantom: PhantomData,\n        }\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e IntoIterator for OccupiedEntry\u003c'a, VE\u003e\nwhere\n    VE: 'a,\n{\n    type Item = \u0026'a mut MetadataValue\u003cVE\u003e;\n    type IntoIter = ValueIterMut\u003c'a, VE\u003e;\n\n    fn into_iter(self) -\u003e ValueIterMut\u003c'a, VE\u003e {\n        ValueIterMut {\n            inner: self.inner.into_iter(),\n            phantom: PhantomData,\n        }\n    }\n}\n\nimpl\u003c'a, 'b: 'a, VE: ValueEncoding\u003e IntoIterator for \u0026'b OccupiedEntry\u003c'a, VE\u003e {\n    type Item = \u0026'a MetadataValue\u003cVE\u003e;\n    type IntoIter = ValueIter\u003c'a, VE\u003e;\n\n    fn into_iter(self) -\u003e ValueIter\u003c'a, VE\u003e {\n        self.iter()\n    }\n}\n\nimpl\u003c'a, 'b: 'a, VE: ValueEncoding\u003e IntoIterator for \u0026'b mut OccupiedEntry\u003c'a, VE\u003e {\n    type Item = \u0026'a mut MetadataValue\u003cVE\u003e;\n    type IntoIter = ValueIterMut\u003c'a, VE\u003e;\n\n    fn into_iter(self) -\u003e ValueIterMut\u003c'a, VE\u003e {\n        self.iter_mut()\n    }\n}\n\n// ===== impl GetAll =====\n\nimpl\u003c'a, VE: ValueEncoding\u003e GetAll\u003c'a, VE\u003e {\n    /// Returns an iterator visiting all values associated with the entry.\n    ///\n    /// Values are iterated in insertion order.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut map = MetadataMap::new();\n    /// map.insert(\"x-host\", \"hello.world\".parse().unwrap());\n    /// map.append(\"x-host\", \"hello.earth\".parse().unwrap());\n    ///\n    /// let values = map.get_all(\"x-host\");\n    /// let mut iter = values.iter();\n    /// assert_eq!(\u0026\"hello.world\", iter.next().unwrap());\n    /// assert_eq!(\u0026\"hello.earth\", iter.next().unwrap());\n    /// assert!(iter.next().is_none());\n    /// ```\n    pub fn iter(\u0026self) -\u003e ValueIter\u003c'a, VE\u003e {\n        ValueIter {\n            inner: self.inner.as_ref().map(|inner| inner.iter()),\n            phantom: PhantomData,\n        }\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq for GetAll\u003c'_, VE\u003e {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        self.inner.iter().eq(other.inner.iter())\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e IntoIterator for GetAll\u003c'a, VE\u003e\nwhere\n    VE: 'a,\n{\n    type Item = \u0026'a MetadataValue\u003cVE\u003e;\n    type IntoIter = ValueIter\u003c'a, VE\u003e;\n\n    fn into_iter(self) -\u003e ValueIter\u003c'a, VE\u003e {\n        ValueIter {\n            inner: self.inner.map(|inner| inner.into_iter()),\n            phantom: PhantomData,\n        }\n    }\n}\n\nimpl\u003c'a, 'b: 'a, VE: ValueEncoding\u003e IntoIterator for \u0026'b GetAll\u003c'a, VE\u003e {\n    type Item = \u0026'a MetadataValue\u003cVE\u003e;\n    type IntoIter = ValueIter\u003c'a, VE\u003e;\n\n    fn into_iter(self) -\u003e ValueIter\u003c'a, VE\u003e {\n        ValueIter {\n            inner: self.inner.as_ref().map(|inner| inner.into_iter()),\n            phantom: PhantomData,\n        }\n    }\n}\n\n// ===== impl IntoMetadataKey / AsMetadataKey =====\n\nmod into_metadata_key {\n    use super::{MetadataMap, MetadataValue, ValueEncoding};\n    use crate::metadata::key::MetadataKey;\n\n    /// A marker trait used to identify values that can be used as insert keys\n    /// to a `MetadataMap`.\n    pub trait IntoMetadataKey\u003cVE: ValueEncoding\u003e: Sealed\u003cVE\u003e {}\n\n    // All methods are on this pub(super) trait, instead of `IntoMetadataKey`,\n    // so that they aren't publicly exposed to the world.\n    //\n    // Being on the `IntoMetadataKey` trait would mean users could call\n    // `\"host\".insert(\u0026mut map, \"localhost\")`.\n    //\n    // Ultimately, this allows us to adjust the signatures of these methods\n    // without breaking any external crate.\n    pub trait Sealed\u003cVE: ValueEncoding\u003e {\n        #[doc(hidden)]\n        fn insert(self, map: \u0026mut MetadataMap, val: MetadataValue\u003cVE\u003e)\n        -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e;\n\n        #[doc(hidden)]\n        fn append(self, map: \u0026mut MetadataMap, val: MetadataValue\u003cVE\u003e) -\u003e bool;\n    }\n\n    // ==== impls ====\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for MetadataKey\u003cVE\u003e {\n        #[doc(hidden)]\n        #[inline]\n        fn insert(\n            self,\n            map: \u0026mut MetadataMap,\n            val: MetadataValue\u003cVE\u003e,\n        ) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .insert(self.inner, val.inner)\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn append(self, map: \u0026mut MetadataMap, val: MetadataValue\u003cVE\u003e) -\u003e bool {\n            map.headers.append(self.inner, val.inner)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e IntoMetadataKey\u003cVE\u003e for MetadataKey\u003cVE\u003e {}\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for \u0026MetadataKey\u003cVE\u003e {\n        #[doc(hidden)]\n        #[inline]\n        fn insert(\n            self,\n            map: \u0026mut MetadataMap,\n            val: MetadataValue\u003cVE\u003e,\n        ) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .insert(\u0026self.inner, val.inner)\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n        #[doc(hidden)]\n        #[inline]\n        fn append(self, map: \u0026mut MetadataMap, val: MetadataValue\u003cVE\u003e) -\u003e bool {\n            map.headers.append(\u0026self.inner, val.inner)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e IntoMetadataKey\u003cVE\u003e for \u0026MetadataKey\u003cVE\u003e {}\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for \u0026'static str {\n        #[doc(hidden)]\n        #[inline]\n        fn insert(\n            self,\n            map: \u0026mut MetadataMap,\n            val: MetadataValue\u003cVE\u003e,\n        ) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            // Perform name validation\n            let key = MetadataKey::\u003cVE\u003e::from_static(self);\n\n            map.headers\n                .insert(key.inner, val.inner)\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n        #[doc(hidden)]\n        #[inline]\n        fn append(self, map: \u0026mut MetadataMap, val: MetadataValue\u003cVE\u003e) -\u003e bool {\n            // Perform name validation\n            let key = MetadataKey::\u003cVE\u003e::from_static(self);\n\n            map.headers.append(key.inner, val.inner)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e IntoMetadataKey\u003cVE\u003e for \u0026'static str {}\n}\n\nmod as_metadata_key {\n    use super::{MetadataMap, MetadataValue, ValueEncoding};\n    use crate::metadata::key::{InvalidMetadataKey, MetadataKey};\n    use http::header::{Entry, GetAll, HeaderValue};\n\n    /// A marker trait used to identify values that can be used as search keys\n    /// to a `MetadataMap`.\n    pub trait AsMetadataKey\u003cVE: ValueEncoding\u003e: Sealed\u003cVE\u003e {}\n\n    // All methods are on this pub(super) trait, instead of `AsMetadataKey`,\n    // so that they aren't publicly exposed to the world.\n    //\n    // Being on the `AsMetadataKey` trait would mean users could call\n    // `\"host\".find(\u0026map)`.\n    //\n    // Ultimately, this allows us to adjust the signatures of these methods\n    // without breaking any external crate.\n    pub trait Sealed\u003cVE: ValueEncoding\u003e {\n        #[doc(hidden)]\n        fn get(self, map: \u0026MetadataMap) -\u003e Option\u003c\u0026MetadataValue\u003cVE\u003e\u003e;\n\n        #[doc(hidden)]\n        fn get_mut(self, map: \u0026mut MetadataMap) -\u003e Option\u003c\u0026mut MetadataValue\u003cVE\u003e\u003e;\n\n        #[doc(hidden)]\n        fn get_all(self, map: \u0026MetadataMap) -\u003e Option\u003cGetAll\u003c'_, HeaderValue\u003e\u003e;\n\n        #[doc(hidden)]\n        fn entry(self, map: \u0026mut MetadataMap)\n        -\u003e Result\u003cEntry\u003c'_, HeaderValue\u003e, InvalidMetadataKey\u003e;\n\n        #[doc(hidden)]\n        fn remove(self, map: \u0026mut MetadataMap) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e;\n    }\n\n    // ==== impls ====\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for MetadataKey\u003cVE\u003e {\n        #[doc(hidden)]\n        #[inline]\n        fn get(self, map: \u0026MetadataMap) -\u003e Option\u003c\u0026MetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .get(self.inner)\n                .map(MetadataValue::unchecked_from_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_mut(self, map: \u0026mut MetadataMap) -\u003e Option\u003c\u0026mut MetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .get_mut(self.inner)\n                .map(MetadataValue::unchecked_from_mut_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_all(self, map: \u0026MetadataMap) -\u003e Option\u003cGetAll\u003c'_, HeaderValue\u003e\u003e {\n            Some(map.headers.get_all(self.inner))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn entry(\n            self,\n            map: \u0026mut MetadataMap,\n        ) -\u003e Result\u003cEntry\u003c'_, HeaderValue\u003e, InvalidMetadataKey\u003e {\n            Ok(map.headers.entry(self.inner))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn remove(self, map: \u0026mut MetadataMap) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .remove(self.inner)\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e AsMetadataKey\u003cVE\u003e for MetadataKey\u003cVE\u003e {}\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for \u0026MetadataKey\u003cVE\u003e {\n        #[doc(hidden)]\n        #[inline]\n        fn get(self, map: \u0026MetadataMap) -\u003e Option\u003c\u0026MetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .get(\u0026self.inner)\n                .map(MetadataValue::unchecked_from_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_mut(self, map: \u0026mut MetadataMap) -\u003e Option\u003c\u0026mut MetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .get_mut(\u0026self.inner)\n                .map(MetadataValue::unchecked_from_mut_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_all(self, map: \u0026MetadataMap) -\u003e Option\u003cGetAll\u003c'_, HeaderValue\u003e\u003e {\n            Some(map.headers.get_all(\u0026self.inner))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn entry(\n            self,\n            map: \u0026mut MetadataMap,\n        ) -\u003e Result\u003cEntry\u003c'_, HeaderValue\u003e, InvalidMetadataKey\u003e {\n            Ok(map.headers.entry(\u0026self.inner))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn remove(self, map: \u0026mut MetadataMap) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            map.headers\n                .remove(\u0026self.inner)\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e AsMetadataKey\u003cVE\u003e for \u0026MetadataKey\u003cVE\u003e {}\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for \u0026str {\n        #[doc(hidden)]\n        #[inline]\n        fn get(self, map: \u0026MetadataMap) -\u003e Option\u003c\u0026MetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            map.headers\n                .get(self)\n                .map(MetadataValue::unchecked_from_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_mut(self, map: \u0026mut MetadataMap) -\u003e Option\u003c\u0026mut MetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            map.headers\n                .get_mut(self)\n                .map(MetadataValue::unchecked_from_mut_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_all(self, map: \u0026MetadataMap) -\u003e Option\u003cGetAll\u003c'_, HeaderValue\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            Some(map.headers.get_all(self))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn entry(\n            self,\n            map: \u0026mut MetadataMap,\n        ) -\u003e Result\u003cEntry\u003c'_, HeaderValue\u003e, InvalidMetadataKey\u003e {\n            if !VE::is_valid_key(self) {\n                return Err(InvalidMetadataKey::new());\n            }\n\n            let key = http::header::HeaderName::from_bytes(self.as_bytes())\n                .map_err(|_| InvalidMetadataKey::new())?;\n            let entry = map.headers.entry(key);\n            Ok(entry)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn remove(self, map: \u0026mut MetadataMap) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            map.headers\n                .remove(self)\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e AsMetadataKey\u003cVE\u003e for \u0026str {}\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for String {\n        #[doc(hidden)]\n        #[inline]\n        fn get(self, map: \u0026MetadataMap) -\u003e Option\u003c\u0026MetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self.as_str()) {\n                return None;\n            }\n            map.headers\n                .get(self.as_str())\n                .map(MetadataValue::unchecked_from_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_mut(self, map: \u0026mut MetadataMap) -\u003e Option\u003c\u0026mut MetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self.as_str()) {\n                return None;\n            }\n            map.headers\n                .get_mut(self.as_str())\n                .map(MetadataValue::unchecked_from_mut_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_all(self, map: \u0026MetadataMap) -\u003e Option\u003cGetAll\u003c'_, HeaderValue\u003e\u003e {\n            if !VE::is_valid_key(self.as_str()) {\n                return None;\n            }\n            Some(map.headers.get_all(self.as_str()))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn entry(\n            self,\n            map: \u0026mut MetadataMap,\n        ) -\u003e Result\u003cEntry\u003c'_, HeaderValue\u003e, InvalidMetadataKey\u003e {\n            if !VE::is_valid_key(self.as_str()) {\n                return Err(InvalidMetadataKey::new());\n            }\n\n            let key = http::header::HeaderName::from_bytes(self.as_bytes())\n                .map_err(|_| InvalidMetadataKey::new())?;\n            Ok(map.headers.entry(key))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn remove(self, map: \u0026mut MetadataMap) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self.as_str()) {\n                return None;\n            }\n            map.headers\n                .remove(self.as_str())\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e AsMetadataKey\u003cVE\u003e for String {}\n\n    impl\u003cVE: ValueEncoding\u003e Sealed\u003cVE\u003e for \u0026String {\n        #[doc(hidden)]\n        #[inline]\n        fn get(self, map: \u0026MetadataMap) -\u003e Option\u003c\u0026MetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            map.headers\n                .get(self.as_str())\n                .map(MetadataValue::unchecked_from_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_mut(self, map: \u0026mut MetadataMap) -\u003e Option\u003c\u0026mut MetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            map.headers\n                .get_mut(self.as_str())\n                .map(MetadataValue::unchecked_from_mut_header_value_ref)\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn get_all(self, map: \u0026MetadataMap) -\u003e Option\u003cGetAll\u003c'_, HeaderValue\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            Some(map.headers.get_all(self.as_str()))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn entry(\n            self,\n            map: \u0026mut MetadataMap,\n        ) -\u003e Result\u003cEntry\u003c'_, HeaderValue\u003e, InvalidMetadataKey\u003e {\n            if !VE::is_valid_key(self) {\n                return Err(InvalidMetadataKey::new());\n            }\n\n            let key = http::header::HeaderName::from_bytes(self.as_bytes())\n                .map_err(|_| InvalidMetadataKey::new())?;\n            Ok(map.headers.entry(key))\n        }\n\n        #[doc(hidden)]\n        #[inline]\n        fn remove(self, map: \u0026mut MetadataMap) -\u003e Option\u003cMetadataValue\u003cVE\u003e\u003e {\n            if !VE::is_valid_key(self) {\n                return None;\n            }\n            map.headers\n                .remove(self.as_str())\n                .map(MetadataValue::unchecked_from_header_value)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e AsMetadataKey\u003cVE\u003e for \u0026String {}\n}\n\nmod as_encoding_agnostic_metadata_key {\n    use super::{MetadataMap, ValueEncoding};\n    use crate::metadata::key::MetadataKey;\n\n    /// A marker trait used to identify values that can be used as search keys\n    /// to a `MetadataMap`, for operations that don't expose the actual value.\n    pub trait AsEncodingAgnosticMetadataKey: Sealed {}\n\n    // All methods are on this pub(super) trait, instead of\n    // `AsEncodingAgnosticMetadataKey`, so that they aren't publicly exposed to\n    // the world.\n    //\n    // Being on the `AsEncodingAgnosticMetadataKey` trait would mean users could\n    // call `\"host\".contains_key(\u0026map)`.\n    //\n    // Ultimately, this allows us to adjust the signatures of these methods\n    // without breaking any external crate.\n    pub trait Sealed {\n        #[doc(hidden)]\n        fn contains_key(\u0026self, map: \u0026MetadataMap) -\u003e bool;\n    }\n\n    // ==== impls ====\n\n    impl\u003cVE: ValueEncoding\u003e Sealed for MetadataKey\u003cVE\u003e {\n        #[doc(hidden)]\n        #[inline]\n        fn contains_key(\u0026self, map: \u0026MetadataMap) -\u003e bool {\n            map.headers.contains_key(\u0026self.inner)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e AsEncodingAgnosticMetadataKey for MetadataKey\u003cVE\u003e {}\n\n    impl\u003cVE: ValueEncoding\u003e Sealed for \u0026MetadataKey\u003cVE\u003e {\n        #[doc(hidden)]\n        #[inline]\n        fn contains_key(\u0026self, map: \u0026MetadataMap) -\u003e bool {\n            map.headers.contains_key(\u0026self.inner)\n        }\n    }\n\n    impl\u003cVE: ValueEncoding\u003e AsEncodingAgnosticMetadataKey for \u0026MetadataKey\u003cVE\u003e {}\n\n    impl Sealed for \u0026str {\n        #[doc(hidden)]\n        #[inline]\n        fn contains_key(\u0026self, map: \u0026MetadataMap) -\u003e bool {\n            map.headers.contains_key(*self)\n        }\n    }\n\n    impl AsEncodingAgnosticMetadataKey for \u0026str {}\n\n    impl Sealed for String {\n        #[doc(hidden)]\n        #[inline]\n        fn contains_key(\u0026self, map: \u0026MetadataMap) -\u003e bool {\n            map.headers.contains_key(self.as_str())\n        }\n    }\n\n    impl AsEncodingAgnosticMetadataKey for String {}\n\n    impl Sealed for \u0026String {\n        #[doc(hidden)]\n        #[inline]\n        fn contains_key(\u0026self, map: \u0026MetadataMap) -\u003e bool {\n            map.headers.contains_key(self.as_str())\n        }\n    }\n\n    impl AsEncodingAgnosticMetadataKey for \u0026String {}\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_from_headers_takes_http_headers() {\n        let mut http_map = http::HeaderMap::new();\n        http_map.insert(\"x-host\", \"example.com\".parse().unwrap());\n\n        let map = MetadataMap::from_headers(http_map);\n\n        assert_eq!(map.get(\"x-host\").unwrap(), \"example.com\");\n    }\n\n    #[test]\n    fn test_to_headers_encoding() {\n        use crate::status::Status;\n        let special_char_message = \"Beyond 100% ascii \\t\\n\\r\";\n        let s1 = Status::unknown(special_char_message);\n\n        assert_eq!(s1.message(), special_char_message);\n\n        let s1_map = s1.to_header_map().unwrap();\n        let s2 = Status::from_header_map(\u0026s1_map).unwrap();\n\n        assert_eq!(s1.message(), s2.message());\n\n        assert!(\n            s1_map\n                .get(\"grpc-message\")\n                .unwrap()\n                .to_str()\n                .unwrap()\n                .starts_with(\"Beyond%20100%25%20ascii\"),\n            \"Percent sign or other character isn't encoded as desired: {:?}\",\n            s1_map.get(\"grpc-message\")\n        );\n    }\n\n    #[test]\n    fn test_iter_categorizes_ascii_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n        map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n\n        let mut found_x_word = false;\n        for key_and_value in map.iter() {\n            if let KeyAndValueRef::Ascii(key, _value) = key_and_value {\n                if key.as_str() == \"x-word\" {\n                    found_x_word = true;\n                } else {\n                    panic!(\"Unexpected key\");\n                }\n            }\n        }\n        assert!(found_x_word);\n    }\n\n    #[test]\n    fn test_iter_categorizes_binary_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n\n        let mut found_x_word_bin = false;\n        for key_and_value in map.iter() {\n            if let KeyAndValueRef::Binary(key, _value) = key_and_value {\n                if key.as_str() == \"x-word-bin\" {\n                    found_x_word_bin = true;\n                } else {\n                    panic!(\"Unexpected key\");\n                }\n            }\n        }\n        assert!(found_x_word_bin);\n    }\n\n    #[test]\n    fn test_iter_mut_categorizes_ascii_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n        map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n\n        let mut found_x_word = false;\n        for key_and_value in map.iter_mut() {\n            if let KeyAndMutValueRef::Ascii(key, _value) = key_and_value {\n                if key.as_str() == \"x-word\" {\n                    found_x_word = true;\n                } else {\n                    panic!(\"Unexpected key\");\n                }\n            }\n        }\n        assert!(found_x_word);\n    }\n\n    #[test]\n    fn test_iter_mut_categorizes_binary_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n\n        let mut found_x_word_bin = false;\n        for key_and_value in map.iter_mut() {\n            if let KeyAndMutValueRef::Binary(key, _value) = key_and_value {\n                if key.as_str() == \"x-word-bin\" {\n                    found_x_word_bin = true;\n                } else {\n                    panic!(\"Unexpected key\");\n                }\n            }\n        }\n        assert!(found_x_word_bin);\n    }\n\n    #[test]\n    fn test_keys_categorizes_ascii_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n        map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n\n        let mut found_x_word = false;\n        for key in map.keys() {\n            if let KeyRef::Ascii(key) = key {\n                if key.as_str() == \"x-word\" {\n                    found_x_word = true;\n                } else {\n                    panic!(\"Unexpected key\");\n                }\n            }\n        }\n        assert!(found_x_word);\n    }\n\n    #[test]\n    fn test_keys_categorizes_binary_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n\n        let mut found_x_number_bin = false;\n        for key in map.keys() {\n            if let KeyRef::Binary(key) = key {\n                if key.as_str() == \"x-number-bin\" {\n                    found_x_number_bin = true;\n                } else {\n                    panic!(\"Unexpected key\");\n                }\n            }\n        }\n        assert!(found_x_number_bin);\n    }\n\n    #[test]\n    fn test_values_categorizes_ascii_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n        map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n\n        let mut found_x_word = false;\n        for value in map.values() {\n            if let ValueRef::Ascii(value) = value {\n                if *value == \"hello\" {\n                    found_x_word = true;\n                } else {\n                    panic!(\"Unexpected key\");\n                }\n            }\n        }\n        assert!(found_x_word);\n    }\n\n    #[test]\n    fn test_values_categorizes_binary_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n\n        let mut found_x_word_bin = false;\n        for value_ref in map.values() {\n            if let ValueRef::Binary(value) = value_ref {\n                assert_eq!(*value, \"goodbye\");\n                found_x_word_bin = true;\n            }\n        }\n        assert!(found_x_word_bin);\n    }\n\n    #[test]\n    fn test_values_mut_categorizes_ascii_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n        map.insert_bin(\"x-number-bin\", MetadataValue::from_bytes(b\"123\"));\n\n        let mut found_x_word = false;\n        for value_ref in map.values_mut() {\n            if let ValueRefMut::Ascii(value) = value_ref {\n                assert_eq!(*value, \"hello\");\n                found_x_word = true;\n            }\n        }\n        assert!(found_x_word);\n    }\n\n    #[test]\n    fn test_values_mut_categorizes_binary_entries() {\n        let mut map = MetadataMap::new();\n\n        map.insert(\"x-word\", \"hello\".parse().unwrap());\n        map.append_bin(\"x-word-bin\", MetadataValue::from_bytes(b\"goodbye\"));\n\n        let mut found_x_word_bin = false;\n        for value in map.values_mut() {\n            if let ValueRefMut::Binary(value) = value {\n                assert_eq!(*value, \"goodbye\");\n                found_x_word_bin = true;\n            }\n        }\n        assert!(found_x_word_bin);\n    }\n\n    #[allow(dead_code)]\n    fn value_drain_is_send_sync() {\n        fn is_send_sync\u003cT: Send + Sync\u003e() {}\n\n        is_send_sync::\u003cIter\u003c'_\u003e\u003e();\n        is_send_sync::\u003cIterMut\u003c'_\u003e\u003e();\n\n        is_send_sync::\u003cValueDrain\u003c'_, Ascii\u003e\u003e();\n        is_send_sync::\u003cValueDrain\u003c'_, Binary\u003e\u003e();\n\n        is_send_sync::\u003cValueIterMut\u003c'_, Ascii\u003e\u003e();\n        is_send_sync::\u003cValueIterMut\u003c'_, Binary\u003e\u003e();\n    }\n}\n","traces":[{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":239,"address":[],"length":0,"stats":{"Line":33}},{"line":240,"address":[],"length":0,"stats":{"Line":33}},{"line":244,"address":[],"length":0,"stats":{"Line":3}},{"line":261,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":265,"address":[],"length":0,"stats":{"Line":2}},{"line":266,"address":[],"length":0,"stats":{"Line":22}},{"line":267,"address":[],"length":0,"stats":{"Line":20}},{"line":269,"address":[],"length":0,"stats":{"Line":2}},{"line":290,"address":[],"length":0,"stats":{"Line":33}},{"line":292,"address":[],"length":0,"stats":{"Line":33}},{"line":320,"address":[],"length":0,"stats":{"Line":2}},{"line":321,"address":[],"length":0,"stats":{"Line":4}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":403,"address":[],"length":0,"stats":{"Line":0}},{"line":404,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":467,"address":[],"length":0,"stats":{"Line":2}},{"line":471,"address":[],"length":0,"stats":{"Line":6}},{"line":503,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":541,"address":[],"length":0,"stats":{"Line":0}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":621,"address":[],"length":0,"stats":{"Line":0}},{"line":626,"address":[],"length":0,"stats":{"Line":0}},{"line":664,"address":[],"length":0,"stats":{"Line":0}},{"line":669,"address":[],"length":0,"stats":{"Line":0}},{"line":694,"address":[],"length":0,"stats":{"Line":0}},{"line":698,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":2}},{"line":728,"address":[],"length":0,"stats":{"Line":2}},{"line":757,"address":[],"length":0,"stats":{"Line":2}},{"line":759,"address":[],"length":0,"stats":{"Line":2}},{"line":789,"address":[],"length":0,"stats":{"Line":2}},{"line":791,"address":[],"length":0,"stats":{"Line":2}},{"line":820,"address":[],"length":0,"stats":{"Line":2}},{"line":822,"address":[],"length":0,"stats":{"Line":2}},{"line":850,"address":[],"length":0,"stats":{"Line":2}},{"line":852,"address":[],"length":0,"stats":{"Line":2}},{"line":896,"address":[],"length":0,"stats":{"Line":0}},{"line":900,"address":[],"length":0,"stats":{"Line":0}},{"line":941,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":955,"address":[],"length":0,"stats":{"Line":0}},{"line":956,"address":[],"length":0,"stats":{"Line":0}},{"line":957,"address":[],"length":0,"stats":{"Line":0}},{"line":958,"address":[],"length":0,"stats":{"Line":0}},{"line":959,"address":[],"length":0,"stats":{"Line":0}},{"line":961,"address":[],"length":0,"stats":{"Line":0}},{"line":962,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":966,"address":[],"length":0,"stats":{"Line":0}},{"line":1014,"address":[],"length":0,"stats":{"Line":11}},{"line":1018,"address":[],"length":0,"stats":{"Line":44}},{"line":1051,"address":[],"length":0,"stats":{"Line":6}},{"line":1059,"address":[],"length":0,"stats":{"Line":24}},{"line":1105,"address":[],"length":0,"stats":{"Line":0}},{"line":1109,"address":[],"length":0,"stats":{"Line":0}},{"line":1146,"address":[],"length":0,"stats":{"Line":9}},{"line":1150,"address":[],"length":0,"stats":{"Line":36}},{"line":1186,"address":[],"length":0,"stats":{"Line":0}},{"line":1190,"address":[],"length":0,"stats":{"Line":0}},{"line":1220,"address":[],"length":0,"stats":{"Line":0}},{"line":1224,"address":[],"length":0,"stats":{"Line":0}},{"line":1237,"address":[],"length":0,"stats":{"Line":7}},{"line":1238,"address":[],"length":0,"stats":{"Line":26}},{"line":1239,"address":[],"length":0,"stats":{"Line":15}},{"line":1240,"address":[],"length":0,"stats":{"Line":10}},{"line":1241,"address":[],"length":0,"stats":{"Line":2}},{"line":1242,"address":[],"length":0,"stats":{"Line":4}},{"line":1243,"address":[],"length":0,"stats":{"Line":2}},{"line":1246,"address":[],"length":0,"stats":{"Line":3}},{"line":1247,"address":[],"length":0,"stats":{"Line":6}},{"line":1248,"address":[],"length":0,"stats":{"Line":3}},{"line":1254,"address":[],"length":0,"stats":{"Line":0}},{"line":1255,"address":[],"length":0,"stats":{"Line":0}},{"line":1264,"address":[],"length":0,"stats":{"Line":7}},{"line":1265,"address":[],"length":0,"stats":{"Line":26}},{"line":1266,"address":[],"length":0,"stats":{"Line":15}},{"line":1267,"address":[],"length":0,"stats":{"Line":10}},{"line":1268,"address":[],"length":0,"stats":{"Line":2}},{"line":1269,"address":[],"length":0,"stats":{"Line":4}},{"line":1270,"address":[],"length":0,"stats":{"Line":2}},{"line":1273,"address":[],"length":0,"stats":{"Line":3}},{"line":1274,"address":[],"length":0,"stats":{"Line":6}},{"line":1275,"address":[],"length":0,"stats":{"Line":3}},{"line":1281,"address":[],"length":0,"stats":{"Line":0}},{"line":1282,"address":[],"length":0,"stats":{"Line":0}},{"line":1291,"address":[],"length":0,"stats":{"Line":0}},{"line":1292,"address":[],"length":0,"stats":{"Line":0}},{"line":1294,"address":[],"length":0,"stats":{"Line":0}},{"line":1297,"address":[],"length":0,"stats":{"Line":0}},{"line":1298,"address":[],"length":0,"stats":{"Line":0}},{"line":1307,"address":[],"length":0,"stats":{"Line":7}},{"line":1308,"address":[],"length":0,"stats":{"Line":26}},{"line":1309,"address":[],"length":0,"stats":{"Line":10}},{"line":1310,"address":[],"length":0,"stats":{"Line":2}},{"line":1312,"address":[],"length":0,"stats":{"Line":3}},{"line":1317,"address":[],"length":0,"stats":{"Line":0}},{"line":1318,"address":[],"length":0,"stats":{"Line":0}},{"line":1329,"address":[],"length":0,"stats":{"Line":7}},{"line":1330,"address":[],"length":0,"stats":{"Line":26}},{"line":1331,"address":[],"length":0,"stats":{"Line":15}},{"line":1332,"address":[],"length":0,"stats":{"Line":10}},{"line":1333,"address":[],"length":0,"stats":{"Line":2}},{"line":1335,"address":[],"length":0,"stats":{"Line":3}},{"line":1340,"address":[],"length":0,"stats":{"Line":0}},{"line":1341,"address":[],"length":0,"stats":{"Line":0}},{"line":1350,"address":[],"length":0,"stats":{"Line":7}},{"line":1351,"address":[],"length":0,"stats":{"Line":26}},{"line":1352,"address":[],"length":0,"stats":{"Line":15}},{"line":1353,"address":[],"length":0,"stats":{"Line":10}},{"line":1354,"address":[],"length":0,"stats":{"Line":2}},{"line":1356,"address":[],"length":0,"stats":{"Line":3}},{"line":1361,"address":[],"length":0,"stats":{"Line":0}},{"line":1362,"address":[],"length":0,"stats":{"Line":0}},{"line":1374,"address":[],"length":0,"stats":{"Line":0}},{"line":1375,"address":[],"length":0,"stats":{"Line":0}},{"line":1376,"address":[],"length":0,"stats":{"Line":0}},{"line":1378,"address":[],"length":0,"stats":{"Line":0}},{"line":1379,"address":[],"length":0,"stats":{"Line":0}},{"line":1383,"address":[],"length":0,"stats":{"Line":0}},{"line":1384,"address":[],"length":0,"stats":{"Line":0}},{"line":1385,"address":[],"length":0,"stats":{"Line":0}},{"line":1386,"address":[],"length":0,"stats":{"Line":0}},{"line":1395,"address":[],"length":0,"stats":{"Line":0}},{"line":1396,"address":[],"length":0,"stats":{"Line":0}},{"line":1397,"address":[],"length":0,"stats":{"Line":0}},{"line":1399,"address":[],"length":0,"stats":{"Line":0}},{"line":1400,"address":[],"length":0,"stats":{"Line":0}},{"line":1413,"address":[],"length":0,"stats":{"Line":0}},{"line":1414,"address":[],"length":0,"stats":{"Line":0}},{"line":1416,"address":[],"length":0,"stats":{"Line":0}},{"line":1424,"address":[],"length":0,"stats":{"Line":0}},{"line":1425,"address":[],"length":0,"stats":{"Line":0}},{"line":1427,"address":[],"length":0,"stats":{"Line":0}},{"line":1461,"address":[],"length":0,"stats":{"Line":0}},{"line":1464,"address":[],"length":0,"stats":{"Line":0}},{"line":1465,"address":[],"length":0,"stats":{"Line":0}},{"line":1466,"address":[],"length":0,"stats":{"Line":0}},{"line":1504,"address":[],"length":0,"stats":{"Line":0}},{"line":1510,"address":[],"length":0,"stats":{"Line":0}},{"line":1511,"address":[],"length":0,"stats":{"Line":0}},{"line":1512,"address":[],"length":0,"stats":{"Line":0}},{"line":1526,"address":[],"length":0,"stats":{"Line":0}},{"line":1529,"address":[],"length":0,"stats":{"Line":0}},{"line":1530,"address":[],"length":0,"stats":{"Line":0}},{"line":1531,"address":[],"length":0,"stats":{"Line":0}},{"line":1549,"address":[],"length":0,"stats":{"Line":0}},{"line":1550,"address":[],"length":0,"stats":{"Line":0}},{"line":1565,"address":[],"length":0,"stats":{"Line":0}},{"line":1566,"address":[],"length":0,"stats":{"Line":0}},{"line":1586,"address":[],"length":0,"stats":{"Line":0}},{"line":1587,"address":[],"length":0,"stats":{"Line":0}},{"line":1608,"address":[],"length":0,"stats":{"Line":0}},{"line":1610,"address":[],"length":0,"stats":{"Line":0}},{"line":1632,"address":[],"length":0,"stats":{"Line":0}},{"line":1633,"address":[],"length":0,"stats":{"Line":0}},{"line":1659,"address":[],"length":0,"stats":{"Line":0}},{"line":1660,"address":[],"length":0,"stats":{"Line":0}},{"line":1684,"address":[],"length":0,"stats":{"Line":0}},{"line":1685,"address":[],"length":0,"stats":{"Line":0}},{"line":1711,"address":[],"length":0,"stats":{"Line":0}},{"line":1712,"address":[],"length":0,"stats":{"Line":0}},{"line":1734,"address":[],"length":0,"stats":{"Line":0}},{"line":1735,"address":[],"length":0,"stats":{"Line":0}},{"line":1736,"address":[],"length":0,"stats":{"Line":0}},{"line":1761,"address":[],"length":0,"stats":{"Line":0}},{"line":1763,"address":[],"length":0,"stats":{"Line":0}},{"line":1789,"address":[],"length":0,"stats":{"Line":0}},{"line":1790,"address":[],"length":0,"stats":{"Line":0}},{"line":1812,"address":[],"length":0,"stats":{"Line":0}},{"line":1813,"address":[],"length":0,"stats":{"Line":0}},{"line":1814,"address":[],"length":0,"stats":{"Line":0}},{"line":1838,"address":[],"length":0,"stats":{"Line":0}},{"line":1839,"address":[],"length":0,"stats":{"Line":0}},{"line":1841,"address":[],"length":0,"stats":{"Line":0}},{"line":1842,"address":[],"length":0,"stats":{"Line":0}},{"line":1850,"address":[],"length":0,"stats":{"Line":0}},{"line":1851,"address":[],"length":0,"stats":{"Line":0}},{"line":1853,"address":[],"length":0,"stats":{"Line":0}},{"line":1854,"address":[],"length":0,"stats":{"Line":0}},{"line":1855,"address":[],"length":0,"stats":{"Line":0}},{"line":1856,"address":[],"length":0,"stats":{"Line":0}},{"line":1880,"address":[],"length":0,"stats":{"Line":0}},{"line":1882,"address":[],"length":0,"stats":{"Line":0}},{"line":1911,"address":[],"length":0,"stats":{"Line":0}},{"line":1913,"address":[],"length":0,"stats":{"Line":0}},{"line":1926,"address":[],"length":0,"stats":{"Line":0}},{"line":1928,"address":[],"length":0,"stats":{"Line":0}},{"line":1938,"address":[],"length":0,"stats":{"Line":0}},{"line":1939,"address":[],"length":0,"stats":{"Line":0}},{"line":1947,"address":[],"length":0,"stats":{"Line":0}},{"line":1948,"address":[],"length":0,"stats":{"Line":0}},{"line":1973,"address":[],"length":0,"stats":{"Line":0}},{"line":1975,"address":[],"length":0,"stats":{"Line":0}},{"line":1982,"address":[],"length":0,"stats":{"Line":0}},{"line":1983,"address":[],"length":0,"stats":{"Line":0}},{"line":1994,"address":[],"length":0,"stats":{"Line":0}},{"line":1996,"address":[],"length":0,"stats":{"Line":0}},{"line":2006,"address":[],"length":0,"stats":{"Line":0}},{"line":2008,"address":[],"length":0,"stats":{"Line":0}},{"line":2046,"address":[],"length":0,"stats":{"Line":0}},{"line":2051,"address":[],"length":0,"stats":{"Line":0}},{"line":2052,"address":[],"length":0,"stats":{"Line":0}},{"line":2053,"address":[],"length":0,"stats":{"Line":0}},{"line":2058,"address":[],"length":0,"stats":{"Line":0}},{"line":2059,"address":[],"length":0,"stats":{"Line":0}},{"line":2068,"address":[],"length":0,"stats":{"Line":0}},{"line":2073,"address":[],"length":0,"stats":{"Line":0}},{"line":2074,"address":[],"length":0,"stats":{"Line":0}},{"line":2075,"address":[],"length":0,"stats":{"Line":0}},{"line":2079,"address":[],"length":0,"stats":{"Line":0}},{"line":2080,"address":[],"length":0,"stats":{"Line":0}},{"line":2089,"address":[],"length":0,"stats":{"Line":17}},{"line":2095,"address":[],"length":0,"stats":{"Line":51}},{"line":2097,"address":[],"length":0,"stats":{"Line":17}},{"line":2098,"address":[],"length":0,"stats":{"Line":51}},{"line":2099,"address":[],"length":0,"stats":{"Line":17}},{"line":2103,"address":[],"length":0,"stats":{"Line":9}},{"line":2105,"address":[],"length":0,"stats":{"Line":27}},{"line":2107,"address":[],"length":0,"stats":{"Line":36}},{"line":2154,"address":[],"length":0,"stats":{"Line":0}},{"line":2155,"address":[],"length":0,"stats":{"Line":0}},{"line":2156,"address":[],"length":0,"stats":{"Line":0}},{"line":2157,"address":[],"length":0,"stats":{"Line":0}},{"line":2162,"address":[],"length":0,"stats":{"Line":0}},{"line":2163,"address":[],"length":0,"stats":{"Line":0}},{"line":2164,"address":[],"length":0,"stats":{"Line":0}},{"line":2165,"address":[],"length":0,"stats":{"Line":0}},{"line":2170,"address":[],"length":0,"stats":{"Line":0}},{"line":2171,"address":[],"length":0,"stats":{"Line":0}},{"line":2176,"address":[],"length":0,"stats":{"Line":0}},{"line":2180,"address":[],"length":0,"stats":{"Line":0}},{"line":2185,"address":[],"length":0,"stats":{"Line":0}},{"line":2186,"address":[],"length":0,"stats":{"Line":0}},{"line":2187,"address":[],"length":0,"stats":{"Line":0}},{"line":2188,"address":[],"length":0,"stats":{"Line":0}},{"line":2197,"address":[],"length":0,"stats":{"Line":0}},{"line":2198,"address":[],"length":0,"stats":{"Line":0}},{"line":2199,"address":[],"length":0,"stats":{"Line":0}},{"line":2200,"address":[],"length":0,"stats":{"Line":0}},{"line":2205,"address":[],"length":0,"stats":{"Line":0}},{"line":2206,"address":[],"length":0,"stats":{"Line":0}},{"line":2207,"address":[],"length":0,"stats":{"Line":0}},{"line":2208,"address":[],"length":0,"stats":{"Line":0}},{"line":2213,"address":[],"length":0,"stats":{"Line":0}},{"line":2214,"address":[],"length":0,"stats":{"Line":0}},{"line":2219,"address":[],"length":0,"stats":{"Line":0}},{"line":2223,"address":[],"length":0,"stats":{"Line":0}},{"line":2228,"address":[],"length":0,"stats":{"Line":0}},{"line":2229,"address":[],"length":0,"stats":{"Line":0}},{"line":2230,"address":[],"length":0,"stats":{"Line":0}},{"line":2231,"address":[],"length":0,"stats":{"Line":0}},{"line":2240,"address":[],"length":0,"stats":{"Line":2}},{"line":2241,"address":[],"length":0,"stats":{"Line":2}},{"line":2242,"address":[],"length":0,"stats":{"Line":0}},{"line":2244,"address":[],"length":0,"stats":{"Line":2}},{"line":2245,"address":[],"length":0,"stats":{"Line":4}},{"line":2246,"address":[],"length":0,"stats":{"Line":2}},{"line":2251,"address":[],"length":0,"stats":{"Line":0}},{"line":2252,"address":[],"length":0,"stats":{"Line":0}},{"line":2253,"address":[],"length":0,"stats":{"Line":0}},{"line":2255,"address":[],"length":0,"stats":{"Line":0}},{"line":2256,"address":[],"length":0,"stats":{"Line":0}},{"line":2257,"address":[],"length":0,"stats":{"Line":0}},{"line":2262,"address":[],"length":0,"stats":{"Line":0}},{"line":2263,"address":[],"length":0,"stats":{"Line":0}},{"line":2264,"address":[],"length":0,"stats":{"Line":0}},{"line":2266,"address":[],"length":0,"stats":{"Line":0}},{"line":2271,"address":[],"length":0,"stats":{"Line":0}},{"line":2275,"address":[],"length":0,"stats":{"Line":0}},{"line":2276,"address":[],"length":0,"stats":{"Line":0}},{"line":2279,"address":[],"length":0,"stats":{"Line":0}},{"line":2280,"address":[],"length":0,"stats":{"Line":0}},{"line":2281,"address":[],"length":0,"stats":{"Line":0}},{"line":2282,"address":[],"length":0,"stats":{"Line":0}},{"line":2287,"address":[],"length":0,"stats":{"Line":0}},{"line":2288,"address":[],"length":0,"stats":{"Line":0}},{"line":2289,"address":[],"length":0,"stats":{"Line":0}},{"line":2291,"address":[],"length":0,"stats":{"Line":0}},{"line":2292,"address":[],"length":0,"stats":{"Line":0}},{"line":2293,"address":[],"length":0,"stats":{"Line":0}},{"line":2302,"address":[],"length":0,"stats":{"Line":0}},{"line":2303,"address":[],"length":0,"stats":{"Line":0}},{"line":2304,"address":[],"length":0,"stats":{"Line":0}},{"line":2306,"address":[],"length":0,"stats":{"Line":0}},{"line":2307,"address":[],"length":0,"stats":{"Line":0}},{"line":2308,"address":[],"length":0,"stats":{"Line":0}},{"line":2313,"address":[],"length":0,"stats":{"Line":0}},{"line":2314,"address":[],"length":0,"stats":{"Line":0}},{"line":2315,"address":[],"length":0,"stats":{"Line":0}},{"line":2317,"address":[],"length":0,"stats":{"Line":0}},{"line":2318,"address":[],"length":0,"stats":{"Line":0}},{"line":2319,"address":[],"length":0,"stats":{"Line":0}},{"line":2324,"address":[],"length":0,"stats":{"Line":0}},{"line":2325,"address":[],"length":0,"stats":{"Line":0}},{"line":2326,"address":[],"length":0,"stats":{"Line":0}},{"line":2328,"address":[],"length":0,"stats":{"Line":0}},{"line":2333,"address":[],"length":0,"stats":{"Line":0}},{"line":2337,"address":[],"length":0,"stats":{"Line":0}},{"line":2338,"address":[],"length":0,"stats":{"Line":0}},{"line":2341,"address":[],"length":0,"stats":{"Line":0}},{"line":2342,"address":[],"length":0,"stats":{"Line":0}},{"line":2343,"address":[],"length":0,"stats":{"Line":0}},{"line":2348,"address":[],"length":0,"stats":{"Line":0}},{"line":2349,"address":[],"length":0,"stats":{"Line":0}},{"line":2350,"address":[],"length":0,"stats":{"Line":0}},{"line":2352,"address":[],"length":0,"stats":{"Line":0}},{"line":2353,"address":[],"length":0,"stats":{"Line":0}},{"line":2354,"address":[],"length":0,"stats":{"Line":0}},{"line":2363,"address":[],"length":0,"stats":{"Line":0}},{"line":2364,"address":[],"length":0,"stats":{"Line":0}},{"line":2365,"address":[],"length":0,"stats":{"Line":0}},{"line":2367,"address":[],"length":0,"stats":{"Line":0}},{"line":2368,"address":[],"length":0,"stats":{"Line":0}},{"line":2369,"address":[],"length":0,"stats":{"Line":0}},{"line":2374,"address":[],"length":0,"stats":{"Line":0}},{"line":2375,"address":[],"length":0,"stats":{"Line":0}},{"line":2376,"address":[],"length":0,"stats":{"Line":0}},{"line":2378,"address":[],"length":0,"stats":{"Line":0}},{"line":2379,"address":[],"length":0,"stats":{"Line":0}},{"line":2380,"address":[],"length":0,"stats":{"Line":0}},{"line":2385,"address":[],"length":0,"stats":{"Line":0}},{"line":2386,"address":[],"length":0,"stats":{"Line":0}},{"line":2387,"address":[],"length":0,"stats":{"Line":0}},{"line":2389,"address":[],"length":0,"stats":{"Line":0}},{"line":2394,"address":[],"length":0,"stats":{"Line":0}},{"line":2398,"address":[],"length":0,"stats":{"Line":0}},{"line":2399,"address":[],"length":0,"stats":{"Line":0}},{"line":2402,"address":[],"length":0,"stats":{"Line":0}},{"line":2403,"address":[],"length":0,"stats":{"Line":0}},{"line":2404,"address":[],"length":0,"stats":{"Line":0}},{"line":2409,"address":[],"length":0,"stats":{"Line":0}},{"line":2410,"address":[],"length":0,"stats":{"Line":0}},{"line":2411,"address":[],"length":0,"stats":{"Line":0}},{"line":2413,"address":[],"length":0,"stats":{"Line":0}},{"line":2414,"address":[],"length":0,"stats":{"Line":0}},{"line":2415,"address":[],"length":0,"stats":{"Line":0}},{"line":2449,"address":[],"length":0,"stats":{"Line":0}},{"line":2450,"address":[],"length":0,"stats":{"Line":0}},{"line":2459,"address":[],"length":0,"stats":{"Line":0}},{"line":2460,"address":[],"length":0,"stats":{"Line":0}},{"line":2469,"address":[],"length":0,"stats":{"Line":0}},{"line":2470,"address":[],"length":0,"stats":{"Line":0}},{"line":2479,"address":[],"length":0,"stats":{"Line":0}},{"line":2480,"address":[],"length":0,"stats":{"Line":0}},{"line":2489,"address":[],"length":0,"stats":{"Line":0}},{"line":2490,"address":[],"length":0,"stats":{"Line":0}}],"covered":79,"coverable":362},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","metadata","mod.rs"],"content":"pub mod encoding;\npub mod key;\npub mod map;\npub mod value;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","metadata","value.rs"],"content":"#![allow(dead_code)]\nuse super::encoding::{\n    Ascii, Binary, InvalidMetadataValue, InvalidMetadataValueBytes, ValueEncoding,\n};\nuse super::key::MetadataKey;\n\nuse bytes::Bytes;\nuse http::header::HeaderValue;\nuse std::error::Error;\nuse std::hash::{Hash, Hasher};\nuse std::marker::PhantomData;\nuse std::str::FromStr;\nuse std::{cmp, fmt};\n\n/// Represents a custom metadata field value.\n///\n/// `MetadataValue` is used as the [`MetadataMap`] value.\n///\n/// [`HeaderMap`]: struct.HeaderMap.html\n/// [`MetadataMap`]: struct.MetadataMap.html\n#[derive(Clone)]\n#[repr(transparent)]\npub struct MetadataValue\u003cVE: ValueEncoding\u003e {\n    // Note: There are unsafe transmutes that assume that the memory layout\n    // of MetadataValue is identical to HeaderValue\n    pub(crate) inner: HeaderValue,\n    phantom: PhantomData\u003cVE\u003e,\n}\n\n/// A possible error when converting a `MetadataValue` to a string representation.\n///\n/// Metadata field values may contain opaque bytes, in which case it is not\n/// possible to represent the value as a string.\n#[derive(Debug)]\npub struct ToStrError {\n    _priv: (),\n}\n\n/// An ascii metadata value.\npub type AsciiMetadataValue = MetadataValue\u003cAscii\u003e;\n/// A binary metadata value.\npub type BinaryMetadataValue = MetadataValue\u003cBinary\u003e;\n\nimpl\u003cVE: ValueEncoding\u003e MetadataValue\u003cVE\u003e {\n    /// Convert a static string to a `MetadataValue`.\n    ///\n    /// This function will not perform any copying, however the string is\n    /// checked to ensure that no invalid characters are present.\n    ///\n    /// For Ascii values, only visible ASCII characters (32-127) are permitted.\n    /// For Binary values, the string must be valid base64.\n    ///\n    /// # Panics\n    ///\n    /// This function panics if the argument contains invalid metadata value\n    /// characters.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_static(\"hello\");\n    /// assert_eq!(val, \"hello\");\n    /// ```\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = BinaryMetadataValue::from_static(\"SGVsbG8hIQ==\");\n    /// assert_eq!(val, \"Hello!!\");\n    /// ```\n    #[inline]\n    pub fn from_static(src: \u0026'static str) -\u003e Self {\n        MetadataValue {\n            inner: VE::from_static(src),\n            phantom: PhantomData,\n        }\n    }\n\n    /// Convert a `Bytes` directly into a `MetadataValue` without validating.\n    /// For `MetadataValue\u003cBinary\u003e` the provided parameter must be base64\n    /// encoded without padding bytes at the end.\n    ///\n    /// # Safety\n    ///\n    /// This function does NOT validate that illegal bytes are not contained\n    /// within the buffer.\n    #[inline]\n    pub unsafe fn from_shared_unchecked(src: Bytes) -\u003e Self {\n        unsafe {\n            MetadataValue {\n                inner: HeaderValue::from_maybe_shared_unchecked(src),\n                phantom: PhantomData,\n            }\n        }\n    }\n\n    /// Returns true if the `MetadataValue` has a length of zero bytes.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_static(\"\");\n    /// assert!(val.is_empty());\n    ///\n    /// let val = AsciiMetadataValue::from_static(\"hello\");\n    /// assert!(!val.is_empty());\n    /// ```\n    #[inline]\n    pub fn is_empty(\u0026self) -\u003e bool {\n        VE::is_empty(self.inner.as_bytes())\n    }\n\n    /// Converts a `MetadataValue` to a Bytes buffer. This method cannot\n    /// fail for Ascii values. For Ascii values, `as_bytes` is more convenient\n    /// to use.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_static(\"hello\");\n    /// assert_eq!(val.to_bytes().unwrap().as_ref(), b\"hello\");\n    /// ```\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = BinaryMetadataValue::from_bytes(b\"hello\");\n    /// assert_eq!(val.to_bytes().unwrap().as_ref(), b\"hello\");\n    /// ```\n    #[inline]\n    pub fn to_bytes(\u0026self) -\u003e Result\u003cBytes, InvalidMetadataValueBytes\u003e {\n        VE::decode(self.inner.as_bytes())\n    }\n\n    /// Mark that the metadata value represents sensitive information.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut val = AsciiMetadataValue::from_static(\"my secret\");\n    ///\n    /// val.set_sensitive(true);\n    /// assert!(val.is_sensitive());\n    ///\n    /// val.set_sensitive(false);\n    /// assert!(!val.is_sensitive());\n    /// ```\n    #[inline]\n    pub fn set_sensitive(\u0026mut self, val: bool) {\n        self.inner.set_sensitive(val);\n    }\n\n    /// Returns `true` if the value represents sensitive data.\n    ///\n    /// Sensitive data could represent passwords or other data that should not\n    /// be stored on disk or in memory. This setting can be used by components\n    /// like caches to avoid storing the value. HPACK encoders must set the\n    /// metadata field to never index when `is_sensitive` returns true.\n    ///\n    /// Note that sensitivity is not factored into equality or ordering.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let mut val = AsciiMetadataValue::from_static(\"my secret\");\n    ///\n    /// val.set_sensitive(true);\n    /// assert!(val.is_sensitive());\n    ///\n    /// val.set_sensitive(false);\n    /// assert!(!val.is_sensitive());\n    /// ```\n    #[inline]\n    pub fn is_sensitive(\u0026self) -\u003e bool {\n        self.inner.is_sensitive()\n    }\n\n    /// Converts a `MetadataValue` to a byte slice. For Binary values, the\n    /// return value is base64 encoded.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_static(\"hello\");\n    /// assert_eq!(val.as_encoded_bytes(), b\"hello\");\n    /// ```\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = BinaryMetadataValue::from_bytes(b\"Hello!\");\n    /// assert_eq!(val.as_encoded_bytes(), b\"SGVsbG8h\");\n    /// ```\n    #[inline]\n    pub fn as_encoded_bytes(\u0026self) -\u003e \u0026[u8] {\n        self.inner.as_bytes()\n    }\n\n    /// Converts a HeaderValue to a MetadataValue. This method assumes that the\n    /// caller has made sure that the value is of the correct Ascii or Binary\n    /// value encoding.\n    #[inline]\n    pub(crate) fn unchecked_from_header_value(value: HeaderValue) -\u003e Self {\n        MetadataValue {\n            inner: value,\n            phantom: PhantomData,\n        }\n    }\n\n    /// Converts a HeaderValue reference to a MetadataValue. This method assumes\n    /// that the caller has made sure that the value is of the correct Ascii or\n    /// Binary value encoding.\n    #[inline]\n    pub(crate) fn unchecked_from_header_value_ref(header_value: \u0026HeaderValue) -\u003e \u0026Self {\n        unsafe { \u0026*(header_value as *const HeaderValue as *const Self) }\n    }\n\n    /// Converts a HeaderValue reference to a MetadataValue. This method assumes\n    /// that the caller has made sure that the value is of the correct Ascii or\n    /// Binary value encoding.\n    #[inline]\n    pub(crate) fn unchecked_from_mut_header_value_ref(header_value: \u0026mut HeaderValue) -\u003e \u0026mut Self {\n        unsafe { \u0026mut *(header_value as *mut HeaderValue as *mut Self) }\n    }\n}\n\n/// Attempt to convert a byte slice to a `MetadataValue`.\n///\n/// For Ascii metadata values, If the argument contains invalid metadata\n/// value bytes, an error is returned. Only byte values between 32 and 255\n/// (inclusive) are permitted, excluding byte 127 (DEL).\n///\n/// For Binary metadata values this method cannot fail. See also the Binary\n/// only version of this method `from_bytes`.\n///\n/// # Examples\n///\n/// ```\n/// # use tonic::metadata::*;\n/// let val = AsciiMetadataValue::try_from(b\"hello\\xfa\").unwrap();\n/// assert_eq!(val, \u0026b\"hello\\xfa\"[..]);\n/// ```\n///\n/// An invalid value\n///\n/// ```\n/// # use tonic::metadata::*;\n/// let val = AsciiMetadataValue::try_from(b\"\\n\");\n/// assert!(val.is_err());\n/// ```\nimpl\u003cVE: ValueEncoding\u003e TryFrom\u003c\u0026[u8]\u003e for MetadataValue\u003cVE\u003e {\n    type Error = InvalidMetadataValueBytes;\n\n    #[inline]\n    fn try_from(src: \u0026[u8]) -\u003e Result\u003cSelf, Self::Error\u003e {\n        VE::from_bytes(src).map(|value| MetadataValue {\n            inner: value,\n            phantom: PhantomData,\n        })\n    }\n}\n\n/// Attempt to convert a byte slice to a `MetadataValue`.\n///\n/// For Ascii metadata values, If the argument contains invalid metadata\n/// value bytes, an error is returned. Only byte values between 32 and 255\n/// (inclusive) are permitted, excluding byte 127 (DEL).\n///\n/// For Binary metadata values this method cannot fail. See also the Binary\n/// only version of this method `from_bytes`.\n///\n/// # Examples\n///\n/// ```\n/// # use tonic::metadata::*;\n/// let val = AsciiMetadataValue::try_from(b\"hello\\xfa\").unwrap();\n/// assert_eq!(val, \u0026b\"hello\\xfa\"[..]);\n/// ```\n///\n/// An invalid value\n///\n/// ```\n/// # use tonic::metadata::*;\n/// let val = AsciiMetadataValue::try_from(b\"\\n\");\n/// assert!(val.is_err());\n/// ```\nimpl\u003cVE: ValueEncoding, const N: usize\u003e TryFrom\u003c\u0026[u8; N]\u003e for MetadataValue\u003cVE\u003e {\n    type Error = InvalidMetadataValueBytes;\n\n    #[inline]\n    fn try_from(src: \u0026[u8; N]) -\u003e Result\u003cSelf, Self::Error\u003e {\n        Self::try_from(src.as_ref())\n    }\n}\n\n/// Attempt to convert a `Bytes` buffer to a `MetadataValue`.\n///\n/// For `MetadataValue\u003cAscii\u003e`, if the argument contains invalid metadata\n/// value bytes, an error is returned. Only byte values between 32 and 255\n/// (inclusive) are permitted, excluding byte 127 (DEL).\n///\n/// For `MetadataValue\u003cBinary\u003e`, if the argument is not valid base64, an\n/// error is returned. In use cases where the input is not base64 encoded,\n/// use `from_bytes`; if the value has to be encoded it's not possible to\n/// share the memory anyways.\nimpl\u003cVE: ValueEncoding\u003e TryFrom\u003cBytes\u003e for MetadataValue\u003cVE\u003e {\n    type Error = InvalidMetadataValueBytes;\n\n    #[inline]\n    fn try_from(src: Bytes) -\u003e Result\u003cSelf, Self::Error\u003e {\n        VE::from_shared(src).map(|value| MetadataValue {\n            inner: value,\n            phantom: PhantomData,\n        })\n    }\n}\n\n/// Attempt to convert a Vec of bytes to a `MetadataValue`.\n///\n/// For `MetadataValue\u003cAscii\u003e`, if the argument contains invalid metadata\n/// value bytes, an error is returned. Only byte values between 32 and 255\n/// (inclusive) are permitted, excluding byte 127 (DEL).\n///\n/// For `MetadataValue\u003cBinary\u003e`, if the argument is not valid base64, an\n/// error is returned. In use cases where the input is not base64 encoded,\n/// use `from_bytes`; if the value has to be encoded it's not possible to\n/// share the memory anyways.\nimpl\u003cVE: ValueEncoding\u003e TryFrom\u003cVec\u003cu8\u003e\u003e for MetadataValue\u003cVE\u003e {\n    type Error = InvalidMetadataValueBytes;\n\n    #[inline]\n    fn try_from(src: Vec\u003cu8\u003e) -\u003e Result\u003cSelf, Self::Error\u003e {\n        Self::try_from(src.as_slice())\n    }\n}\n\n/// Attempt to convert a string to a `MetadataValue\u003cAscii\u003e`.\n///\n/// If the argument contains invalid metadata value characters, an error is\n/// returned. Only visible ASCII characters (32-127) are permitted. Use\n/// `from_bytes` to create a `MetadataValue` that includes opaque octets\n/// (128-255).\nimpl\u003c'a\u003e TryFrom\u003c\u0026'a str\u003e for MetadataValue\u003cAscii\u003e {\n    type Error = InvalidMetadataValue;\n\n    #[inline]\n    fn try_from(s: \u0026'a str) -\u003e Result\u003cSelf, Self::Error\u003e {\n        s.parse()\n    }\n}\n\n/// Attempt to convert a string to a `MetadataValue\u003cAscii\u003e`.\n///\n/// If the argument contains invalid metadata value characters, an error is\n/// returned. Only visible ASCII characters (32-127) are permitted. Use\n/// `from_bytes` to create a `MetadataValue` that includes opaque octets\n/// (128-255).\nimpl\u003c'a\u003e TryFrom\u003c\u0026'a String\u003e for MetadataValue\u003cAscii\u003e {\n    type Error = InvalidMetadataValue;\n\n    #[inline]\n    fn try_from(s: \u0026'a String) -\u003e Result\u003cSelf, Self::Error\u003e {\n        s.parse()\n    }\n}\n\n/// Attempt to convert a string to a `MetadataValue\u003cAscii\u003e`.\n///\n/// If the argument contains invalid metadata value characters, an error is\n/// returned. Only visible ASCII characters (32-127) are permitted. Use\n/// `from_bytes` to create a `MetadataValue` that includes opaque octets\n/// (128-255).\nimpl TryFrom\u003cString\u003e for MetadataValue\u003cAscii\u003e {\n    type Error = InvalidMetadataValue;\n\n    #[inline]\n    fn try_from(s: String) -\u003e Result\u003cSelf, Self::Error\u003e {\n        s.parse()\n    }\n}\n\nimpl MetadataValue\u003cAscii\u003e {\n    /// Converts a MetadataKey into a `MetadataValue\u003cAscii\u003e`.\n    ///\n    /// Since every valid MetadataKey is a valid MetadataValue this is done\n    /// infallibly.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_key::\u003cAscii\u003e(\"accept\".parse().unwrap());\n    /// assert_eq!(val, AsciiMetadataValue::try_from(b\"accept\").unwrap());\n    /// ```\n    #[inline]\n    pub fn from_key\u003cKeyVE: ValueEncoding\u003e(key: MetadataKey\u003cKeyVE\u003e) -\u003e Self {\n        key.into()\n    }\n\n    /// Returns the length of `self`, in bytes.\n    ///\n    /// This method is not available for `MetadataValue\u003cBinary\u003e` because that\n    /// cannot be implemented in constant time, which most people would probably\n    /// expect. To get the length of `MetadataValue\u003cBinary\u003e`, convert it to a\n    /// Bytes value and measure its length.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_static(\"hello\");\n    /// assert_eq!(val.len(), 5);\n    /// ```\n    #[inline]\n    pub fn len(\u0026self) -\u003e usize {\n        self.inner.len()\n    }\n\n    /// Yields a `\u0026str` slice if the `MetadataValue` only contains visible ASCII\n    /// chars.\n    ///\n    /// This function will perform a scan of the metadata value, checking all the\n    /// characters.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_static(\"hello\");\n    /// assert_eq!(val.to_str().unwrap(), \"hello\");\n    /// ```\n    pub fn to_str(\u0026self) -\u003e Result\u003c\u0026str, ToStrError\u003e {\n        self.inner.to_str().map_err(|_| ToStrError::new())\n    }\n\n    /// Converts a `MetadataValue` to a byte slice. For Binary values, use\n    /// `to_bytes`.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = AsciiMetadataValue::from_static(\"hello\");\n    /// assert_eq!(val.as_bytes(), b\"hello\");\n    /// ```\n    #[inline]\n    pub fn as_bytes(\u0026self) -\u003e \u0026[u8] {\n        self.inner.as_bytes()\n    }\n}\n\nimpl MetadataValue\u003cBinary\u003e {\n    /// Convert a byte slice to a `MetadataValue\u003cBinary\u003e`.\n    ///\n    /// # Examples\n    ///\n    /// ```\n    /// # use tonic::metadata::*;\n    /// let val = BinaryMetadataValue::from_bytes(b\"hello\\xfa\");\n    /// assert_eq!(val, \u0026b\"hello\\xfa\"[..]);\n    /// ```\n    #[inline]\n    pub fn from_bytes(src: \u0026[u8]) -\u003e Self {\n        // Only the Ascii version of try_from can fail.\n        Self::try_from(src).unwrap()\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e AsRef\u003c[u8]\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn as_ref(\u0026self) -\u003e \u0026[u8] {\n        self.inner.as_ref()\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e fmt::Debug for MetadataValue\u003cVE\u003e {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        VE::fmt(\u0026self.inner, f)\n    }\n}\n\nimpl\u003cKeyVE: ValueEncoding\u003e From\u003cMetadataKey\u003cKeyVE\u003e\u003e for MetadataValue\u003cAscii\u003e {\n    #[inline]\n    fn from(h: MetadataKey\u003cKeyVE\u003e) -\u003e MetadataValue\u003cAscii\u003e {\n        MetadataValue {\n            inner: h.inner.into(),\n            phantom: PhantomData,\n        }\n    }\n}\n\nmacro_rules! from_integers {\n    ($($name:ident: $t:ident =\u003e $max_len:expr),*) =\u003e {$(\n        impl From\u003c$t\u003e for MetadataValue\u003cAscii\u003e {\n            fn from(num: $t) -\u003e MetadataValue\u003cAscii\u003e {\n                MetadataValue {\n                    inner: HeaderValue::from(num),\n                    phantom: PhantomData,\n                }\n            }\n        }\n\n        #[test]\n        fn $name() {\n            let n: $t = 55;\n            let val = AsciiMetadataValue::from(n);\n            assert_eq!(val, \u0026n.to_string());\n\n            let n = $t::MAX;\n            let val = AsciiMetadataValue::from(n);\n            assert_eq!(val, \u0026n.to_string());\n        }\n    )*};\n}\n\nfrom_integers! {\n    // integer type =\u003e maximum decimal length\n\n    // u8 purposely left off... AsciiMetadataValue::from(b'3') could be confusing\n    from_u16: u16 =\u003e 5,\n    from_i16: i16 =\u003e 6,\n    from_u32: u32 =\u003e 10,\n    from_i32: i32 =\u003e 11,\n    from_u64: u64 =\u003e 20,\n    from_i64: i64 =\u003e 20\n}\n\n#[cfg(target_pointer_width = \"16\")]\nfrom_integers! {\n    from_usize: usize =\u003e 5,\n    from_isize: isize =\u003e 6\n}\n\n#[cfg(target_pointer_width = \"32\")]\nfrom_integers! {\n    from_usize: usize =\u003e 10,\n    from_isize: isize =\u003e 11\n}\n\n#[cfg(target_pointer_width = \"64\")]\nfrom_integers! {\n    from_usize: usize =\u003e 20,\n    from_isize: isize =\u003e 20\n}\n\n#[cfg(test)]\nmod from_metadata_value_tests {\n    use super::*;\n    use crate::metadata::map::MetadataMap;\n\n    #[test]\n    fn it_can_insert_metadata_key_as_metadata_value() {\n        let mut map = MetadataMap::new();\n        map.insert(\n            \"accept\",\n            MetadataKey::\u003cAscii\u003e::from_bytes(b\"hello-world\")\n                .unwrap()\n                .into(),\n        );\n\n        assert_eq!(\n            map.get(\"accept\").unwrap(),\n            AsciiMetadataValue::try_from(b\"hello-world\").unwrap()\n        );\n    }\n}\n\nimpl FromStr for MetadataValue\u003cAscii\u003e {\n    type Err = InvalidMetadataValue;\n\n    #[inline]\n    fn from_str(s: \u0026str) -\u003e Result\u003cMetadataValue\u003cAscii\u003e, Self::Err\u003e {\n        HeaderValue::from_str(s)\n            .map(|value| MetadataValue {\n                inner: value,\n                phantom: PhantomData,\n            })\n            .map_err(|_| InvalidMetadataValue::new())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e From\u003cMetadataValue\u003cVE\u003e\u003e for Bytes {\n    #[inline]\n    fn from(value: MetadataValue\u003cVE\u003e) -\u003e Bytes {\n        Bytes::copy_from_slice(value.inner.as_bytes())\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding\u003e From\u003c\u0026'a MetadataValue\u003cVE\u003e\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn from(t: \u0026'a MetadataValue\u003cVE\u003e) -\u003e Self {\n        t.clone()\n    }\n}\n\n// ===== ToStrError =====\n\nimpl ToStrError {\n    pub(crate) fn new() -\u003e Self {\n        ToStrError { _priv: () }\n    }\n}\n\nimpl fmt::Display for ToStrError {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        f.write_str(\"failed to convert metadata to a str\")\n    }\n}\n\nimpl Error for ToStrError {}\n\nimpl Hash for MetadataValue\u003cAscii\u003e {\n    fn hash\u003cH: Hasher\u003e(\u0026self, state: \u0026mut H) {\n        self.inner.hash(state)\n    }\n}\n\nimpl Hash for MetadataValue\u003cBinary\u003e {\n    fn hash\u003cH: Hasher\u003e(\u0026self, state: \u0026mut H) {\n        match self.to_bytes() {\n            Ok(b) =\u003e b.hash(state),\n            Err(e) =\u003e e.hash(state),\n        }\n    }\n}\n\n// ===== PartialEq / PartialOrd =====\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e bool {\n        // Note: Different binary strings that after base64 decoding\n        // will count as the same value for Binary values. Also,\n        // different invalid base64 values count as equal for Binary\n        // values.\n        VE::values_equal(\u0026self.inner, \u0026other.inner)\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e Eq for MetadataValue\u003cVE\u003e {}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e Option\u003ccmp::Ordering\u003e {\n        Some(self.cmp(other))\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e Ord for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn cmp(\u0026self, other: \u0026Self) -\u003e cmp::Ordering {\n        self.inner.cmp(\u0026other.inner)\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cstr\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn eq(\u0026self, other: \u0026str) -\u003e bool {\n        VE::equals(\u0026self.inner, other.as_bytes())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003c[u8]\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn eq(\u0026self, other: \u0026[u8]) -\u003e bool {\n        VE::equals(\u0026self.inner, other)\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003cstr\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026str) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.inner.partial_cmp(other.as_bytes())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003c[u8]\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026[u8]) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.inner.partial_cmp(other)\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataValue\u003cVE\u003e\u003e for str {\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e bool {\n        *other == *self\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataValue\u003cVE\u003e\u003e for [u8] {\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e bool {\n        *other == *self\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003cMetadataValue\u003cVE\u003e\u003e for str {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.as_bytes().partial_cmp(other.inner.as_bytes())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003cMetadataValue\u003cVE\u003e\u003e for [u8] {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.partial_cmp(other.inner.as_bytes())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cString\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn eq(\u0026self, other: \u0026String) -\u003e bool {\n        *self == other[..]\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003cString\u003e for MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026String) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.inner.partial_cmp(other.as_bytes())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataValue\u003cVE\u003e\u003e for String {\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e bool {\n        *other == *self\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003cMetadataValue\u003cVE\u003e\u003e for String {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.as_bytes().partial_cmp(other.inner.as_bytes())\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataValue\u003cVE\u003e\u003e for \u0026MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e bool {\n        **self == *other\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003cMetadataValue\u003cVE\u003e\u003e for \u0026MetadataValue\u003cVE\u003e {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e Option\u003ccmp::Ordering\u003e {\n        (**self).partial_cmp(other)\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding, T: ?Sized\u003e PartialEq\u003c\u0026'a T\u003e for MetadataValue\u003cVE\u003e\nwhere\n    MetadataValue\u003cVE\u003e: PartialEq\u003cT\u003e,\n{\n    #[inline]\n    fn eq(\u0026self, other: \u0026\u0026'a T) -\u003e bool {\n        *self == **other\n    }\n}\n\nimpl\u003c'a, VE: ValueEncoding, T: ?Sized\u003e PartialOrd\u003c\u0026'a T\u003e for MetadataValue\u003cVE\u003e\nwhere\n    MetadataValue\u003cVE\u003e: PartialOrd\u003cT\u003e,\n{\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026\u0026'a T) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.partial_cmp(*other)\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialEq\u003cMetadataValue\u003cVE\u003e\u003e for \u0026str {\n    #[inline]\n    fn eq(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e bool {\n        *other == *self\n    }\n}\n\nimpl\u003cVE: ValueEncoding\u003e PartialOrd\u003cMetadataValue\u003cVE\u003e\u003e for \u0026str {\n    #[inline]\n    fn partial_cmp(\u0026self, other: \u0026MetadataValue\u003cVE\u003e) -\u003e Option\u003ccmp::Ordering\u003e {\n        self.as_bytes().partial_cmp(other.inner.as_bytes())\n    }\n}\n\n#[test]\nfn test_debug() {\n    let cases = \u0026[\n        (\"hello\", \"\\\"hello\\\"\"),\n        (\"hello \\\"world\\\"\", \"\\\"hello \\\\\\\"world\\\\\\\"\\\"\"),\n        (\"\\u{7FFF}hello\", \"\\\"\\\\xe7\\\\xbf\\\\xbfhello\\\"\"),\n    ];\n\n    for \u0026(value, expected) in cases {\n        let val = AsciiMetadataValue::try_from(value.as_bytes()).unwrap();\n        let actual = format!(\"{val:?}\");\n        assert_eq!(expected, actual);\n    }\n\n    let mut sensitive = AsciiMetadataValue::from_static(\"password\");\n    sensitive.set_sensitive(true);\n    assert_eq!(\"Sensitive\", format!(\"{sensitive:?}\"));\n}\n\n#[test]\nfn test_is_empty() {\n    fn from_str\u003cVE: ValueEncoding\u003e(s: \u0026str) -\u003e MetadataValue\u003cVE\u003e {\n        MetadataValue::\u003cVE\u003e::unchecked_from_header_value(s.parse().unwrap())\n    }\n\n    assert!(from_str::\u003cAscii\u003e(\"\").is_empty());\n    assert!(from_str::\u003cBinary\u003e(\"\").is_empty());\n    assert!(!from_str::\u003cAscii\u003e(\"a\").is_empty());\n    assert!(!from_str::\u003cBinary\u003e(\"a\").is_empty());\n    assert!(!from_str::\u003cAscii\u003e(\"=\").is_empty());\n    assert!(from_str::\u003cBinary\u003e(\"=\").is_empty());\n    assert!(!from_str::\u003cAscii\u003e(\"===\").is_empty());\n    assert!(from_str::\u003cBinary\u003e(\"===\").is_empty());\n    assert!(!from_str::\u003cAscii\u003e(\"=====\").is_empty());\n    assert!(from_str::\u003cBinary\u003e(\"=====\").is_empty());\n}\n\n#[test]\nfn test_from_shared_base64_encodes() {\n    let value = BinaryMetadataValue::try_from(Bytes::from_static(b\"Hello\")).unwrap();\n    assert_eq!(value.as_encoded_bytes(), b\"SGVsbG8\");\n}\n\n#[test]\nfn test_value_eq_value() {\n    type Bmv = BinaryMetadataValue;\n    type Amv = AsciiMetadataValue;\n\n    assert_eq!(Amv::from_static(\"abc\"), Amv::from_static(\"abc\"));\n    assert_ne!(Amv::from_static(\"abc\"), Amv::from_static(\"ABC\"));\n\n    assert_eq!(Bmv::from_bytes(b\"abc\"), Bmv::from_bytes(b\"abc\"));\n    assert_ne!(Bmv::from_bytes(b\"abc\"), Bmv::from_bytes(b\"ABC\"));\n\n    // Padding is ignored.\n    assert_eq!(\n        Bmv::from_static(\"SGVsbG8hIQ==\"),\n        Bmv::from_static(\"SGVsbG8hIQ\")\n    );\n    // Invalid values are all just invalid from this point of view.\n    unsafe {\n        assert_eq!(\n            Bmv::from_shared_unchecked(Bytes::from_static(b\"..{}\")),\n            Bmv::from_shared_unchecked(Bytes::from_static(b\"{}..\"))\n        );\n    }\n}\n\n#[test]\nfn test_value_eq_str() {\n    type Bmv = BinaryMetadataValue;\n    type Amv = AsciiMetadataValue;\n\n    assert_eq!(Amv::from_static(\"abc\"), \"abc\");\n    assert_ne!(Amv::from_static(\"abc\"), \"ABC\");\n    assert_eq!(\"abc\", Amv::from_static(\"abc\"));\n    assert_ne!(\"ABC\", Amv::from_static(\"abc\"));\n\n    assert_eq!(Bmv::from_bytes(b\"abc\"), \"abc\");\n    assert_ne!(Bmv::from_bytes(b\"abc\"), \"ABC\");\n    assert_eq!(\"abc\", Bmv::from_bytes(b\"abc\"));\n    assert_ne!(\"ABC\", Bmv::from_bytes(b\"abc\"));\n\n    // Padding is ignored.\n    assert_eq!(Bmv::from_static(\"SGVsbG8hIQ==\"), \"Hello!!\");\n    assert_eq!(\"Hello!!\", Bmv::from_static(\"SGVsbG8hIQ==\"));\n}\n\n#[test]\nfn test_value_eq_bytes() {\n    type Bmv = BinaryMetadataValue;\n    type Amv = AsciiMetadataValue;\n\n    assert_eq!(Amv::from_static(\"abc\"), \"abc\".as_bytes());\n    assert_ne!(Amv::from_static(\"abc\"), \"ABC\".as_bytes());\n    assert_eq!(*\"abc\".as_bytes(), Amv::from_static(\"abc\"));\n    assert_ne!(*\"ABC\".as_bytes(), Amv::from_static(\"abc\"));\n\n    assert_eq!(*\"abc\".as_bytes(), Bmv::from_bytes(b\"abc\"));\n    assert_ne!(*\"ABC\".as_bytes(), Bmv::from_bytes(b\"abc\"));\n\n    // Padding is ignored.\n    assert_eq!(Bmv::from_static(\"SGVsbG8hIQ==\"), \"Hello!!\".as_bytes());\n    assert_eq!(*\"Hello!!\".as_bytes(), Bmv::from_static(\"SGVsbG8hIQ==\"));\n}\n\n#[test]\nfn test_ascii_value_hash() {\n    use std::collections::hash_map::DefaultHasher;\n    type Amv = AsciiMetadataValue;\n\n    fn hash(value: Amv) -\u003e u64 {\n        let mut hasher = DefaultHasher::new();\n        value.hash(\u0026mut hasher);\n        hasher.finish()\n    }\n\n    let value1 = Amv::from_static(\"abc\");\n    let value2 = Amv::from_static(\"abc\");\n    assert_eq!(value1, value2);\n    assert_eq!(hash(value1), hash(value2));\n\n    let value1 = Amv::from_static(\"abc\");\n    let value2 = Amv::from_static(\"xyz\");\n\n    assert_ne!(value1, value2);\n    assert_ne!(hash(value1), hash(value2));\n}\n\n#[test]\nfn test_valid_binary_value_hash() {\n    use std::collections::hash_map::DefaultHasher;\n    type Bmv = BinaryMetadataValue;\n\n    fn hash(value: Bmv) -\u003e u64 {\n        let mut hasher = DefaultHasher::new();\n        value.hash(\u0026mut hasher);\n        hasher.finish()\n    }\n\n    let value1 = Bmv::from_bytes(b\"abc\");\n    let value2 = Bmv::from_bytes(b\"abc\");\n    assert_eq!(value1, value2);\n    assert_eq!(hash(value1), hash(value2));\n\n    let value1 = Bmv::from_bytes(b\"abc\");\n    let value2 = Bmv::from_bytes(b\"xyz\");\n    assert_ne!(value1, value2);\n    assert_ne!(hash(value1), hash(value2));\n}\n\n#[test]\nfn test_invalid_binary_value_hash() {\n    use std::collections::hash_map::DefaultHasher;\n    type Bmv = BinaryMetadataValue;\n\n    fn hash(value: Bmv) -\u003e u64 {\n        let mut hasher = DefaultHasher::new();\n        value.hash(\u0026mut hasher);\n        hasher.finish()\n    }\n\n    unsafe {\n        let value1 = Bmv::from_shared_unchecked(Bytes::from_static(b\"..{}\"));\n        let value2 = Bmv::from_shared_unchecked(Bytes::from_static(b\"{}..\"));\n        assert_eq!(value1, value2);\n        assert_eq!(hash(value1), hash(value2));\n    }\n\n    unsafe {\n        let valid = Bmv::from_bytes(b\"abc\");\n        let invalid = Bmv::from_shared_unchecked(Bytes::from_static(b\"{}..\"));\n        assert_ne!(valid, invalid);\n        assert_ne!(hash(valid), hash(invalid));\n    }\n}\n","traces":[{"line":72,"address":[],"length":0,"stats":{"Line":23}},{"line":74,"address":[],"length":0,"stats":{"Line":46}},{"line":88,"address":[],"length":0,"stats":{"Line":5}},{"line":91,"address":[],"length":0,"stats":{"Line":10}},{"line":110,"address":[],"length":0,"stats":{"Line":10}},{"line":111,"address":[],"length":0,"stats":{"Line":20}},{"line":132,"address":[],"length":0,"stats":{"Line":8}},{"line":133,"address":[],"length":0,"stats":{"Line":16}},{"line":151,"address":[],"length":0,"stats":{"Line":1}},{"line":152,"address":[],"length":0,"stats":{"Line":3}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":1}},{"line":199,"address":[],"length":0,"stats":{"Line":1}},{"line":206,"address":[],"length":0,"stats":{"Line":10}},{"line":217,"address":[],"length":0,"stats":{"Line":12}},{"line":218,"address":[],"length":0,"stats":{"Line":12}},{"line":225,"address":[],"length":0,"stats":{"Line":10}},{"line":226,"address":[],"length":0,"stats":{"Line":10}},{"line":258,"address":[],"length":0,"stats":{"Line":34}},{"line":259,"address":[],"length":0,"stats":{"Line":102}},{"line":260,"address":[],"length":0,"stats":{"Line":34}},{"line":261,"address":[],"length":0,"stats":{"Line":34}},{"line":294,"address":[],"length":0,"stats":{"Line":1}},{"line":295,"address":[],"length":0,"stats":{"Line":3}},{"line":313,"address":[],"length":0,"stats":{"Line":1}},{"line":314,"address":[],"length":0,"stats":{"Line":3}},{"line":315,"address":[],"length":0,"stats":{"Line":1}},{"line":316,"address":[],"length":0,"stats":{"Line":1}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":380,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":400,"address":[],"length":0,"stats":{"Line":0}},{"line":418,"address":[],"length":0,"stats":{"Line":0}},{"line":419,"address":[],"length":0,"stats":{"Line":0}},{"line":435,"address":[],"length":0,"stats":{"Line":0}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":450,"address":[],"length":0,"stats":{"Line":0}},{"line":451,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":30}},{"line":468,"address":[],"length":0,"stats":{"Line":90}},{"line":474,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":4}},{"line":481,"address":[],"length":0,"stats":{"Line":12}},{"line":487,"address":[],"length":0,"stats":{"Line":1}},{"line":489,"address":[],"length":0,"stats":{"Line":2}},{"line":498,"address":[],"length":0,"stats":{"Line":16}},{"line":499,"address":[],"length":0,"stats":{"Line":16}},{"line":500,"address":[],"length":0,"stats":{"Line":32}},{"line":501,"address":[],"length":0,"stats":{"Line":16}},{"line":507,"address":[],"length":0,"stats":{"Line":8}},{"line":508,"address":[],"length":0,"stats":{"Line":24}},{"line":509,"address":[],"length":0,"stats":{"Line":24}},{"line":510,"address":[],"length":0,"stats":{"Line":16}},{"line":512,"address":[],"length":0,"stats":{"Line":16}},{"line":513,"address":[],"length":0,"stats":{"Line":24}},{"line":514,"address":[],"length":0,"stats":{"Line":16}},{"line":575,"address":[],"length":0,"stats":{"Line":10}},{"line":576,"address":[],"length":0,"stats":{"Line":20}},{"line":577,"address":[],"length":0,"stats":{"Line":10}},{"line":578,"address":[],"length":0,"stats":{"Line":10}},{"line":579,"address":[],"length":0,"stats":{"Line":10}},{"line":581,"address":[],"length":0,"stats":{"Line":10}},{"line":587,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":594,"address":[],"length":0,"stats":{"Line":0}},{"line":595,"address":[],"length":0,"stats":{"Line":0}},{"line":602,"address":[],"length":0,"stats":{"Line":0}},{"line":603,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":609,"address":[],"length":0,"stats":{"Line":0}},{"line":616,"address":[],"length":0,"stats":{"Line":4}},{"line":617,"address":[],"length":0,"stats":{"Line":12}},{"line":622,"address":[],"length":0,"stats":{"Line":8}},{"line":623,"address":[],"length":0,"stats":{"Line":8}},{"line":624,"address":[],"length":0,"stats":{"Line":20}},{"line":625,"address":[],"length":0,"stats":{"Line":12}},{"line":634,"address":[],"length":0,"stats":{"Line":13}},{"line":639,"address":[],"length":0,"stats":{"Line":39}},{"line":647,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":654,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":31}},{"line":662,"address":[],"length":0,"stats":{"Line":93}},{"line":668,"address":[],"length":0,"stats":{"Line":8}},{"line":669,"address":[],"length":0,"stats":{"Line":24}},{"line":675,"address":[],"length":0,"stats":{"Line":0}},{"line":676,"address":[],"length":0,"stats":{"Line":0}},{"line":682,"address":[],"length":0,"stats":{"Line":0}},{"line":683,"address":[],"length":0,"stats":{"Line":0}},{"line":689,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":0}},{"line":696,"address":[],"length":0,"stats":{"Line":5}},{"line":697,"address":[],"length":0,"stats":{"Line":5}},{"line":703,"address":[],"length":0,"stats":{"Line":0}},{"line":704,"address":[],"length":0,"stats":{"Line":0}},{"line":710,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":16}},{"line":718,"address":[],"length":0,"stats":{"Line":32}},{"line":724,"address":[],"length":0,"stats":{"Line":0}},{"line":725,"address":[],"length":0,"stats":{"Line":0}},{"line":731,"address":[],"length":0,"stats":{"Line":0}},{"line":732,"address":[],"length":0,"stats":{"Line":0}},{"line":738,"address":[],"length":0,"stats":{"Line":0}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":745,"address":[],"length":0,"stats":{"Line":1}},{"line":746,"address":[],"length":0,"stats":{"Line":1}},{"line":752,"address":[],"length":0,"stats":{"Line":0}},{"line":753,"address":[],"length":0,"stats":{"Line":0}},{"line":762,"address":[],"length":0,"stats":{"Line":33}},{"line":763,"address":[],"length":0,"stats":{"Line":33}},{"line":772,"address":[],"length":0,"stats":{"Line":0}},{"line":773,"address":[],"length":0,"stats":{"Line":0}},{"line":779,"address":[],"length":0,"stats":{"Line":5}},{"line":780,"address":[],"length":0,"stats":{"Line":5}},{"line":786,"address":[],"length":0,"stats":{"Line":0}},{"line":787,"address":[],"length":0,"stats":{"Line":0}}],"covered":72,"coverable":126},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","status.rs"],"content":"#![allow(dead_code)]\nuse crate::metadata::map::MetadataMap;\n\nuse base64::Engine as _;\nuse bytes::Bytes;\nuse http::{\n    HeaderName,\n    header::{HeaderMap, HeaderValue},\n};\nuse percent_encoding::{AsciiSet, CONTROLS, percent_decode, percent_encode};\nuse std::{borrow::Cow, error::Error, fmt, sync::Arc};\nuse tracing::{debug, trace, warn};\n\npub const GRPC_CONTENT_TYPE: HeaderValue = HeaderValue::from_static(\"application/grpc\");\nconst ENCODING_SET: \u0026AsciiSet = \u0026CONTROLS\n    .add(b' ')\n    .add(b'\"')\n    .add(b'#')\n    .add(b'%')\n    .add(b'\u003c')\n    .add(b'\u003e')\n    .add(b'`')\n    .add(b'?')\n    .add(b'{')\n    .add(b'}');\n\n/// A gRPC status describing the result of an RPC call.\n///\n/// Values can be created using the `new` function or one of the specialized\n/// associated functions.\n/// ```rust\n/// # use tonic::{Status, Code};\n/// let status1 = Status::new(Code::InvalidArgument, \"name is invalid\");\n/// let status2 = Status::invalid_argument(\"name is invalid\");\n///\n/// assert_eq!(status1.code(), Code::InvalidArgument);\n/// assert_eq!(status1.code(), status2.code());\n/// ```\n#[derive(Clone)]\npub struct Status(Box\u003cStatusInner\u003e);\n\n/// Box the contents of Status to avoid large error variants\n#[derive(Clone)]\nstruct StatusInner {\n    /// The gRPC status code, found in the `grpc-status` header.\n    code: Code,\n    /// A relevant error message, found in the `grpc-message` header.\n    message: String,\n    /// Binary opaque details, found in the `grpc-status-details-bin` header.\n    details: Bytes,\n    /// Custom metadata, found in the user-defined headers.\n    /// If the metadata contains any headers with names reserved either by the gRPC spec\n    /// or by `Status` fields above, they will be ignored.\n    metadata: MetadataMap,\n    /// Optional underlying error.\n    source: Option\u003cArc\u003cdyn Error + Send + Sync + 'static\u003e\u003e,\n}\n\nimpl StatusInner {\n    fn into_status(self) -\u003e Status {\n        Status(Box::new(self))\n    }\n}\n\n/// gRPC status codes used by [`Status`].\n///\n/// These variants match the [gRPC status codes].\n///\n/// [gRPC status codes]: https://github.com/grpc/grpc/blob/master/doc/statuscodes.md#status-codes-and-their-use-in-grpc\n#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash)]\npub enum Code {\n    /// The operation completed successfully.\n    Ok = 0,\n\n    /// The operation was cancelled.\n    Cancelled = 1,\n\n    /// Unknown error.\n    Unknown = 2,\n\n    /// Client specified an invalid argument.\n    InvalidArgument = 3,\n\n    /// Deadline expired before operation could complete.\n    DeadlineExceeded = 4,\n\n    /// Some requested entity was not found.\n    NotFound = 5,\n\n    /// Some entity that we attempted to create already exists.\n    AlreadyExists = 6,\n\n    /// The caller does not have permission to execute the specified operation.\n    PermissionDenied = 7,\n\n    /// Some resource has been exhausted.\n    ResourceExhausted = 8,\n\n    /// The system is not in a state required for the operation's execution.\n    FailedPrecondition = 9,\n\n    /// The operation was aborted.\n    Aborted = 10,\n\n    /// Operation was attempted past the valid range.\n    OutOfRange = 11,\n\n    /// Operation is not implemented or not supported.\n    Unimplemented = 12,\n\n    /// Internal error.\n    Internal = 13,\n\n    /// The service is currently unavailable.\n    Unavailable = 14,\n\n    /// Unrecoverable data loss or corruption.\n    DataLoss = 15,\n\n    /// The request does not have valid authentication credentials\n    Unauthenticated = 16,\n}\n\nimpl Code {\n    /// Get description of this `Code`.\n    /// ```\n    /// fn make_grpc_request() -\u003e tonic::Code {\n    ///     // ...\n    ///     tonic::Code::Ok\n    /// }\n    /// let code = make_grpc_request();\n    /// println!(\"Operation completed. Human readable description: {}\", code.description());\n    /// ```\n    /// If you only need description in `println`, `format`, `log` and other\n    /// formatting contexts, you may want to use `Display` impl for `Code`\n    /// instead.\n    pub fn description(\u0026self) -\u003e \u0026'static str {\n        match self {\n            Code::Ok =\u003e \"The operation completed successfully\",\n            Code::Cancelled =\u003e \"The operation was cancelled\",\n            Code::Unknown =\u003e \"Unknown error\",\n            Code::InvalidArgument =\u003e \"Client specified an invalid argument\",\n            Code::DeadlineExceeded =\u003e \"Deadline expired before operation could complete\",\n            Code::NotFound =\u003e \"Some requested entity was not found\",\n            Code::AlreadyExists =\u003e \"Some entity that we attempted to create already exists\",\n            Code::PermissionDenied =\u003e {\n                \"The caller does not have permission to execute the specified operation\"\n            }\n            Code::ResourceExhausted =\u003e \"Some resource has been exhausted\",\n            Code::FailedPrecondition =\u003e {\n                \"The system is not in a state required for the operation's execution\"\n            }\n            Code::Aborted =\u003e \"The operation was aborted\",\n            Code::OutOfRange =\u003e \"Operation was attempted past the valid range\",\n            Code::Unimplemented =\u003e \"Operation is not implemented or not supported\",\n            Code::Internal =\u003e \"Internal error\",\n            Code::Unavailable =\u003e \"The service is currently unavailable\",\n            Code::DataLoss =\u003e \"Unrecoverable data loss or corruption\",\n            Code::Unauthenticated =\u003e \"The request does not have valid authentication credentials\",\n        }\n    }\n}\n\nimpl std::fmt::Display for Code {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        std::fmt::Display::fmt(self.description(), f)\n    }\n}\n\n// ===== impl Status =====\n\nimpl Status {\n    /// Create a new `Status` with the associated code and message.\n    pub fn new(code: Code, message: impl Into\u003cString\u003e) -\u003e Status {\n        StatusInner {\n            code,\n            message: message.into(),\n            details: Bytes::new(),\n            metadata: MetadataMap::new(),\n            source: None,\n        }\n        .into_status()\n    }\n\n    /// The operation completed successfully.\n    pub fn ok(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Ok, message)\n    }\n\n    /// The operation was cancelled (typically by the caller).\n    pub fn cancelled(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Cancelled, message)\n    }\n\n    /// Unknown error. An example of where this error may be returned is if a\n    /// `Status` value received from another address space belongs to an error-space\n    /// that is not known in this address space. Also errors raised by APIs that\n    /// do not return enough error information may be converted to this error.\n    pub fn unknown(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Unknown, message)\n    }\n\n    /// Client specified an invalid argument. Note that this differs from\n    /// `FailedPrecondition`. `InvalidArgument` indicates arguments that are\n    /// problematic regardless of the state of the system (e.g., a malformed file\n    /// name).\n    pub fn invalid_argument(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::InvalidArgument, message)\n    }\n\n    /// Deadline expired before operation could complete. For operations that\n    /// change the state of the system, this error may be returned even if the\n    /// operation has completed successfully. For example, a successful response\n    /// from a server could have been delayed long enough for the deadline to\n    /// expire.\n    pub fn deadline_exceeded(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::DeadlineExceeded, message)\n    }\n\n    /// Some requested entity (e.g., file or directory) was not found.\n    pub fn not_found(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::NotFound, message)\n    }\n\n    /// Some entity that we attempted to create (e.g., file or directory) already\n    /// exists.\n    pub fn already_exists(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::AlreadyExists, message)\n    }\n\n    /// The caller does not have permission to execute the specified operation.\n    /// `PermissionDenied` must not be used for rejections caused by exhausting\n    /// some resource (use `ResourceExhausted` instead for those errors).\n    /// `PermissionDenied` must not be used if the caller cannot be identified\n    /// (use `Unauthenticated` instead for those errors).\n    pub fn permission_denied(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::PermissionDenied, message)\n    }\n\n    /// Some resource has been exhausted, perhaps a per-user quota, or perhaps\n    /// the entire file system is out of space.\n    pub fn resource_exhausted(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::ResourceExhausted, message)\n    }\n\n    /// Operation was rejected because the system is not in a state required for\n    /// the operation's execution. For example, directory to be deleted may be\n    /// non-empty, an rmdir operation is applied to a non-directory, etc.\n    ///\n    /// A litmus test that may help a service implementor in deciding between\n    /// `FailedPrecondition`, `Aborted`, and `Unavailable`:\n    /// (a) Use `Unavailable` if the client can retry just the failing call.\n    /// (b) Use `Aborted` if the client should retry at a higher-level (e.g.,\n    ///     restarting a read-modify-write sequence).\n    /// (c) Use `FailedPrecondition` if the client should not retry until the\n    ///     system state has been explicitly fixed.  E.g., if an \"rmdir\" fails\n    ///     because the directory is non-empty, `FailedPrecondition` should be\n    ///     returned since the client should not retry unless they have first\n    ///     fixed up the directory by deleting files from it.\n    pub fn failed_precondition(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::FailedPrecondition, message)\n    }\n\n    /// The operation was aborted, typically due to a concurrency issue like\n    /// sequencer check failures, transaction aborts, etc.\n    ///\n    /// See litmus test above for deciding between `FailedPrecondition`,\n    /// `Aborted`, and `Unavailable`.\n    pub fn aborted(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Aborted, message)\n    }\n\n    /// Operation was attempted past the valid range. E.g., seeking or reading\n    /// past end of file.\n    ///\n    /// Unlike `InvalidArgument`, this error indicates a problem that may be\n    /// fixed if the system state changes. For example, a 32-bit file system will\n    /// generate `InvalidArgument if asked to read at an offset that is not in the\n    /// range [0,2^32-1], but it will generate `OutOfRange` if asked to read from\n    /// an offset past the current file size.\n    ///\n    /// There is a fair bit of overlap between `FailedPrecondition` and\n    /// `OutOfRange`. We recommend using `OutOfRange` (the more specific error)\n    /// when it applies so that callers who are iterating through a space can\n    /// easily look for an `OutOfRange` error to detect when they are done.\n    pub fn out_of_range(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::OutOfRange, message)\n    }\n\n    /// Operation is not implemented or not supported/enabled in this service.\n    pub fn unimplemented(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Unimplemented, message)\n    }\n\n    /// Internal errors. Means some invariants expected by underlying system has\n    /// been broken. If you see one of these errors, something is very broken.\n    pub fn internal(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Internal, message)\n    }\n\n    /// The service is currently unavailable.  This is a most likely a transient\n    /// condition and may be corrected by retrying with a back-off.\n    ///\n    /// See litmus test above for deciding between `FailedPrecondition`,\n    /// `Aborted`, and `Unavailable`.\n    pub fn unavailable(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Unavailable, message)\n    }\n\n    /// Unrecoverable data loss or corruption.\n    pub fn data_loss(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::DataLoss, message)\n    }\n\n    /// The request does not have valid authentication credentials for the\n    /// operation.\n    pub fn unauthenticated(message: impl Into\u003cString\u003e) -\u003e Status {\n        Status::new(Code::Unauthenticated, message)\n    }\n\n    pub(crate) fn from_error_generic(\n        err: impl Into\u003cBox\u003cdyn Error + Send + Sync + 'static\u003e\u003e,\n    ) -\u003e Status {\n        Self::from_error(err.into())\n    }\n\n    /// Create a `Status` from various types of `Error`.\n    ///\n    /// Inspects the error source chain for recognizable errors, including statuses, HTTP2, and\n    /// hyper, and attempts to maps them to a `Status`, or else returns an Unknown `Status`.\n    pub fn from_error(err: Box\u003cdyn Error + Send + Sync + 'static\u003e) -\u003e Status {\n        Status::try_from_error(err).unwrap_or_else(|err| {\n            let mut status = Status::new(Code::Unknown, err.to_string());\n            status.0.source = Some(err.into());\n            status\n        })\n    }\n\n    /// Create a `Status` from various types of `Error`.\n    ///\n    /// Returns the error if a status could not be created.\n    ///\n    /// # Downcast stability\n    /// This function does not provide any stability guarantees around how it will downcast errors into\n    /// status codes.\n    pub fn try_from_error(\n        err: Box\u003cdyn Error + Send + Sync + 'static\u003e,\n    ) -\u003e Result\u003cStatus, Box\u003cdyn Error + Send + Sync + 'static\u003e\u003e {\n        let err = match err.downcast::\u003cStatus\u003e() {\n            Ok(status) =\u003e {\n                return Ok(*status);\n            }\n            Err(err) =\u003e err,\n        };\n\n        if let Some(mut status) = find_status_in_source_chain(\u0026*err) {\n            status.0.source = Some(err.into());\n            return Ok(status);\n        }\n\n        Err(err)\n    }\n\n    pub(crate) fn map_error\u003cE\u003e(err: E) -\u003e Status\n    where\n        E: Into\u003cBox\u003cdyn Error + Send + Sync\u003e\u003e,\n    {\n        let err: Box\u003cdyn Error + Send + Sync\u003e = err.into();\n        Status::from_error(err)\n    }\n\n    /// Extract a `Status` from a hyper `HeaderMap`.\n    pub fn from_header_map(header_map: \u0026HeaderMap) -\u003e Option\u003cStatus\u003e {\n        let code = Code::from_bytes(header_map.get(Self::GRPC_STATUS)?.as_ref());\n\n        let error_message = match header_map.get(Self::GRPC_MESSAGE) {\n            Some(header) =\u003e percent_decode(header.as_bytes())\n                .decode_utf8()\n                .map(|cow| cow.to_string()),\n            None =\u003e Ok(String::new()),\n        };\n\n        let details = match header_map.get(Self::GRPC_STATUS_DETAILS) {\n            Some(header) =\u003e crate::util::base64::STANDARD\n                .decode(header.as_bytes())\n                .expect(\"Invalid status header, expected base64 encoded value\")\n                .into(),\n            None =\u003e Bytes::new(),\n        };\n\n        let other_headers = {\n            let mut header_map = header_map.clone();\n            header_map.remove(Self::GRPC_STATUS);\n            header_map.remove(Self::GRPC_MESSAGE);\n            header_map.remove(Self::GRPC_STATUS_DETAILS);\n            header_map\n        };\n\n        let (code, message) = match error_message {\n            Ok(message) =\u003e (code, message),\n            Err(e) =\u003e {\n                let error_message = format!(\"Error deserializing status message header: {e}\");\n                warn!(error_message);\n                (Code::Unknown, error_message)\n            }\n        };\n\n        Some(\n            StatusInner {\n                code,\n                message,\n                details,\n                metadata: MetadataMap::from_headers(other_headers),\n                source: None,\n            }\n            .into_status(),\n        )\n    }\n\n    /// Get the gRPC `Code` of this `Status`.\n    pub fn code(\u0026self) -\u003e Code {\n        self.0.code\n    }\n\n    /// Get the text error message of this `Status`.\n    pub fn message(\u0026self) -\u003e \u0026str {\n        \u0026self.0.message\n    }\n\n    /// Get the opaque error details of this `Status`.\n    pub fn details(\u0026self) -\u003e \u0026[u8] {\n        \u0026self.0.details\n    }\n\n    /// Get a reference to the custom metadata.\n    pub fn metadata(\u0026self) -\u003e \u0026MetadataMap {\n        \u0026self.0.metadata\n    }\n\n    /// Get a mutable reference to the custom metadata.\n    pub fn metadata_mut(\u0026mut self) -\u003e \u0026mut MetadataMap {\n        \u0026mut self.0.metadata\n    }\n\n    pub(crate) fn to_header_map(\u0026self) -\u003e Result\u003cHeaderMap, Self\u003e {\n        let mut header_map = HeaderMap::with_capacity(3 + self.0.metadata.len());\n        self.add_header(\u0026mut header_map)?;\n        Ok(header_map)\n    }\n\n    /// Add headers from this `Status` into `header_map`.\n    pub fn add_header(\u0026self, header_map: \u0026mut HeaderMap) -\u003e Result\u003c(), Self\u003e {\n        header_map.extend(self.0.metadata.clone().into_sanitized_headers());\n\n        header_map.insert(Self::GRPC_STATUS, self.0.code.to_header_value());\n\n        if !self.0.message.is_empty() {\n            let to_write = Bytes::copy_from_slice(\n                Cow::from(percent_encode(self.message().as_bytes(), ENCODING_SET)).as_bytes(),\n            );\n\n            header_map.insert(\n                Self::GRPC_MESSAGE,\n                HeaderValue::from_maybe_shared(to_write).map_err(invalid_header_value_byte)?,\n            );\n        }\n\n        if !self.0.details.is_empty() {\n            let details = crate::util::base64::STANDARD_NO_PAD.encode(\u0026self.0.details[..]);\n\n            header_map.insert(\n                Self::GRPC_STATUS_DETAILS,\n                HeaderValue::from_maybe_shared(details).map_err(invalid_header_value_byte)?,\n            );\n        }\n\n        Ok(())\n    }\n\n    /// Create a new `Status` with the associated code, message, and binary details field.\n    pub fn with_details(code: Code, message: impl Into\u003cString\u003e, details: Bytes) -\u003e Status {\n        Self::with_details_and_metadata(code, message, details, MetadataMap::new())\n    }\n\n    /// Create a new `Status` with the associated code, message, and custom metadata\n    pub fn with_metadata(code: Code, message: impl Into\u003cString\u003e, metadata: MetadataMap) -\u003e Status {\n        Self::with_details_and_metadata(code, message, Bytes::new(), metadata)\n    }\n\n    /// Create a new `Status` with the associated code, message, binary details field and custom metadata\n    pub fn with_details_and_metadata(\n        code: Code,\n        message: impl Into\u003cString\u003e,\n        details: Bytes,\n        metadata: MetadataMap,\n    ) -\u003e Status {\n        StatusInner {\n            code,\n            message: message.into(),\n            details,\n            metadata,\n            source: None,\n        }\n        .into_status()\n    }\n\n    /// Add a source error to this status.\n    pub fn set_source(\u0026mut self, source: Arc\u003cdyn Error + Send + Sync + 'static\u003e) -\u003e \u0026mut Status {\n        self.0.source = Some(source);\n        self\n    }\n\n    /// Build an `http::Response` from the given `Status`.\n    pub fn into_http\u003cB: Default\u003e(self) -\u003e http::Response\u003cB\u003e {\n        let mut response = http::Response::new(B::default());\n        response\n            .headers_mut()\n            .insert(http::header::CONTENT_TYPE, GRPC_CONTENT_TYPE);\n        self.add_header(response.headers_mut()).unwrap();\n        response.extensions_mut().insert(self);\n        response\n    }\n\n    #[doc(hidden)]\n    pub const GRPC_STATUS: HeaderName = HeaderName::from_static(\"grpc-status\");\n    #[doc(hidden)]\n    pub const GRPC_MESSAGE: HeaderName = HeaderName::from_static(\"grpc-message\");\n    #[doc(hidden)]\n    pub const GRPC_STATUS_DETAILS: HeaderName = HeaderName::from_static(\"grpc-status-details-bin\");\n}\n\nfn find_status_in_source_chain(err: \u0026(dyn Error + 'static)) -\u003e Option\u003cStatus\u003e {\n    let mut source = Some(err);\n\n    while let Some(err) = source {\n        if let Some(status) = err.downcast_ref::\u003cStatus\u003e() {\n            return Some(\n                StatusInner {\n                    code: status.0.code,\n                    message: status.0.message.clone(),\n                    details: status.0.details.clone(),\n                    metadata: status.0.metadata.clone(),\n                    // Since `Status` is not `Clone`, any `source` on the original Status\n                    // cannot be cloned so must remain with the original `Status`.\n                    source: None,\n                }\n                .into_status(),\n            );\n        }\n\n        if let Some(timeout) = err.downcast_ref::\u003cTimeoutExpired\u003e() {\n            return Some(Status::cancelled(timeout.to_string()));\n        }\n\n        // If we are unable to connect to the server, map this to UNAVAILABLE.  This is\n        // consistent with the behavior of a C++ gRPC client when the server is not running, and\n        // matches the spec of:\n        // \u003e The service is currently unavailable. This is most likely a transient condition that\n        // \u003e can be corrected if retried with a backoff.\n        if let Some(connect) = err.downcast_ref::\u003cConnectError\u003e() {\n            return Some(Status::unavailable(connect.to_string()));\n        }\n\n        source = err.source();\n    }\n\n    None\n}\n\nimpl fmt::Debug for Status {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        self.0.fmt(f)\n    }\n}\n\nimpl fmt::Debug for StatusInner {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        // A manual impl to reduce the noise of frequently empty fields.\n        let mut builder = f.debug_struct(\"Status\");\n\n        builder.field(\"code\", \u0026self.code);\n\n        if !self.message.is_empty() {\n            builder.field(\"message\", \u0026self.message);\n        }\n\n        if !self.details.is_empty() {\n            builder.field(\"details\", \u0026self.details);\n        }\n\n        if !self.metadata.is_empty() {\n            builder.field(\"metadata\", \u0026self.metadata);\n        }\n\n        builder.field(\"source\", \u0026self.source);\n\n        builder.finish()\n    }\n}\n\nfn invalid_header_value_byte\u003cError: fmt::Display\u003e(err: Error) -\u003e Status {\n    debug!(\"Invalid header: {}\", err);\n    Status::new(\n        Code::Internal,\n        \"Couldn't serialize non-text grpc status header\".to_string(),\n    )\n}\n\nimpl From\u003cstd::io::Error\u003e for Status {\n    fn from(err: std::io::Error) -\u003e Self {\n        use std::io::ErrorKind;\n        let code = match err.kind() {\n            ErrorKind::BrokenPipe\n            | ErrorKind::WouldBlock\n            | ErrorKind::WriteZero\n            | ErrorKind::Interrupted =\u003e Code::Internal,\n            ErrorKind::ConnectionRefused\n            | ErrorKind::ConnectionReset\n            | ErrorKind::NotConnected\n            | ErrorKind::AddrInUse\n            | ErrorKind::AddrNotAvailable =\u003e Code::Unavailable,\n            ErrorKind::AlreadyExists =\u003e Code::AlreadyExists,\n            ErrorKind::ConnectionAborted =\u003e Code::Aborted,\n            ErrorKind::InvalidData =\u003e Code::DataLoss,\n            ErrorKind::InvalidInput =\u003e Code::InvalidArgument,\n            ErrorKind::NotFound =\u003e Code::NotFound,\n            ErrorKind::PermissionDenied =\u003e Code::PermissionDenied,\n            ErrorKind::TimedOut =\u003e Code::DeadlineExceeded,\n            ErrorKind::UnexpectedEof =\u003e Code::OutOfRange,\n            _ =\u003e Code::Unknown,\n        };\n        Status::new(code, err.to_string())\n    }\n}\n\nimpl fmt::Display for Status {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        write!(f, \"code: '{}'\", self.code())?;\n\n        if !self.message().is_empty() {\n            write!(f, \", message: {:?}\", self.message())?;\n        }\n        // We intentionally omit `self.details` since it's binary data, not fit for human eyes.\n        if !self.metadata().is_empty() {\n            write!(f, \", metadata: {:?}\", self.metadata().as_ref())?;\n        }\n        if let Some(source) = self.source() {\n            write!(f, \", source: {source:?}\")?;\n        }\n        Ok(())\n    }\n}\n\nimpl Error for Status {\n    fn source(\u0026self) -\u003e Option\u003c\u0026(dyn Error + 'static)\u003e {\n        self.0.source.as_ref().map(|err| (\u0026**err) as _)\n    }\n}\n\n///\n/// Take the `Status` value from `trailers` if it is available, else from `status_code`.\n///\npub(crate) fn infer_grpc_status(\n    trailers: Option\u003c\u0026HeaderMap\u003e,\n    status_code: http::StatusCode,\n) -\u003e Result\u003c(), Option\u003cStatus\u003e\u003e {\n    if let Some(trailers) = trailers {\n        if let Some(status) = Status::from_header_map(trailers) {\n            if status.code() == Code::Ok {\n                return Ok(());\n            } else {\n                return Err(status.into());\n            }\n        }\n    }\n    trace!(\"trailers missing grpc-status\");\n    let code = match status_code {\n        // Borrowed from https://github.com/grpc/grpc/blob/master/doc/http-grpc-status-mapping.md\n        http::StatusCode::BAD_REQUEST =\u003e Code::Internal,\n        http::StatusCode::UNAUTHORIZED =\u003e Code::Unauthenticated,\n        http::StatusCode::FORBIDDEN =\u003e Code::PermissionDenied,\n        http::StatusCode::NOT_FOUND =\u003e Code::Unimplemented,\n        http::StatusCode::TOO_MANY_REQUESTS\n        | http::StatusCode::BAD_GATEWAY\n        | http::StatusCode::SERVICE_UNAVAILABLE\n        | http::StatusCode::GATEWAY_TIMEOUT =\u003e Code::Unavailable,\n        // We got a 200 but no trailers, we can infer that this request is finished.\n        //\n        // This can happen when a streaming response sends two Status but\n        // gRPC requires that we end the stream after the first status.\n        //\n        // https://github.com/hyperium/tonic/issues/681\n        http::StatusCode::OK =\u003e return Err(None),\n        _ =\u003e Code::Unknown,\n    };\n\n    let msg = format!(\n        \"grpc-status header missing, mapped from HTTP status code {}\",\n        status_code.as_u16(),\n    );\n    let status = Status::new(code, msg);\n    Err(status.into())\n}\n\n// ===== impl Code =====\n\nimpl Code {\n    /// Get the `Code` that represents the integer, if known.\n    ///\n    /// If not known, returns `Code::Unknown` (surprise!).\n    pub const fn from_i32(i: i32) -\u003e Code {\n        match i {\n            0 =\u003e Code::Ok,\n            1 =\u003e Code::Cancelled,\n            2 =\u003e Code::Unknown,\n            3 =\u003e Code::InvalidArgument,\n            4 =\u003e Code::DeadlineExceeded,\n            5 =\u003e Code::NotFound,\n            6 =\u003e Code::AlreadyExists,\n            7 =\u003e Code::PermissionDenied,\n            8 =\u003e Code::ResourceExhausted,\n            9 =\u003e Code::FailedPrecondition,\n            10 =\u003e Code::Aborted,\n            11 =\u003e Code::OutOfRange,\n            12 =\u003e Code::Unimplemented,\n            13 =\u003e Code::Internal,\n            14 =\u003e Code::Unavailable,\n            15 =\u003e Code::DataLoss,\n            16 =\u003e Code::Unauthenticated,\n\n            _ =\u003e Code::Unknown,\n        }\n    }\n\n    /// Convert the string representation of a `Code` (as stored, for example, in the `grpc-status`\n    /// header in a response) into a `Code`. Returns `Code::Unknown` if the code string is not a\n    /// valid gRPC status code.\n    pub fn from_bytes(bytes: \u0026[u8]) -\u003e Code {\n        match bytes.len() {\n            1 =\u003e match bytes[0] {\n                b'0' =\u003e Code::Ok,\n                b'1' =\u003e Code::Cancelled,\n                b'2' =\u003e Code::Unknown,\n                b'3' =\u003e Code::InvalidArgument,\n                b'4' =\u003e Code::DeadlineExceeded,\n                b'5' =\u003e Code::NotFound,\n                b'6' =\u003e Code::AlreadyExists,\n                b'7' =\u003e Code::PermissionDenied,\n                b'8' =\u003e Code::ResourceExhausted,\n                b'9' =\u003e Code::FailedPrecondition,\n                _ =\u003e Code::parse_err(),\n            },\n            2 =\u003e match (bytes[0], bytes[1]) {\n                (b'1', b'0') =\u003e Code::Aborted,\n                (b'1', b'1') =\u003e Code::OutOfRange,\n                (b'1', b'2') =\u003e Code::Unimplemented,\n                (b'1', b'3') =\u003e Code::Internal,\n                (b'1', b'4') =\u003e Code::Unavailable,\n                (b'1', b'5') =\u003e Code::DataLoss,\n                (b'1', b'6') =\u003e Code::Unauthenticated,\n                _ =\u003e Code::parse_err(),\n            },\n            _ =\u003e Code::parse_err(),\n        }\n    }\n\n    fn to_header_value(self) -\u003e HeaderValue {\n        match self {\n            Code::Ok =\u003e HeaderValue::from_static(\"0\"),\n            Code::Cancelled =\u003e HeaderValue::from_static(\"1\"),\n            Code::Unknown =\u003e HeaderValue::from_static(\"2\"),\n            Code::InvalidArgument =\u003e HeaderValue::from_static(\"3\"),\n            Code::DeadlineExceeded =\u003e HeaderValue::from_static(\"4\"),\n            Code::NotFound =\u003e HeaderValue::from_static(\"5\"),\n            Code::AlreadyExists =\u003e HeaderValue::from_static(\"6\"),\n            Code::PermissionDenied =\u003e HeaderValue::from_static(\"7\"),\n            Code::ResourceExhausted =\u003e HeaderValue::from_static(\"8\"),\n            Code::FailedPrecondition =\u003e HeaderValue::from_static(\"9\"),\n            Code::Aborted =\u003e HeaderValue::from_static(\"10\"),\n            Code::OutOfRange =\u003e HeaderValue::from_static(\"11\"),\n            Code::Unimplemented =\u003e HeaderValue::from_static(\"12\"),\n            Code::Internal =\u003e HeaderValue::from_static(\"13\"),\n            Code::Unavailable =\u003e HeaderValue::from_static(\"14\"),\n            Code::DataLoss =\u003e HeaderValue::from_static(\"15\"),\n            Code::Unauthenticated =\u003e HeaderValue::from_static(\"16\"),\n        }\n    }\n\n    fn parse_err() -\u003e Code {\n        trace!(\"error parsing grpc-status\");\n        Code::Unknown\n    }\n}\n\nimpl From\u003ci32\u003e for Code {\n    fn from(i: i32) -\u003e Self {\n        Code::from_i32(i)\n    }\n}\n\nimpl From\u003cCode\u003e for i32 {\n    #[inline]\n    fn from(code: Code) -\u003e i32 {\n        code as i32\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::BoxError;\n\n    #[derive(Debug)]\n    struct Nested(BoxError);\n\n    impl fmt::Display for Nested {\n        fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n            write!(f, \"nested error: {}\", self.0)\n        }\n    }\n\n    impl std::error::Error for Nested {\n        fn source(\u0026self) -\u003e Option\u003c\u0026(dyn std::error::Error + 'static)\u003e {\n            Some(\u0026*self.0)\n        }\n    }\n\n    #[test]\n    fn from_error_status() {\n        let orig = Status::new(Code::OutOfRange, \"weeaboo\");\n        let found = Status::from_error(Box::new(orig));\n\n        assert_eq!(found.code(), Code::OutOfRange);\n        assert_eq!(found.message(), \"weeaboo\");\n    }\n\n    #[test]\n    fn from_error_unknown() {\n        let orig: BoxError = \"peek-a-boo\".into();\n        let found = Status::from_error(orig);\n\n        assert_eq!(found.code(), Code::Unknown);\n        assert_eq!(found.message(), \"peek-a-boo\".to_string());\n    }\n\n    #[test]\n    fn from_error_nested() {\n        let orig = Nested(Box::new(Status::new(Code::OutOfRange, \"weeaboo\")));\n        let found = Status::from_error(Box::new(orig));\n\n        assert_eq!(found.code(), Code::OutOfRange);\n        assert_eq!(found.message(), \"weeaboo\");\n    }\n\n    #[test]\n    fn code_from_i32() {\n        // This for loop should catch if we ever add a new variant and don't\n        // update From\u003ci32\u003e.\n        for i in 0..(Code::Unauthenticated as i32) {\n            let code = Code::from(i);\n            assert_eq!(\n                i, code as i32,\n                \"Code::from({}) returned {:?} which is {}\",\n                i, code, code as i32,\n            );\n        }\n\n        assert_eq!(Code::from(-1), Code::Unknown);\n    }\n\n    #[test]\n    fn constructors() {\n        assert_eq!(Status::ok(\"\").code(), Code::Ok);\n        assert_eq!(Status::cancelled(\"\").code(), Code::Cancelled);\n        assert_eq!(Status::unknown(\"\").code(), Code::Unknown);\n        assert_eq!(Status::invalid_argument(\"\").code(), Code::InvalidArgument);\n        assert_eq!(Status::deadline_exceeded(\"\").code(), Code::DeadlineExceeded);\n        assert_eq!(Status::not_found(\"\").code(), Code::NotFound);\n        assert_eq!(Status::already_exists(\"\").code(), Code::AlreadyExists);\n        assert_eq!(Status::permission_denied(\"\").code(), Code::PermissionDenied);\n        assert_eq!(\n            Status::resource_exhausted(\"\").code(),\n            Code::ResourceExhausted\n        );\n        assert_eq!(\n            Status::failed_precondition(\"\").code(),\n            Code::FailedPrecondition\n        );\n        assert_eq!(Status::aborted(\"\").code(), Code::Aborted);\n        assert_eq!(Status::out_of_range(\"\").code(), Code::OutOfRange);\n        assert_eq!(Status::unimplemented(\"\").code(), Code::Unimplemented);\n        assert_eq!(Status::internal(\"\").code(), Code::Internal);\n        assert_eq!(Status::unavailable(\"\").code(), Code::Unavailable);\n        assert_eq!(Status::data_loss(\"\").code(), Code::DataLoss);\n        assert_eq!(Status::unauthenticated(\"\").code(), Code::Unauthenticated);\n    }\n\n    #[test]\n    fn details() {\n        const DETAILS: \u0026[u8] = \u0026[0, 2, 3];\n\n        let status = Status::with_details(Code::Unavailable, \"some message\", DETAILS.into());\n\n        assert_eq!(status.details(), DETAILS);\n\n        let header_map = status.to_header_map().unwrap();\n\n        let b64_details = crate::util::base64::STANDARD_NO_PAD.encode(DETAILS);\n\n        assert_eq!(header_map[Status::GRPC_STATUS_DETAILS], b64_details);\n\n        let status = Status::from_header_map(\u0026header_map).unwrap();\n\n        assert_eq!(status.details(), DETAILS);\n    }\n}\n\n/// Error returned if a request didn't complete within the configured timeout.\n///\n/// Timeouts can be configured either with [`Endpoint::timeout`], [`Server::timeout`], or by\n/// setting the [`grpc-timeout` metadata value][spec].\n///\n/// [`Endpoint::timeout`]: crate::transport::server::Server::timeout\n/// [`Server::timeout`]: crate::transport::channel::Endpoint::timeout\n/// [spec]: https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md\n#[derive(Debug)]\npub struct TimeoutExpired(pub ());\n\nimpl fmt::Display for TimeoutExpired {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        write!(f, \"Timeout expired\")\n    }\n}\n\n// std::error::Error only requires a type to impl Debug and Display\nimpl std::error::Error for TimeoutExpired {}\n\n/// Wrapper type to indicate that an error occurs during the connection\n/// process, so that the appropriate gRPC Status can be inferred.\n#[derive(Debug)]\npub struct ConnectError(pub Box\u003cdyn std::error::Error + Send + Sync\u003e);\n\nimpl fmt::Display for ConnectError {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        fmt::Display::fmt(\u0026self.0, f)\n    }\n}\n\nimpl std::error::Error for ConnectError {\n    fn source(\u0026self) -\u003e Option\u003c\u0026(dyn std::error::Error + 'static)\u003e {\n        Some(self.0.as_ref())\n    }\n}\n","traces":[{"line":60,"address":[],"length":0,"stats":{"Line":25}},{"line":61,"address":[],"length":0,"stats":{"Line":25}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":21}},{"line":177,"address":[],"length":0,"stats":{"Line":63}},{"line":178,"address":[],"length":0,"stats":{"Line":42}},{"line":179,"address":[],"length":0,"stats":{"Line":21}},{"line":186,"address":[],"length":0,"stats":{"Line":1}},{"line":187,"address":[],"length":0,"stats":{"Line":3}},{"line":191,"address":[],"length":0,"stats":{"Line":1}},{"line":192,"address":[],"length":0,"stats":{"Line":3}},{"line":199,"address":[],"length":0,"stats":{"Line":2}},{"line":200,"address":[],"length":0,"stats":{"Line":6}},{"line":207,"address":[],"length":0,"stats":{"Line":1}},{"line":208,"address":[],"length":0,"stats":{"Line":3}},{"line":216,"address":[],"length":0,"stats":{"Line":1}},{"line":217,"address":[],"length":0,"stats":{"Line":3}},{"line":221,"address":[],"length":0,"stats":{"Line":1}},{"line":222,"address":[],"length":0,"stats":{"Line":3}},{"line":227,"address":[],"length":0,"stats":{"Line":1}},{"line":228,"address":[],"length":0,"stats":{"Line":3}},{"line":236,"address":[],"length":0,"stats":{"Line":1}},{"line":237,"address":[],"length":0,"stats":{"Line":3}},{"line":242,"address":[],"length":0,"stats":{"Line":1}},{"line":243,"address":[],"length":0,"stats":{"Line":3}},{"line":260,"address":[],"length":0,"stats":{"Line":1}},{"line":261,"address":[],"length":0,"stats":{"Line":3}},{"line":269,"address":[],"length":0,"stats":{"Line":1}},{"line":270,"address":[],"length":0,"stats":{"Line":3}},{"line":286,"address":[],"length":0,"stats":{"Line":1}},{"line":287,"address":[],"length":0,"stats":{"Line":3}},{"line":291,"address":[],"length":0,"stats":{"Line":1}},{"line":292,"address":[],"length":0,"stats":{"Line":3}},{"line":297,"address":[],"length":0,"stats":{"Line":1}},{"line":298,"address":[],"length":0,"stats":{"Line":3}},{"line":306,"address":[],"length":0,"stats":{"Line":1}},{"line":307,"address":[],"length":0,"stats":{"Line":3}},{"line":311,"address":[],"length":0,"stats":{"Line":1}},{"line":312,"address":[],"length":0,"stats":{"Line":3}},{"line":317,"address":[],"length":0,"stats":{"Line":1}},{"line":318,"address":[],"length":0,"stats":{"Line":3}},{"line":321,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":331,"address":[],"length":0,"stats":{"Line":3}},{"line":332,"address":[],"length":0,"stats":{"Line":10}},{"line":333,"address":[],"length":0,"stats":{"Line":5}},{"line":334,"address":[],"length":0,"stats":{"Line":2}},{"line":335,"address":[],"length":0,"stats":{"Line":1}},{"line":346,"address":[],"length":0,"stats":{"Line":3}},{"line":349,"address":[],"length":0,"stats":{"Line":5}},{"line":350,"address":[],"length":0,"stats":{"Line":1}},{"line":351,"address":[],"length":0,"stats":{"Line":1}},{"line":353,"address":[],"length":0,"stats":{"Line":4}},{"line":356,"address":[],"length":0,"stats":{"Line":3}},{"line":357,"address":[],"length":0,"stats":{"Line":2}},{"line":358,"address":[],"length":0,"stats":{"Line":1}},{"line":361,"address":[],"length":0,"stats":{"Line":1}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":368,"address":[],"length":0,"stats":{"Line":0}},{"line":369,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":2}},{"line":374,"address":[],"length":0,"stats":{"Line":12}},{"line":376,"address":[],"length":0,"stats":{"Line":6}},{"line":377,"address":[],"length":0,"stats":{"Line":6}},{"line":379,"address":[],"length":0,"stats":{"Line":6}},{"line":380,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":6}},{"line":384,"address":[],"length":0,"stats":{"Line":2}},{"line":385,"address":[],"length":0,"stats":{"Line":3}},{"line":388,"address":[],"length":0,"stats":{"Line":1}},{"line":391,"address":[],"length":0,"stats":{"Line":2}},{"line":392,"address":[],"length":0,"stats":{"Line":6}},{"line":393,"address":[],"length":0,"stats":{"Line":6}},{"line":394,"address":[],"length":0,"stats":{"Line":6}},{"line":395,"address":[],"length":0,"stats":{"Line":6}},{"line":396,"address":[],"length":0,"stats":{"Line":2}},{"line":399,"address":[],"length":0,"stats":{"Line":6}},{"line":400,"address":[],"length":0,"stats":{"Line":4}},{"line":401,"address":[],"length":0,"stats":{"Line":0}},{"line":402,"address":[],"length":0,"stats":{"Line":0}},{"line":403,"address":[],"length":0,"stats":{"Line":0}},{"line":404,"address":[],"length":0,"stats":{"Line":0}},{"line":409,"address":[],"length":0,"stats":{"Line":2}},{"line":410,"address":[],"length":0,"stats":{"Line":4}},{"line":411,"address":[],"length":0,"stats":{"Line":4}},{"line":412,"address":[],"length":0,"stats":{"Line":4}},{"line":413,"address":[],"length":0,"stats":{"Line":4}},{"line":414,"address":[],"length":0,"stats":{"Line":2}},{"line":416,"address":[],"length":0,"stats":{"Line":2}},{"line":421,"address":[],"length":0,"stats":{"Line":20}},{"line":422,"address":[],"length":0,"stats":{"Line":20}},{"line":426,"address":[],"length":0,"stats":{"Line":8}},{"line":427,"address":[],"length":0,"stats":{"Line":8}},{"line":431,"address":[],"length":0,"stats":{"Line":2}},{"line":432,"address":[],"length":0,"stats":{"Line":2}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":437,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":445,"address":[],"length":0,"stats":{"Line":2}},{"line":446,"address":[],"length":0,"stats":{"Line":6}},{"line":447,"address":[],"length":0,"stats":{"Line":6}},{"line":448,"address":[],"length":0,"stats":{"Line":2}},{"line":452,"address":[],"length":0,"stats":{"Line":2}},{"line":453,"address":[],"length":0,"stats":{"Line":10}},{"line":455,"address":[],"length":0,"stats":{"Line":10}},{"line":457,"address":[],"length":0,"stats":{"Line":2}},{"line":459,"address":[],"length":0,"stats":{"Line":6}},{"line":462,"address":[],"length":0,"stats":{"Line":4}},{"line":463,"address":[],"length":0,"stats":{"Line":2}},{"line":464,"address":[],"length":0,"stats":{"Line":6}},{"line":468,"address":[],"length":0,"stats":{"Line":2}},{"line":469,"address":[],"length":0,"stats":{"Line":4}},{"line":471,"address":[],"length":0,"stats":{"Line":2}},{"line":472,"address":[],"length":0,"stats":{"Line":1}},{"line":473,"address":[],"length":0,"stats":{"Line":3}},{"line":477,"address":[],"length":0,"stats":{"Line":2}},{"line":481,"address":[],"length":0,"stats":{"Line":1}},{"line":482,"address":[],"length":0,"stats":{"Line":5}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":487,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":1}},{"line":499,"address":[],"length":0,"stats":{"Line":3}},{"line":508,"address":[],"length":0,"stats":{"Line":0}},{"line":509,"address":[],"length":0,"stats":{"Line":0}},{"line":510,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":516,"address":[],"length":0,"stats":{"Line":0}},{"line":518,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":521,"address":[],"length":0,"stats":{"Line":0}},{"line":532,"address":[],"length":0,"stats":{"Line":2}},{"line":533,"address":[],"length":0,"stats":{"Line":4}},{"line":535,"address":[],"length":0,"stats":{"Line":7}},{"line":536,"address":[],"length":0,"stats":{"Line":4}},{"line":537,"address":[],"length":0,"stats":{"Line":1}},{"line":538,"address":[],"length":0,"stats":{"Line":1}},{"line":539,"address":[],"length":0,"stats":{"Line":2}},{"line":540,"address":[],"length":0,"stats":{"Line":3}},{"line":541,"address":[],"length":0,"stats":{"Line":3}},{"line":542,"address":[],"length":0,"stats":{"Line":2}},{"line":545,"address":[],"length":0,"stats":{"Line":1}},{"line":547,"address":[],"length":0,"stats":{"Line":1}},{"line":551,"address":[],"length":0,"stats":{"Line":2}},{"line":552,"address":[],"length":0,"stats":{"Line":0}},{"line":560,"address":[],"length":0,"stats":{"Line":2}},{"line":561,"address":[],"length":0,"stats":{"Line":0}},{"line":564,"address":[],"length":0,"stats":{"Line":2}},{"line":567,"address":[],"length":0,"stats":{"Line":1}},{"line":571,"address":[],"length":0,"stats":{"Line":0}},{"line":572,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":579,"address":[],"length":0,"stats":{"Line":0}},{"line":581,"address":[],"length":0,"stats":{"Line":0}},{"line":583,"address":[],"length":0,"stats":{"Line":0}},{"line":584,"address":[],"length":0,"stats":{"Line":0}},{"line":587,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":591,"address":[],"length":0,"stats":{"Line":0}},{"line":592,"address":[],"length":0,"stats":{"Line":0}},{"line":595,"address":[],"length":0,"stats":{"Line":0}},{"line":597,"address":[],"length":0,"stats":{"Line":0}},{"line":601,"address":[],"length":0,"stats":{"Line":0}},{"line":602,"address":[],"length":0,"stats":{"Line":0}},{"line":604,"address":[],"length":0,"stats":{"Line":0}},{"line":605,"address":[],"length":0,"stats":{"Line":0}},{"line":610,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":616,"address":[],"length":0,"stats":{"Line":0}},{"line":621,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":625,"address":[],"length":0,"stats":{"Line":0}},{"line":626,"address":[],"length":0,"stats":{"Line":0}},{"line":627,"address":[],"length":0,"stats":{"Line":0}},{"line":628,"address":[],"length":0,"stats":{"Line":0}},{"line":629,"address":[],"length":0,"stats":{"Line":0}},{"line":630,"address":[],"length":0,"stats":{"Line":0}},{"line":632,"address":[],"length":0,"stats":{"Line":0}},{"line":637,"address":[],"length":0,"stats":{"Line":0}},{"line":638,"address":[],"length":0,"stats":{"Line":0}},{"line":640,"address":[],"length":0,"stats":{"Line":0}},{"line":641,"address":[],"length":0,"stats":{"Line":0}},{"line":644,"address":[],"length":0,"stats":{"Line":0}},{"line":645,"address":[],"length":0,"stats":{"Line":0}},{"line":647,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":650,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":656,"address":[],"length":0,"stats":{"Line":0}},{"line":663,"address":[],"length":0,"stats":{"Line":0}},{"line":667,"address":[],"length":0,"stats":{"Line":0}},{"line":668,"address":[],"length":0,"stats":{"Line":0}},{"line":669,"address":[],"length":0,"stats":{"Line":0}},{"line":670,"address":[],"length":0,"stats":{"Line":0}},{"line":672,"address":[],"length":0,"stats":{"Line":0}},{"line":676,"address":[],"length":0,"stats":{"Line":0}},{"line":677,"address":[],"length":0,"stats":{"Line":0}},{"line":679,"address":[],"length":0,"stats":{"Line":0}},{"line":680,"address":[],"length":0,"stats":{"Line":0}},{"line":681,"address":[],"length":0,"stats":{"Line":0}},{"line":682,"address":[],"length":0,"stats":{"Line":0}},{"line":686,"address":[],"length":0,"stats":{"Line":0}},{"line":693,"address":[],"length":0,"stats":{"Line":0}},{"line":694,"address":[],"length":0,"stats":{"Line":0}},{"line":697,"address":[],"length":0,"stats":{"Line":0}},{"line":699,"address":[],"length":0,"stats":{"Line":0}},{"line":701,"address":[],"length":0,"stats":{"Line":0}},{"line":702,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":17}},{"line":712,"address":[],"length":0,"stats":{"Line":17}},{"line":713,"address":[],"length":0,"stats":{"Line":1}},{"line":714,"address":[],"length":0,"stats":{"Line":1}},{"line":715,"address":[],"length":0,"stats":{"Line":1}},{"line":716,"address":[],"length":0,"stats":{"Line":1}},{"line":717,"address":[],"length":0,"stats":{"Line":1}},{"line":718,"address":[],"length":0,"stats":{"Line":1}},{"line":719,"address":[],"length":0,"stats":{"Line":1}},{"line":720,"address":[],"length":0,"stats":{"Line":1}},{"line":721,"address":[],"length":0,"stats":{"Line":1}},{"line":722,"address":[],"length":0,"stats":{"Line":1}},{"line":723,"address":[],"length":0,"stats":{"Line":1}},{"line":724,"address":[],"length":0,"stats":{"Line":1}},{"line":725,"address":[],"length":0,"stats":{"Line":1}},{"line":726,"address":[],"length":0,"stats":{"Line":1}},{"line":727,"address":[],"length":0,"stats":{"Line":1}},{"line":728,"address":[],"length":0,"stats":{"Line":1}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":731,"address":[],"length":0,"stats":{"Line":1}},{"line":738,"address":[],"length":0,"stats":{"Line":2}},{"line":739,"address":[],"length":0,"stats":{"Line":2}},{"line":740,"address":[],"length":0,"stats":{"Line":1}},{"line":741,"address":[],"length":0,"stats":{"Line":0}},{"line":742,"address":[],"length":0,"stats":{"Line":0}},{"line":743,"address":[],"length":0,"stats":{"Line":1}},{"line":744,"address":[],"length":0,"stats":{"Line":0}},{"line":745,"address":[],"length":0,"stats":{"Line":0}},{"line":746,"address":[],"length":0,"stats":{"Line":0}},{"line":747,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":0}},{"line":749,"address":[],"length":0,"stats":{"Line":0}},{"line":750,"address":[],"length":0,"stats":{"Line":0}},{"line":751,"address":[],"length":0,"stats":{"Line":0}},{"line":753,"address":[],"length":0,"stats":{"Line":1}},{"line":754,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":0}},{"line":757,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":1}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":760,"address":[],"length":0,"stats":{"Line":0}},{"line":761,"address":[],"length":0,"stats":{"Line":0}},{"line":763,"address":[],"length":0,"stats":{"Line":0}},{"line":767,"address":[],"length":0,"stats":{"Line":2}},{"line":768,"address":[],"length":0,"stats":{"Line":2}},{"line":769,"address":[],"length":0,"stats":{"Line":0}},{"line":770,"address":[],"length":0,"stats":{"Line":0}},{"line":771,"address":[],"length":0,"stats":{"Line":1}},{"line":772,"address":[],"length":0,"stats":{"Line":0}},{"line":773,"address":[],"length":0,"stats":{"Line":0}},{"line":774,"address":[],"length":0,"stats":{"Line":0}},{"line":775,"address":[],"length":0,"stats":{"Line":0}},{"line":776,"address":[],"length":0,"stats":{"Line":0}},{"line":777,"address":[],"length":0,"stats":{"Line":0}},{"line":778,"address":[],"length":0,"stats":{"Line":0}},{"line":779,"address":[],"length":0,"stats":{"Line":0}},{"line":780,"address":[],"length":0,"stats":{"Line":0}},{"line":781,"address":[],"length":0,"stats":{"Line":0}},{"line":782,"address":[],"length":0,"stats":{"Line":0}},{"line":783,"address":[],"length":0,"stats":{"Line":1}},{"line":784,"address":[],"length":0,"stats":{"Line":0}},{"line":785,"address":[],"length":0,"stats":{"Line":0}},{"line":789,"address":[],"length":0,"stats":{"Line":0}},{"line":790,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":17}},{"line":797,"address":[],"length":0,"stats":{"Line":34}},{"line":803,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":0}},{"line":930,"address":[],"length":0,"stats":{"Line":0}},{"line":931,"address":[],"length":0,"stats":{"Line":0}},{"line":944,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":950,"address":[],"length":0,"stats":{"Line":0}},{"line":951,"address":[],"length":0,"stats":{"Line":0}}],"covered":153,"coverable":308},{"path":["/","Users","thanhdatvo","Work","current_projects","grpcweb-proxy-in-rust","src","util.rs"],"content":"//! Various utilities used throughout tonic.\n\n// some combinations of features might cause things here not to be used\n#![allow(dead_code)]\n\npub(crate) mod base64 {\n    use base64::{\n        alphabet,\n        engine::{\n            DecodePaddingMode,\n            general_purpose::{GeneralPurpose, GeneralPurposeConfig},\n        },\n    };\n\n    pub(crate) const STANDARD: GeneralPurpose = GeneralPurpose::new(\n        \u0026alphabet::STANDARD,\n        GeneralPurposeConfig::new()\n            .with_encode_padding(true)\n            .with_decode_padding_mode(DecodePaddingMode::Indifferent),\n    );\n\n    pub(crate) const STANDARD_NO_PAD: GeneralPurpose = GeneralPurpose::new(\n        \u0026alphabet::STANDARD,\n        GeneralPurposeConfig::new()\n            .with_encode_padding(false)\n            .with_decode_padding_mode(DecodePaddingMode::Indifferent),\n    );\n}\n","traces":[],"covered":0,"coverable":0}]};
        var previousData = null;
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      },
    };
  });

  return [...folders, ...files.filter(file => file.path.length === 1)];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener('hashchange', () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.slice(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(
      ({current}) => {
        return {current: [...current, file.path[0]]};
      },
      () => this.updateHash(),
    );
  }

  back(file) {
    this.setState(
      ({current}) => {
        return {current: current.slice(0, current.length - 1)};
      },
      () => this.updateHash(),
    );
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e(
    'div',
    {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e(
      'table',
      {className: 'files-list'},
      e('thead', {className: 'files-list__head'}, e('tr', null, e('th', null, 'Path'), e('th', null, 'Coverage'))),
      e(
        'tbody',
        {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile})),
      ),
    ),
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? (file.covered / file.coverable) * 100 : -1;
  const coverageDelta =
    file.prevRun && (file.covered / file.coverable) * 100 - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'tr',
    {
      className:
        'files-list__file' +
        (coverage >= 0 && coverage < 50 ? ' files-list__file_low' : '') +
        (coverage >= 50 && coverage < 80 ? ' files-list__file_medium' : '') +
        (coverage >= 80 ? ' files-list__file_high' : '') +
        (file.is_folder ? ' files-list__file_folder' : ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e(
      'td',
      null,
      file.covered + ' / ' + file.coverable + (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
    ),
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'}, e(FileHeader, {file, onBack}), e(FileContent, {file}));
}

function FileHeader({file, onBack}) {
  const coverage = (file.covered / file.coverable) * 100;
  const coverageDelta = file.prevRun && coverage - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'div',
    {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e(
      'div',
      {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable + (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
      e('input', {id: 'theme-toggle', type: 'checkbox', hidden: true}),
      e('label', {for: 'theme-toggle', id: 'theme-toggle-label'}, ''),
    ),
  );
}

function FileContent({file}) {
  return e(
    'pre',
    {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e(
        'code',
        {
          className: 'code-line' + (covered ? ' code-line_covered' : '') + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        },
        line,
      );
    }),
  );
}

(function () {
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData &&
    previousData.files.forEach(file => {
      const path = file.path.slice(commonPath.length).join('/');
      prevFilesMap.set(path, file);
    });

  const files = data.files.map(file => {
    const path = file.path.slice(commonPath.length);
    const {covered = 0, coverable = 0} = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: {covered, coverable},
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    },
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));

  const toggle = document.getElementById('theme-toggle');
  const label = document.getElementById('theme-toggle-label');
  label.textContent = '';

  toggle.addEventListener('change', () => {
    if (toggle.checked) {
      document.documentElement.setAttribute('data-theme', 'dark');
      label.textContent = '';
    } else {
      document.documentElement.removeAttribute('data-theme');
      label.textContent = '';
    }
  });
})();
</script>
</body>
</html>